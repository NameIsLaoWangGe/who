{
  "code": "import { Admin, Dialog, Shop, SkinScene, Skin, PalyAudio, EventAdmin, Click } from \"../Lwg_Template/lwg\";\r\nimport ADManager from \"../TJ/Admanager\";\r\nimport { GEnum, GSene3D } from \"../Lwg_Template/Global\";\r\nexport default class UISkin extends SkinScene {\r\n    skinOnAwake() {\r\n        console.log(Laya.stage);\r\n        Dialog.createVoluntarilyDialogue(150, 334, Dialog.UseWhere.scene3, 0, 2000, this.self);\r\n        let skinArr = Shop.getGoodsClassArr(Shop.GoodsClass.Skin);\r\n        Skin._headSkinArr = [];\r\n        Skin._eyeSkinArr = [];\r\n        Skin._currentEye.name = null;\r\n        Skin._currentHead.name = null;\r\n        for (let index = 0; index < skinArr.length; index++) {\r\n            const element = skinArr[index];\r\n            if (element[Skin.SkinProperty.classify] === Skin.SkinClass.head) {\r\n                Skin._headSkinArr.push(element);\r\n            }\r\n            else if (element[Skin.SkinProperty.classify] === Skin.SkinClass.eye) {\r\n                Skin._eyeSkinArr.push(element);\r\n            }\r\n        }\r\n    }\r\n    skinEventReg() {\r\n        EventAdmin.reg(Skin.EventType.select, this, (dataSource) => {\r\n            if (dataSource[Shop.GoodsProperty.have]) {\r\n                switch (Skin._SkinTap.selectedIndex) {\r\n                    case 0:\r\n                        Skin._currentEye.name = dataSource[Shop.GoodsProperty.name];\r\n                        EventAdmin.notify(GEnum.EventType.changeEyeDecoration);\r\n                        break;\r\n                    case 1:\r\n                        Skin._currentHead.name = dataSource[Shop.GoodsProperty.name];\r\n                        EventAdmin.notify(GEnum.EventType.changeHeadDecoration);\r\n                        if (GSene3D.HairParent) {\r\n                            GSene3D.HairParent.active = false;\r\n                        }\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                if (dataSource[Shop.GoodsProperty.getway] === Shop.Getway.ads) {\r\n                    ADManager.ShowReward(() => {\r\n                        this.adsAcquisition(dataSource);\r\n                    });\r\n                }\r\n                else if (dataSource[Shop.GoodsProperty.getway] === Shop.Getway.adsXD) {\r\n                    Dialog.createHint_Middle(Dialog.HintContent[\"请前往皮肤限定界面获取!\"]);\r\n                }\r\n                else if (dataSource[Shop.GoodsProperty.getway] === Shop.Getway.ineedwin) {\r\n                    Dialog.createHint_Middle(Dialog.HintContent[\"通过相应的关卡数达到就可以得到了!\"]);\r\n                }\r\n                else if (dataSource[Shop.GoodsProperty.getway] === Shop.Getway.gold) {\r\n                    Dialog.createHint_Middle(Dialog.HintContent[\"请前往皮肤界面购买！\"]);\r\n                }\r\n            }\r\n        });\r\n        Skin._SkinList.refresh();\r\n    }\r\n    adsAcquisition(dataSource) {\r\n        let claName = Shop.GoodsClass.Skin;\r\n        let condition = Shop.getGoodsProperty(claName, dataSource.name, Shop.GoodsProperty.condition);\r\n        let resCondition = Shop.getGoodsProperty(claName, dataSource.name, Shop.GoodsProperty.resCondition);\r\n        Shop.setGoodsProperty(claName, dataSource.name, Shop.GoodsProperty.resCondition, resCondition + 1);\r\n        if (condition <= resCondition + 1) {\r\n            Shop.setGoodsProperty(claName, dataSource.name, Shop.GoodsProperty.have, true);\r\n            switch (Skin._SkinTap.selectedIndex) {\r\n                case 0:\r\n                    Skin._currentEye.name = dataSource[Shop.GoodsProperty.name];\r\n                    break;\r\n                case 1:\r\n                    Skin._currentHead.name = dataSource[Shop.GoodsProperty.name];\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        Skin._SkinList.refresh();\r\n    }\r\n    skinTap_Select(index) {\r\n        PalyAudio.playSound();\r\n        switch (index) {\r\n            case 0:\r\n                Skin._SkinList.array = Skin._eyeSkinArr;\r\n                break;\r\n            case 1:\r\n                Skin._SkinList.array = Skin._headSkinArr;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        Skin._SkinList.refresh();\r\n    }\r\n    skinList_Update(cell, index) {\r\n        let dataSource = cell.dataSource;\r\n        let Select = cell.getChildByName('Select');\r\n        Select.visible = false;\r\n        let Pic = cell.getChildByName('Pic');\r\n        Pic.skin = 'UI/Shop/Skin/' + dataSource.name + '.png';\r\n        switch (Skin._SkinTap.selectedIndex) {\r\n            case 0:\r\n                if (cell.dataSource['name'] == Skin._currentEye.name) {\r\n                    Select.visible = true;\r\n                }\r\n                else {\r\n                    Select.visible = false;\r\n                }\r\n                break;\r\n            case 1:\r\n                if (cell.dataSource['name'] == Skin._currentHead.name) {\r\n                    Select.visible = true;\r\n                }\r\n                else {\r\n                    Select.visible = false;\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        let NoHave = cell.getChildByName('NoHave');\r\n        NoHave.visible = true;\r\n        let Board = cell.getChildByName('Board');\r\n        let Dec = NoHave.getChildByName('Dec');\r\n        let Icon = NoHave.getChildByName('Icon');\r\n        if (!cell.dataSource[Shop.GoodsProperty.have]) {\r\n            switch (cell.dataSource[Shop.GoodsProperty.getway]) {\r\n                case Shop.Getway.ads:\r\n                    Dec.text = cell.dataSource[Shop.GoodsProperty.resCondition] + '/' + cell.dataSource[Shop.GoodsProperty.condition];\r\n                    Dec.x = 88;\r\n                    Dec.fontSize = 30;\r\n                    Icon.visible = true;\r\n                    break;\r\n                case Shop.Getway.adsXD:\r\n                    Dec.text = '限定获取';\r\n                    Dec.x = NoHave.width / 2;\r\n                    Dec.fontSize = 23;\r\n                    Icon.visible = false;\r\n                    break;\r\n                case Shop.Getway.easterEgg:\r\n                    Dec.text = '彩蛋获取';\r\n                    Dec.x = NoHave.width / 2;\r\n                    Dec.fontSize = 23;\r\n                    Icon.visible = false;\r\n                    break;\r\n                case Shop.Getway.ineedwin:\r\n                    Dec.text = '过' + cell.dataSource[Shop.GoodsProperty.resCondition] + '/' + cell.dataSource[Shop.GoodsProperty.condition] + '关';\r\n                    Dec.x = NoHave.width / 2;\r\n                    Dec.fontSize = 23;\r\n                    Icon.visible = false;\r\n                    break;\r\n                case Shop.Getway.gold:\r\n                    Dec.text = '金币抽取';\r\n                    Dec.x = NoHave.width / 2;\r\n                    Dec.fontSize = 23;\r\n                    Icon.visible = false;\r\n                    break;\r\n                default:\r\n                    Icon.visible = false;\r\n                    break;\r\n            }\r\n            Board.skin = 'UI/Common/kuang2.png';\r\n        }\r\n        else {\r\n            NoHave.visible = false;\r\n            Board.skin = 'UI/Common/kuang1.png';\r\n        }\r\n    }\r\n    skinOnEnable() {\r\n        Skin._SkinList.array = Skin._eyeSkinArr;\r\n        Skin._SkinList.refresh();\r\n        EventAdmin.notify(GEnum.EventType.cameraMove, [GEnum.TaskType.movePhotoLocation]);\r\n    }\r\n    skinBtnClick() {\r\n        Click.on(Click.Type.largen, this.self['BtnComplete'], this, null, null, this.btnCompleteUp, null);\r\n    }\r\n    btnCompleteUp() {\r\n        Admin._openScene(Admin.SceneName.UIShare, null, this.self);\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/CutHair/Project/CutHair/src/script/Lwg_Template/lwg.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/Game/UIShop.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/TJ/Admanager.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/Lwg_Template/Global.ts"
  ]
}
