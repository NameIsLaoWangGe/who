{
  "code": "import { lwg, Click, Admin, EventAdmin, Gold, Animation2D, Task, Setting, PalyAudio } from \"../Lwg_Template/lwg\";\r\nimport { GEnum } from \"../Lwg_Template/Global\";\r\nimport ADManager, { TaT } from \"../TJ/Admanager\";\r\nimport { Game } from \"../Lwg_Template/Game\";\r\nimport RecordManager from \"../TJ/RecordManager\";\r\nexport default class UIVictory extends lwg.Admin.Scene {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.addOrSub = 'add';\r\n    }\r\n    lwgOnAwake() {\r\n        RecordManager.stopAutoRecord();\r\n    }\r\n    ;\r\n    lwgNodeDec() {\r\n        this.GlodNum = this.self['GlodNum'];\r\n        ADManager.TAPoint(TaT.BtnShow, 'ADrewardbt_success');\r\n        ADManager.TAPoint(TaT.BtnShow, 'closeword_success');\r\n    }\r\n    lwgOnEnable() {\r\n        ADManager.TAPoint(TaT.LevelFinish, 'level' + Game._gameLevel.value);\r\n        this.getGoldNum = 50;\r\n        Gold.goldAppear();\r\n        Setting.setBtnAppear();\r\n        Game._gameLevel.value++;\r\n        PalyAudio.playVictorySound();\r\n        lwg.Effects.createFireworks(Laya.stage, 40, 430, 200);\r\n        lwg.Effects.createFireworks(Laya.stage, 40, 109, 200);\r\n        lwg.Effects.createLeftOrRightJet(Laya.stage, 'right', 40, 720, 300);\r\n        lwg.Effects.createLeftOrRightJet(Laya.stage, 'left', 40, 0, 300);\r\n        EventAdmin.notify(Task.TaskType.victory);\r\n        switch (Game._platform) {\r\n            case Game._platformTpye.OPPO:\r\n                this.self['OPPO'].visible = true;\r\n                this.self['WeChat'].visible = false;\r\n                this.self['Bytedance'].visible = false;\r\n                this.self['P202'].removeSelf();\r\n                this.getGoldDisPlay(1);\r\n                break;\r\n            case Game._platformTpye.WeChat:\r\n                this.self['OPPO'].visible = false;\r\n                this.self['WeChat'].visible = true;\r\n                this.self['Bytedance'].visible = false;\r\n                this.self['BtnAdv_WeChat'].visible = true;\r\n                this.self['BtnNormal_WeChat'].visible = false;\r\n                this.self['Dot_WeChat'].visible = true;\r\n                this.self['P202'].removeSelf();\r\n                this.getGoldDisPlay(10);\r\n                break;\r\n            case Game._platformTpye.Bytedance:\r\n                this.self['OPPO'].visible = false;\r\n                this.self['WeChat'].visible = false;\r\n                this.self['Bytedance'].visible = true;\r\n                this.self['Dot_Bytedance'].visible = true;\r\n                this.getGoldDisPlay(10);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    lwgOpenAni() {\r\n        if (Game._platform == Game._platformTpye.OPPO) {\r\n            this.self['Multiply10'].alpha = 0;\r\n            return;\r\n        }\r\n        this.self['Multiply10'].alpha = 0;\r\n        this.self['GlodNum'].alpha = 0;\r\n        this.self['BtnAdv_WeChat'].alpha = 0;\r\n        this.self['Select'].alpha = 0;\r\n        Animation2D.move_Simple(this.self['Logo'], this.self['Logo'].x, this.self['Logo'].y - 500, this.self['Logo'].x, this.self['Logo'].y, this.aniTime * 5, this.aniDelayde * 0, Laya.Ease.cubicOut, () => {\r\n            Animation2D.scale_Alpha(this.self['Multiply10'], 0, 0, 0, 1, 1, 1, this.aniTime * 3);\r\n            Animation2D.bombs_Appear(this.self['GlodNum'], 0, 1, 1.2, 0, this.aniTime * 2, this.aniTime * 1, this.aniDelayde * 3);\r\n            Animation2D.bombs_Appear(this.self['BtnAdv_WeChat'], 0, 1, 1.2, 0, this.aniTime * 2, this.aniTime * 1, this.aniDelayde * 5);\r\n            Animation2D.fadeOut(this.self['Select'], 0, 1, this.aniTime * 2, this.aniDelayde * 7);\r\n        });\r\n        return 0;\r\n    }\r\n    getGoldDisPlay(number) {\r\n        let Num = this.GlodNum.getChildByName('Num');\r\n        Num.text = (this.getGoldNum * number).toString();\r\n    }\r\n    lwgBtnClick() {\r\n        Click.on(Click.Type.noEffect, this.self['BtnSelect_Wechat'], this, null, null, this.btnSelectUp);\r\n        Click.on(Click.Type.largen, this.self['BtnAdv_WeChat'], this, null, null, this.btnAdvUp);\r\n        Click.on(Click.Type.largen, this.self['BtnNormal_WeChat'], this, null, null, this.btnNormalUp);\r\n        Click.on(Click.Type.largen, this.self['BtnAdv_OPPO'], this, null, null, this.btnAdvUp);\r\n        Click.on(Click.Type.largen, this.self['BtnNormal_OPPO'], this, null, null, this.btnNormalUp);\r\n        Click.on(Click.Type.largen, this.self['BtnNext_Bytedance'], this, null, null, this.btnNext_BytedanceUp);\r\n        Click.on(Click.Type.largen, this.self['BtnSelect_Bytedance'], this, null, null, this.btnSelectUp);\r\n    }\r\n    offClick() {\r\n        Click.off(Click.Type.noEffect, this.self['BtnSelect_Wechat'], this, null, null, this.btnSelectUp);\r\n        Click.off(Click.Type.largen, this.self['BtnAdv_WeChat'], this, null, null, this.btnAdvUp);\r\n        Click.off(Click.Type.largen, this.self['BtnNormal_WeChat'], this, null, null, this.btnNormalUp);\r\n        Click.off(Click.Type.largen, this.self['BtnAdv_OPPO'], this, null, null, this.btnAdvUp);\r\n        Click.off(Click.Type.largen, this.self['BtnNormal_OPPO'], this, null, null, this.btnNormalUp);\r\n        Click.off(Click.Type.largen, this.self['BtnNext_Bytedance'], this, null, null, this.btnNext_BytedanceUp);\r\n        Click.off(Click.Type.largen, this.self['BtnSelect_Bytedance'], this, null, null, this.btnSelectUp);\r\n    }\r\n    btnNext_BytedanceUp() {\r\n        if (this.self['Dot_Bytedance'].visible) {\r\n            this.btnAdvUp();\r\n        }\r\n        else {\r\n            this.btnNormalUp();\r\n        }\r\n    }\r\n    btnSelectUp() {\r\n        let Dot;\r\n        switch (Game._platform) {\r\n            case Game._platformTpye.Bytedance:\r\n                Dot = this.self['Dot_Bytedance'];\r\n                break;\r\n            case Game._platformTpye.WeChat:\r\n                Dot = this.self['Dot_WeChat'];\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        if (Dot.visible) {\r\n            Dot.visible = false;\r\n            this.self['BtnAdv_WeChat'].visible = false;\r\n            this.self['BtnNormal_WeChat'].visible = true;\r\n            this.addOrSub = 'sub';\r\n            let Multiply10 = this.self['Multiply10'];\r\n            Animation2D.scale_Alpha(Multiply10, Multiply10.alpha, Multiply10.scaleX, Multiply10.scaleY, 0, 0, 0, 100);\r\n            let Num = this.GlodNum.getChildByName('Num');\r\n            Laya.timer.loop(30, this, () => {\r\n                if (this.addOrSub == 'sub') {\r\n                    if (Number(Num.text) < this.getGoldNum) {\r\n                        Num.text = (this.getGoldNum).toString();\r\n                        this.addOrSub = null;\r\n                    }\r\n                    else {\r\n                        Num.text = (Number(Num.text) - 30).toString();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            Dot.visible = true;\r\n            this.self['BtnAdv_WeChat'].visible = true;\r\n            this.self['BtnNormal_WeChat'].visible = false;\r\n            this.addOrSub = 'add';\r\n            let Multiply10 = this.self['Multiply10'];\r\n            Animation2D.scale_Alpha(Multiply10, Multiply10.alpha, Multiply10.scaleX, Multiply10.scaleY, 1, 1, 1, 100);\r\n            let Num = this.GlodNum.getChildByName('Num');\r\n            Laya.timer.loop(30, this, () => {\r\n                if (this.addOrSub == 'add') {\r\n                    if (Number(Num.text) > this.getGoldNum * 10) {\r\n                        Num.text = (this.getGoldNum * 10).toString();\r\n                        this.addOrSub = null;\r\n                    }\r\n                    else {\r\n                        Num.text = (Number(Num.text) + 30).toString();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    btnNormalUp() {\r\n        ADManager.TAPoint(TaT.BtnClick, 'ADrewardbt_success');\r\n        this.offClick();\r\n        Gold.getGoldAni_Heap(Laya.stage, 15, 88, 69, 'UI/GameStart/qian.png', new Laya.Point(Laya.stage.width / 2, Laya.stage.height / 2), new Laya.Point(Gold.GoldNode.x - 80, Gold.GoldNode.y), null, () => {\r\n            this.advFunc(1);\r\n        });\r\n    }\r\n    btnAdvUp() {\r\n        ADManager.ShowReward(() => {\r\n            ADManager.TAPoint(TaT.BtnClick, 'closeword_success');\r\n            Gold.getGoldAni_Heap(Laya.stage, 15, 88, 69, 'UI/GameStart/qian.png', new Laya.Point(Laya.stage.width / 2, Laya.stage.height / 2), new Laya.Point(Gold.GoldNode.x - 80, Gold.GoldNode.y), null, () => {\r\n                this.advFunc(10);\r\n            });\r\n        });\r\n    }\r\n    advFunc(number) {\r\n        Gold.addGold(this.getGoldNum * number);\r\n        EventAdmin.notify(EventAdmin.EventType.scene3DRefresh);\r\n        Admin._openScene(Admin.SceneName.UIStart, null, this.self);\r\n    }\r\n    lwgOnDisable() {\r\n        EventAdmin.notify(GEnum.EventType.goBack);\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/CutHair/Project/CutHair/src/script/Lwg_Template/lwg.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/Game/GameMain3D.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/Lwg_Template/Global.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/TJ/Admanager.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/Lwg_Template/Game.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/TJ/RecordManager.ts"
  ]
}
