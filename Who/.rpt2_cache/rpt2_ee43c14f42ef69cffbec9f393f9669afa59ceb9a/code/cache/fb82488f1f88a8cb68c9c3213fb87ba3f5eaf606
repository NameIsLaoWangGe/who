{
  "code": "import { lwg, Admin, Shop, Click, EventAdmin } from \"../Lwg_Template/lwg\";\r\nimport ADManager from \"../TJ/Admanager\";\r\nimport { GEnum, GVariate } from \"../Lwg_Template/Global\";\r\nexport default class UISkinTry extends Admin.Scene {\r\n    lwgOnAwake() {\r\n        this.randomNoHave();\r\n    }\r\n    randomNoHave() {\r\n        let arrOther = Shop.getwayGoldArr(Shop.GoodsClass.Other, undefined, true);\r\n        let arrProp = Shop.getwayGoldArr(Shop.GoodsClass.Props, undefined, true);\r\n        let ele;\r\n        let hair;\r\n        let beard;\r\n        for (let index = 0; index < GVariate._taskArr.length; index++) {\r\n            const element = GVariate._taskArr[index];\r\n            if (element === GEnum.TaskType.HairParent) {\r\n                hair = true;\r\n            }\r\n            else if (element === GEnum.TaskType.LeftBeard || element === GEnum.TaskType.RightBeard || element === GEnum.TaskType.UpLeftBeard || element === GEnum.TaskType.UpRightBeard || element === GEnum.TaskType.MiddleBeard) {\r\n                beard = true;\r\n            }\r\n        }\r\n        if (hair) {\r\n            console.log('本关有剃头任务！');\r\n        }\r\n        if (beard) {\r\n            console.log('本关剃胡须任务！');\r\n        }\r\n        if (hair && beard) {\r\n            if (Math.floor(Math.random() * 2) === 1) {\r\n                this.randomProp();\r\n            }\r\n            else {\r\n                this.randomOther();\r\n            }\r\n        }\r\n        else if (hair && !beard) {\r\n            this.randomProp();\r\n        }\r\n        else if (!hair && beard) {\r\n            this.randomOther();\r\n        }\r\n    }\r\n    randomOther() {\r\n        let ele;\r\n        let arrOther = Shop.getwayGoldArr(Shop.GoodsClass.Other, undefined, true);\r\n        ele = arrOther[Math.floor(Math.random() * arrOther.length)];\r\n        this.self['SkinPic'].skin = 'UI/Shop/Other/' + ele.name + '.png';\r\n        this.beforeTryOtherName = Shop._currentOther.name;\r\n        Shop._currentOther.name = ele.name;\r\n    }\r\n    randomProp() {\r\n        let ele;\r\n        let arrProp = Shop.getwayGoldArr(Shop.GoodsClass.Props, undefined, true);\r\n        ele = arrProp[Math.floor(Math.random() * arrProp.length)];\r\n        this.self['SkinPic'].skin = 'UI/Shop/Props/' + ele.name + '.png';\r\n        this.beforeTryPropName = Shop._currentProp.name;\r\n        Shop._currentProp.name = ele.name;\r\n    }\r\n    lwgBtnClick() {\r\n        Click.on(lwg.Click.Type.largen, this.self['BtnNo'], this, null, null, this.btnNoUp, null);\r\n        Click.on(lwg.Click.Type.largen, this.self['BtnGet'], this, null, null, this.btnGetUp, null);\r\n    }\r\n    btnGetUp(event) {\r\n        ADManager.ShowReward(() => {\r\n            Admin._openScene(Admin.SceneName.UIOperation, null, this.self);\r\n            EventAdmin.notify(GEnum.EventType.changeOther);\r\n            EventAdmin.notify(GEnum.EventType.changeProp);\r\n        });\r\n    }\r\n    btnNoUp(event) {\r\n        if (this.beforeTryOtherName) {\r\n            Shop._currentOther.name = this.beforeTryOtherName;\r\n        }\r\n        if (this.beforeTryPropName) {\r\n            Shop._currentProp.name = this.beforeTryPropName;\r\n        }\r\n        Admin._openScene(Admin.SceneName.UIOperation, null, this.self);\r\n        EventAdmin.notify(GEnum.EventType.changeOther);\r\n        EventAdmin.notify(GEnum.EventType.changeProp);\r\n    }\r\n    lwgOnDisable() {\r\n        if (this.beforeTryOtherName) {\r\n            Shop._currentOther.name = this.beforeTryOtherName;\r\n        }\r\n        if (this.beforeTryPropName) {\r\n            Shop._currentProp.name = this.beforeTryPropName;\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "F:/Work/Game/06_CutHair_2.30/CutHair/src/script/Lwg_Template/lwg.ts",
    "F:/Work/Game/06_CutHair_2.30/CutHair/src/script/TJ/Admanager.ts",
    "F:/Work/Game/06_CutHair_2.30/CutHair/src/script/Lwg_Template/Global.ts"
  ]
}
