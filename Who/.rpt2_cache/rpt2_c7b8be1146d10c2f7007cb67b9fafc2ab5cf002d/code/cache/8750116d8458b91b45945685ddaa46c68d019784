{
  "code": "import { lwg, Click, Admin, Gold, Dialog, Animation2D, Effects } from \"../Lwg_Template/lwg\";\r\nimport { GSene3D } from \"../Lwg_Template/Global\";\r\nimport RecordManager from \"../TJ/RecordManager\";\r\nimport { Game } from \"../Lwg_Template/Game\";\r\nimport ADManager, { TaT } from \"../TJ/Admanager\";\r\nexport default class UIShare extends lwg.Admin.Scene {\r\n    lwgOnAwake() {\r\n        Admin._gameStart = false;\r\n        if (Game._platform !== Game._platformTpye.Bytedance) {\r\n            this.self['BtnClose'].visible = false;\r\n            Laya.timer.once(2000, this, () => {\r\n                this.self['BtnClose'].visible = true;\r\n            });\r\n            this.self['WeChat'].visible = true;\r\n            this.self['Bytedance'].visible = false;\r\n        }\r\n        else {\r\n            this.self['WeChat'].visible = false;\r\n            this.self['Bytedance'].visible = true;\r\n            this.self['BtnClose_Bytedance'].visible = false;\r\n            Laya.timer.frameOnce(180, this, () => {\r\n                this.self['BtnClose_Bytedance'].visible = true;\r\n            });\r\n        }\r\n    }\r\n    lwgOnEnable() {\r\n        ADManager.TAPoint(TaT.BtnShow, 'closeword_share');\r\n        ADManager.TAPoint(TaT.BtnShow, 'sharebt_share');\r\n        this.endPhoto();\r\n        let index;\r\n        if (Game._gameLevel.value > 10) {\r\n            index = Game._gameLevel.value % 10 + 1;\r\n        }\r\n        else {\r\n            index = Game._gameLevel.value;\r\n        }\r\n        let url = 'UI/Share/Photo/' + index + '.png';\r\n        this.self['SmallPhoto'].skin = url;\r\n    }\r\n    lwgOpenAni() {\r\n        this.aniTime = 100;\r\n        this.aniDelayde = 100;\r\n        this.self['SmallFram'].x -= 500;\r\n        this.self['Logo'].y -= 500;\r\n        this.self['BtnShare_Bytedance'].alpha = 0;\r\n        Animation2D.rotate_Scale(this.self['BigFrame'], 45, 0, 0, 600, 1, 1, this.aniTime * 4.5, this.aniDelayde * 1, () => {\r\n            Animation2D.move_Simple_01(this.self['SmallFram'], this.self['SmallFram'].x, this.self['SmallFram'].y, this.self['SmallFram'].x += 500, this.self['SmallFram'].y, this.aniTime * 2, Laya.Ease.cubicOut, this.aniDelayde);\r\n            Animation2D.move_Simple_01(this.self['Logo'], this.self['Logo'].x, this.self['Logo'].y, this.self['Logo'].x, this.self['Logo'].y += 500, this.aniTime * 2, Laya.Ease.cubicOut, this.aniDelayde * 2);\r\n            Animation2D.bombs_Appear(this.self['BtnShare_Bytedance'], 0, 1, 1.2, 0, this.aniTime * 2, this.aniTime * 1, this.aniDelayde * 4, null, () => {\r\n                RecordManager.stopAutoRecord();\r\n            });\r\n            let hotAddNum = Math.floor(Math.random() * 100 + 900);\r\n            Laya.timer.frameLoop(1, this, () => {\r\n                if (Number(this.self['HotNum'].text) < hotAddNum) {\r\n                    this.self['HotNum'].text = Number(this.self['HotNum'].text) + 6;\r\n                }\r\n            });\r\n            Laya.timer.once(this.aniDelayde * 7, this, () => { this.self['Icon_hand'].skin = 'UI/Share/tubiao_1-2.png'; });\r\n            Animation2D.rotate_Scale(this.self['Icon_hand'], -10, 2, 2, 0, 1, 1, this.aniTime * 4, this.aniDelayde * 7);\r\n        });\r\n        Effects.createExplosion_Rotate(this.self['SceneContent'], 40, this.self['SceneContent'].width / 2, this.self['SceneContent'].height / 2 - 100, Effects.SkinStyle.star, 20, 15);\r\n        return this.aniTime * 5;\r\n    }\r\n    endPhoto() {\r\n        this.EndCamera = GSene3D.MainCamera.clone();\r\n        GSene3D.GameMain3D.addChild(this.EndCamera);\r\n        this.EndCamera.transform.position = GSene3D.PhotoCameraMark.transform.position;\r\n        this.EndCamera.transform.localRotationEuler = GSene3D.PhotoCameraMark.transform.localRotationEuler;\r\n        let renderTargetCamera = this.EndCamera.getChildAt(0);\r\n        renderTargetCamera.renderTarget = new Laya.RenderTexture(this.self['BigPhoto'].width, this.self['BigPhoto'].height);\r\n        renderTargetCamera.renderingOrder = -1;\r\n        renderTargetCamera.clearFlag = Laya.BaseCamera.CLEARFLAG_SKY;\r\n        var rtex = new Laya.Texture(renderTargetCamera.renderTarget, Laya.Texture.DEF_UV);\r\n        var sp1 = new Laya.Sprite();\r\n        this.self['BigPhoto'].addChild(sp1);\r\n        sp1.graphics.drawTexture(rtex);\r\n    }\r\n    lwgBtnClick() {\r\n        Click.on(Click.Type.noEffect, this.self['SmallFram'], this, null, null, this.btnShareUp);\r\n        Click.on(Click.Type.noEffect, this.self['BigFrame'], this, null, null, this.btnShareUp);\r\n        Click.on(Click.Type.noEffect, this.self['Background'], this, null, null, this.btnShareUp);\r\n        Click.on(Click.Type.noEffect, this.self['Click1'], this, null, null, this.btnShareUp);\r\n        Click.on(Click.Type.noEffect, this.self['Click2'], this, null, null, this.btnShareUp);\r\n        Click.on(Click.Type.largen, this.self['BtnComplete'], this, null, null, () => {\r\n            this.shareFunc();\r\n        });\r\n        Click.on(Click.Type.largen, this.self['BtnShare_Bytedance'], this, null, null, this.btnShareUp);\r\n        Click.on(Click.Type.largen, this.self['BtnClose_Bytedance'], this, null, null, this.btnNoShareUp);\r\n    }\r\n    btnShareUp() {\r\n        console.log('分享！');\r\n        RecordManager._share('award', () => {\r\n            this.shareFunc();\r\n            Dialog.createHint_Middle(Dialog.HintContent[\"分享成功，获得50金币！\"]);\r\n            Gold.addGold(50);\r\n            ADManager.TAPoint(TaT.BtnClick, 'sharebt_share');\r\n        });\r\n    }\r\n    btnNoShareUp() {\r\n        ADManager.TAPoint(TaT.BtnClick, 'closeword_share');\r\n        this.shareFunc();\r\n    }\r\n    shareFunc() {\r\n        Admin._openScene(Admin.SceneName.UIVictoryBox, null, this.self);\r\n    }\r\n    lwgOnDisable() {\r\n        this.EndCamera.removeSelf();\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/CutHair/Project/CutHair/src/script/Lwg_Template/lwg.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/Game/GameMain3D.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/Lwg_Template/Global.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/TJ/RecordManager.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/Lwg_Template/Game.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/TJ/Admanager.ts"
  ]
}
