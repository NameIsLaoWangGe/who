{
  "code": "import { VictoryScene, Admin, Gold, PalyAudio, Effects, EventAdmin, Click, Dialog, Backpack, Tools } from \"../Frame/lwg\";\r\nimport ADManager, { TaT } from \"../../TJ/Admanager\";\r\nimport RecordManager from \"../../TJ/RecordManager\";\r\nexport default class UIVictory extends VictoryScene {\r\n    lwgOnAwake() {\r\n        ADManager.TAPoint(TaT.BtnShow, 'UIVictory_Three');\r\n        Tools.node_2DShowExcludedChild(this.self['Platform'], [Admin._platform]);\r\n        if (Admin._gameLevel.value % 4 == 0) {\r\n            Backpack._trophy.num += 50;\r\n        }\r\n        else {\r\n            Backpack._trophy.num += 5;\r\n        }\r\n        Admin._gameLevel.value++;\r\n    }\r\n    lwgOnEnable() {\r\n        PalyAudio.playVictorySound();\r\n        Effects.createFireworks(Laya.stage, 40, 430, 200);\r\n        Effects.createFireworks(Laya.stage, 40, 109, 200);\r\n        Effects.createLeftOrRightJet(Laya.stage, 'right', 40, 720, 300);\r\n        Effects.createLeftOrRightJet(Laya.stage, 'left', 40, 0, 300);\r\n        let Num1 = this.self['GlodNum'].getChildByName('Num');\r\n        Num1.text = '+' + 100;\r\n        Gold.GoldNode = this.self['GoldNode'];\r\n        let Num2 = this.self['GoldNode'].getChildByName('Num');\r\n        Num2.text = Gold._num.value.toString();\r\n        let time = 0;\r\n        Laya.timer.frameLoop(8, this, () => {\r\n            time++;\r\n            if (time % 2 == 0) {\r\n                this.self['Tag'].skin = 'Game/UI/UIVictory/dajia.png';\r\n            }\r\n            else {\r\n                this.self['Tag'].skin = 'Game/UI/UIVictory/qipao.png';\r\n            }\r\n        });\r\n    }\r\n    lwgBtnClick() {\r\n        let Dot;\r\n        if (Admin._platform = Admin._platformTpye.Bytedance) {\r\n            Dot = this.var('Bytedance_Dot');\r\n        }\r\n        else if (Admin._platform = Admin._platformTpye.WeChat) {\r\n            Dot = this.var('WeChat_Dot');\r\n        }\r\n        var generalAward = (number) => {\r\n            Admin._clickLock.switch = true;\r\n            Gold.getGoldAni_Heap(Laya.stage, 15, 88, 69, 'Game/UI/Common/jinbi.png', new Laya.Point(Laya.stage.width / 2, Laya.stage.height / 2), new Laya.Point(Gold.GoldNode.x - 80, Gold.GoldNode.y), null, () => {\r\n                Gold.addGold(number);\r\n                Admin._openScene(Admin.SceneName.UIStart, this.self);\r\n                Admin._clickLock.switch = false;\r\n            });\r\n        };\r\n        var moreAwards = () => {\r\n            ADManager.ShowReward(() => {\r\n                ADManager.TAPoint(TaT.BtnClick, 'UIVictory_Three');\r\n                generalAward(300);\r\n            });\r\n        };\r\n        Click.on(Click.Type.largen, this.self['Bytedance_BtnNext'], this, null, null, () => {\r\n            if (Dot.visible) {\r\n                moreAwards();\r\n            }\r\n            else {\r\n                generalAward(100);\r\n            }\r\n        });\r\n        Click.on(Click.Type.largen, this.self['Bytedance_BtnShare'], this, null, null, () => {\r\n            RecordManager._share('noAward', () => {\r\n                Dialog.createHint_Middle(Dialog.HintContent[\"分享成功!\"]);\r\n            });\r\n        });\r\n        Click.on(Click.Type.noEffect, this.self['Bytedance_BtnSelect'], this, null, null, () => {\r\n            if (Dot.visible) {\r\n                Dot.visible = false;\r\n            }\r\n            else {\r\n                Dot.visible = true;\r\n            }\r\n        });\r\n        Click.on(Click.Type.largen, this.self['OPPO_BtnMore'], this, null, null, () => {\r\n            moreAwards();\r\n        });\r\n        Click.on(Click.Type.largen, this.self['OPPO_BtnNext'], this, null, null, () => {\r\n            generalAward(100);\r\n        });\r\n        Click.on(Click.Type.largen, this.self['WeChat_BtnGeneral'], this, null, null, () => {\r\n            moreAwards();\r\n        });\r\n        Click.on(Click.Type.largen, this.self['WeChat_BtnMore'], this, null, null, () => {\r\n            generalAward(100);\r\n        });\r\n        Click.on(Click.Type.largen, this.self['Wechat_BtnSelect'], this, null, null, () => {\r\n            if (Dot.visible) {\r\n                this.var('WeChat_BtnMulti').visible = false;\r\n                this.var('WeChat_BtnNormal').visible = true;\r\n                Dot.visible = false;\r\n            }\r\n            else {\r\n                this.var('WeChat_BtnMulti').visible = true;\r\n                this.var('WeChat_BtnNormal').visible = false;\r\n                Dot.visible = true;\r\n            }\r\n        });\r\n    }\r\n    lwgOnDisable() {\r\n        EventAdmin.notify(EventAdmin.EventType.nextCustoms);\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/Who/Project/Who/src/script/Frame/lwg.ts",
    "D:/Game/project/Who/Project/Who/src/TJ/Admanager.ts",
    "D:/Game/project/Who/Project/Who/src/TJ/RecordManager.ts"
  ]
}
