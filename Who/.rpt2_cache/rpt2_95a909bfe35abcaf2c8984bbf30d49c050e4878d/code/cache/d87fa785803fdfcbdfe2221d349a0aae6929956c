{
  "code": "import { Admin, EventAdmin, Tools, Animation2D, TimerAdmin } from \"./lwg\";\r\nexport var Guide;\r\n(function (Guide) {\r\n    Guide._complete = {\r\n        get bool() {\r\n            if (Laya.LocalStorage.getItem('Guide_complete')) {\r\n                if (Number(Laya.LocalStorage.getItem('Guide_complete')) == 0) {\r\n                    return false;\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        },\r\n        set bool(bol) {\r\n            if (bol == true) {\r\n                bol = 1;\r\n            }\r\n            Laya.LocalStorage.setItem('Guide_complete', bol.toString());\r\n        }\r\n    };\r\n    Guide._whichStepNum = 1;\r\n    let EventType;\r\n    (function (EventType) {\r\n        EventType[\"next\"] = \"Guide_next\";\r\n        EventType[\"hint\"] = \"Guide_hint\";\r\n        EventType[\"appear\"] = \"Guide_appear\";\r\n        EventType[\"start\"] = \"Guide_start\";\r\n        EventType[\"close\"] = \"Guide_close\";\r\n    })(EventType = Guide.EventType || (Guide.EventType = {}));\r\n    class GuideScene extends Admin.Scene {\r\n    }\r\n    Guide.GuideScene = GuideScene;\r\n})(Guide || (Guide = {}));\r\nexport default class UIGuide extends Guide.GuideScene {\r\n    lwgOnEnable() {\r\n        this.self['Background'].alpha = 0;\r\n        this.self['Hand'].alpha = 0;\r\n        EventAdmin.notify(Guide.EventType.next);\r\n        this.self[\"Draw\"].on(Laya.Event.LABEL, this, (labal) => {\r\n            if (labal === 'start') {\r\n                let DrawCanvas = this.self['Hand'].getChildByName('DrawCanvas');\r\n                if (!DrawCanvas) {\r\n                    let DrawCanvas = new Laya.Sprite();\r\n                    DrawCanvas.name = 'DrawCanvas';\r\n                    this.self['Hand'].addChild(DrawCanvas);\r\n                    this.self['Handpic'].pos(0, 0);\r\n                    this.self['Handpic'].pivotX = 0;\r\n                    this.self['Handpic'].pivotY = 0;\r\n                    this['drawLinePos'] = new Laya.Point(this.self['Handpic'].x, this.self['Handpic'].y);\r\n                }\r\n            }\r\n            else if (labal === 'end') {\r\n                let DrawCanvas = this.self['Hand'].getChildByName('DrawCanvas');\r\n                if (this.self['Hand'].getChildByName('DrawCanvas')) {\r\n                    this['drawLinePos'] == false;\r\n                    DrawCanvas.removeSelf();\r\n                }\r\n            }\r\n        });\r\n        TimerAdmin.frameLoop(1, this, () => {\r\n            let DrawCanvas = this.self['Hand'].getChildByName('DrawCanvas');\r\n            if (DrawCanvas) {\r\n                if (this['drawLinePos']) {\r\n                    DrawCanvas.graphics.drawLine(this['drawLinePos'].x, this['drawLinePos'].y, this.self['Handpic'].x, this.self['Handpic'].y, \"#000000\", 8);\r\n                    DrawCanvas.graphics.drawCircle(this.self['Handpic'].x, this.self['Handpic'].y, 4, \"#000000\");\r\n                    this['drawLinePos'] = new Laya.Point(this.self['Handpic'].x, this.self['Handpic'].y);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    lwgEventReg() {\r\n        var step1 = () => {\r\n            this.self[\"Draw\"].play(0, true);\r\n            EventAdmin.notify(Guide.EventType.appear);\r\n            this.self['Hand'].pos(198, 523);\r\n            Tools.Draw.reverseRoundMask(this.self['Background'], 360, 598, 350, true);\r\n        };\r\n        var step2 = () => {\r\n            EventAdmin.notify(Guide.EventType.appear);\r\n            this.self['Hand'].pos(360, 1161);\r\n            this.self[\"Click\"].play(0, true);\r\n            Tools.Draw.reverseRoundrectMask(this.self['Background'], 360, 1161, 320, 150, 40, true);\r\n        };\r\n        var step3 = () => {\r\n            step1();\r\n        };\r\n        var step4 = () => {\r\n            step2();\r\n        };\r\n        var step5 = () => {\r\n            EventAdmin.notify(Guide.EventType.appear);\r\n            this.self['Hand'].pos(75, 102);\r\n            this.self[\"Click\"].play(0, true);\r\n            Tools.Draw.reverseRoundMask(this.self['Background'], 68, 102, 60);\r\n        };\r\n        var step6 = () => {\r\n            EventAdmin.notify(Guide.EventType.appear);\r\n            this.self['Hand'].pos(656, 758);\r\n            this.self[\"Click\"].play(0, true);\r\n            Tools.Draw.reverseRoundrectMask(this.self['Background'], 360, Laya.stage.height * 0.779, 380, 160, 20, true);\r\n        };\r\n        var step7 = () => {\r\n            step5();\r\n        };\r\n        var step8 = () => {\r\n            EventAdmin.notify(Guide.EventType.appear);\r\n            this.self['Hand'].pos(656, 758);\r\n            this.self[\"Click\"].play(0, true);\r\n            Tools.Draw.reverseRoundrectMask(this.self['Background'], 656, 758, 130, 150, 20, true);\r\n        };\r\n        EventAdmin.reg(Guide.EventType.next, this, () => {\r\n            Laya.timer.once(500, this, () => {\r\n                console.log('新手引导到了第：', Guide._whichStepNum + '步了');\r\n                switch (Guide._whichStepNum) {\r\n                    case 1:\r\n                        step1();\r\n                        break;\r\n                    case 2:\r\n                        step2();\r\n                        break;\r\n                    case 3:\r\n                        step3();\r\n                        break;\r\n                    case 4:\r\n                        step4();\r\n                        break;\r\n                    case 5:\r\n                        step5();\r\n                        break;\r\n                    case 6:\r\n                        step6();\r\n                        break;\r\n                    case 7:\r\n                        step7();\r\n                        break;\r\n                    case 7:\r\n                        step8();\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                Guide._whichStepNum++;\r\n            });\r\n        });\r\n        EventAdmin.reg(Guide.EventType.appear, this, () => {\r\n            Animation2D.fadeOut(this.self['Hand'], 0, 1, 300);\r\n            Animation2D.fadeOut(this.self['Background'], 0, 0.5, 300);\r\n        });\r\n        EventAdmin.reg(Guide.EventType.hint, this, () => {\r\n            let DrawCanvas = this.self['Hand'].getChildByName('DrawCanvas');\r\n            if (this.self['Hand'].getChildByName('DrawCanvas')) {\r\n                this['drawLinePos'] == false;\r\n                DrawCanvas.removeSelf();\r\n            }\r\n            Animation2D.fadeOut(this.self['Hand'], 1, 0, 300);\r\n            Animation2D.fadeOut(this.self['Background'], 0.5, 0, 300, 0, () => {\r\n                this.self[\"Draw\"].stop();\r\n                this.self[\"Click\"].stop();\r\n            });\r\n        });\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/Who/Project/Who/src/script/Frame/lwg.ts"
  ]
}
