!function(){"use strict";class e extends Laya.Script{constructor(){super(...arguments),this.target=null}onClick(){this.target.active=this.target.visible=!0}}class t extends Laya.Script{constructor(){super(...arguments),this.time=.1,this.ratio=1.04,this.startScaleX=1,this.startScaleY=1,this.scaled=!1}onAwake(){this.owner.on(Laya.Event.MOUSE_DOWN,null,()=>{this.ScaleBig()}),this.owner.on(Laya.Event.MOUSE_UP,null,()=>{this.ScaleSmall()}),this.owner.on(Laya.Event.MOUSE_OUT,null,()=>{this.ScaleSmall()})}ScaleBig(){this.scaled||(this.scaled=!0,Laya.Tween.to(this.owner,{scaleX:this.startScaleX*this.ratio,scaleY:this.startScaleY*this.ratio},1e3*this.time))}ScaleSmall(){this.scaled&&(this.scaled=!1,Laya.Tween.to(this.owner,{scaleX:this.startScaleX,scaleY:this.startScaleY},1e3*this.time))}}class a extends Laya.Script{constructor(){super(...arguments),this.bgImage=null,this.iconImage=null,this.nameText=null,this.infoText=null,this.flag1=null,this.flag2=null,this.flag3=null}onAwake(){this.bgImage=this.owner.getChildByName("bg"),this.iconImage=this.owner.getChildByName("icon"),null!=this.iconImage&&(this.flag1=this.iconImage.getChildByName("flag1"),this.flag2=this.iconImage.getChildByName("flag2"),this.flag3=this.iconImage.getChildByName("flag3")),this.nameText=this.owner.getChildByName("name"),this.infoText=this.owner.getChildByName("info")}DoLoad(){null!=this.data&&(null!=this.iconImage&&(this.iconImage.skin=this.data.icon),null!=this.nameText&&(this.nameText.text=this.data.title),this.SetFlag())}SetFlag(){switch(null!=this.flag1&&(this.flag1.active=this.flag1.visible=!1),null!=this.flag2&&(this.flag2.active=this.flag2.visible=!1),null!=this.flag3&&(this.flag3.active=this.flag3.visible=!1),this.data.tag){case 1:null!=this.flag1&&(this.flag1.active=this.flag1.visible=!0);break;case 2:null!=this.flag2&&(this.flag2.active=this.flag2.visible=!0);break;case 3:null!=this.flag3&&(this.flag3.active=this.flag3.visible=!0)}}OnShow(){this.data.ReportShow()}OnClick(){this.data.Click(),null!=this.onClick_&&this.onClick_(this)}onClick(){this.OnClick()}}function __awaiter(e,t,a,n){return new(a||(a=Promise))(function(i,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new a(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})}class n extends Laya.Script{constructor(){super(...arguments),this.isAwake=!1,this.isStart=!1,this.isEnable=!1,this.isDestroy=!1}OnAwake(){}OnStart(){}OnUpdate(){}OnEnable(){}OnDisable(){}OnDestroy(){}DoAwake(){this.active&&(this.isAwake||(this.isAwake=!0,this.OnAwake()))}DoStart(){this.active&&(this.isStart||(this.isStart=!0,this.OnStart()))}DoUpdate(){this.active&&this.isStart&&this.OnUpdate()}DoEnable(){this.active&&(this.isEnable||(this.isEnable=!0,this.OnEnable()))}DoDisable(){this.isEnable&&(this.isEnable=!1,this.OnDisable())}DoDestroy(){this.isDestroy||(this.isDestroy=!0,this.OnDestroy())}onAwake(){this.DoAwake()}onStart(){this.DoAwake(),this.DoStart()}onUpdate(){this.DoAwake(),this.DoEnable(),this.DoStart(),this.DoUpdate()}onEnable(){this.DoAwake(),this.DoEnable(),this.DoStart()}onDisable(){this.DoDisable()}onDestroy(){this.DoDestroy()}static SetActive(e,t){null!=e&&(e.active=t,e instanceof Laya.Box&&(e.visible=t))}static GetActive(e){return null!=e&&(!!e.active&&!(e instanceof Laya.Box&&!e.visible))}get active(){return n.GetActive(this.owner)}set active(e){n.SetActive(this.owner,e),e?this.DoEnable():this.DoDisable()}}class i extends n{constructor(){super(...arguments),this.promoItem=null,this.shake=!1,this.animTime=0,this.refrTime=0}OnAwake(){return __awaiter(this,void 0,void 0,function*(){if(this.promoItem=this.owner.getComponent(a),TJ.Develop.Yun.Promo.Data.ReportAwake(i.style),this.promoItem.style=i.style,this.active=!1,!Laya.Browser.onIOS||TJ.API.AppInfo.Channel()!=TJ.Define.Channel.AppRt.ZJTD_AppRt){if(null==i.promoList){let e=yield TJ.Develop.Yun.Promo.List.Get(i.style);null==i.promoList&&(i.promoList=e)}i.promoList.count>0?(TJ.Develop.Yun.Promo.Data.ReportStart(i.style),this.active=!0):this.owner.destroy()}})}OnEnable(){this.LoadAndShowIcon()}OnDisable(){null!=i.promoList&&i.promoList.Unload(this.promoItem.data)}OnUpdate(){let e=Laya.timer.delta/1e3;this.refrTime+=e,this.refrTime>5&&(this.refrTime-=5,this.LoadAndShowIcon()),this.shake&&(this.animTime+=e,this.animTime%=2.5,this.animTime<=.75?this.promoItem.owner.rotation=25*Math.sin(6*this.animTime*Math.PI)*(1-this.animTime/.75):this.promoItem.owner.rotation=0)}LoadIcon(){let e=i.promoList.Load();return null!=e&&(i.promoList.Unload(this.promoItem.data),this.promoItem.data=e,this.promoItem.onClick_=(()=>{this.LoadAndShowIcon()}),this.promoItem.DoLoad()),e}LoadAndShowIcon(){null!=this.LoadIcon()?this.promoItem.OnShow():null==this.promoItem.data&&this.owner.destroy()}}i.style="P201",i.promoList=null;class o extends n{constructor(){super(...arguments),this.promoList=null,this.itemList=[],this.scroll=null,this.layout=null,this.prefab=null,this.paddingTop=10,this.paddingBottom=10,this.line=0,this.column=0,this.toTop=!1,this.showing=[]}OnAwake(){return __awaiter(this,void 0,void 0,function*(){this.scroll=this.owner.getChildByName("scroll"),this.layout=this.scroll.getChildByName("layout"),this.prefab=this.layout.getCell(0);let e=this.owner.width-this.paddingTop-this.paddingBottom;for(;e>=this.prefab.width;)e=e-this.prefab.width-this.layout.spaceX,this.column++;if(TJ.Develop.Yun.Promo.Data.ReportAwake(o.style),this.active=!1,!Laya.Browser.onIOS||TJ.API.AppInfo.Channel()!=TJ.Define.Channel.AppRt.ZJTD_AppRt)if(this.promoList=yield TJ.Develop.Yun.Promo.List.Get(o.style),this.promoList.count>0){TJ.Develop.Yun.Promo.Data.ReportStart(o.style),this.line=Math.ceil(this.promoList.count/this.column),this.layout.repeatX=this.column,this.layout.repeatY=this.line;for(let e=0;e<this.layout.cells.length;e++){let t=this.layout.getCell(e);if(e<this.promoList.count){let e=t.getComponent(a);null!=e&&(this.itemList.push(e),e.style=o.style),n.SetActive(t,!0)}else n.SetActive(t,!1)}this.line=Math.ceil(this.itemList.length/this.column);let e=this.paddingTop+this.paddingBottom;e+=this.prefab.height*this.line+this.layout.spaceY*(this.line-1),this.layout.height=e,this.scroll.height<this.layout.height&&(this.scroll.vScrollBarSkin="",this.scroll.vScrollBar.rollRatio=0);for(let e of this.itemList)this.LoadIcon(e);this.active=!0}else this.owner.destroy()})}OnDisable(){return __awaiter(this,void 0,void 0,function*(){this.promoList=yield TJ.Develop.Yun.Promo.List.Get(o.style);for(let e of this.itemList)this.LoadIcon(e)})}get maxTop(){return 0}get maxBottom(){let e=this.paddingTop+this.paddingBottom;return e+=this.prefab.height*this.line+this.layout.spaceY*(this.line-1)-this.scroll.height}get scrollValue(){return null!=this.scroll.vScrollBar?this.scroll.vScrollBar.value:0}set scrollValue(e){null!=this.scroll.vScrollBar&&(this.scroll.vScrollBar.value=e)}OnUpdate(){let e=Laya.timer.delta/1e3;this.scroll.height<this.layout.height?(this.scrollValue<=this.maxTop?this.toTop=!1:this.scrollValue>=this.maxBottom&&(this.toTop=!0),this.toTop?this.scrollValue-=50*e:this.scrollValue+=50*e):this.scrollValue=this.maxTop,this.CheckShow()}LoadIcon(e){let t=this.promoList.Load();return null!=t&&(this.promoList.Unload(e.data),e.data=t,e.onClick_=(e=>{this.LoadAndShowIcon(e)}),e.DoLoad(),e.infoText.text=1+Math.floor(40*Math.random())/10+"w人在玩"),t}LoadAndShowIcon(e){null!=this.LoadIcon(e)&&e.OnShow()}CheckShow(){for(let e of this.itemList){let t=this.showing.indexOf(e),a=e.owner;Math.abs(-a.y-this.paddingTop-this.prefab.height/2+this.scrollValue+this.scroll.height/2)<this.scroll.height/2?t<0&&(this.showing.push(e),e.OnShow()):t>=0&&this.showing.splice(t,1)}}}o.style="P202";class l extends n{constructor(){super(...arguments),this.promoList=null,this.itemList=[],this.scroll=null,this.layout=null,this.prefab=null,this.paddingLeft=20,this.paddingRight=20,this.toLeft=!1,this.showing=[]}OnAwake(){return __awaiter(this,void 0,void 0,function*(){if(this.scroll=this.owner.getChildByName("scroll"),this.layout=this.scroll.getChildByName("layout"),this.prefab=this.layout.getCell(0),TJ.Develop.Yun.Promo.Data.ReportAwake(l.style),this.active=!1,Laya.Browser.onIOS&&TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt)return;let e=yield TJ.Develop.Yun.Promo.List.Get(l.style);if(null==this.promoList&&(this.promoList=e),this.promoList.count>0){TJ.Develop.Yun.Promo.Data.ReportStart(l.style),this.layout.repeatX=this.promoList.count;for(let e=0;e<this.layout.cells.length;e++){let t=this.layout.getCell(e);if(e<this.promoList.count){let e=t.getComponent(a);null!=e&&(this.itemList.push(e),e.style=l.style),t.active=t.visible=!0}else t.active=t.visible=!1}let e=this.paddingLeft+this.paddingRight;e+=this.prefab.width*this.itemList.length+this.layout.spaceX*(this.itemList.length-1),this.layout.width=e,this.scroll.width<this.layout.width&&(this.scroll.hScrollBarSkin="",this.scroll.hScrollBar.rollRatio=0),this.layout.width=e;for(let e of this.itemList)this.LoadIcon(e);this.active=!0}else this.owner.destroy()})}get maxLeft(){return 0}get maxRight(){return this.scroll.hScrollBar.max}get scrollValue(){return null!=this.scroll.hScrollBar?this.scroll.hScrollBar.value:0}set scrollValue(e){null!=this.scroll.hScrollBar&&(this.scroll.hScrollBar.value=e)}OnUpdate(){let e=Laya.timer.delta/1e3;this.scroll.width<this.layout.width?(this.scrollValue>=this.maxRight?this.toLeft=!0:this.scrollValue<=this.maxLeft&&(this.toLeft=!1),this.toLeft?this.scrollValue-=50*e:this.scrollValue+=50*e):this.layout.x=this.maxLeft,this.CheckShow()}LoadIcon(e){let t=this.promoList.Load();if(null!=t){this.promoList.Unload(e.data),e.data=t,e.onClick_=(e=>{this.LoadIcon(e)}),e.DoLoad();let a=this.showing.indexOf(e);a>=0&&this.showing.splice(a,1)}return t}CheckShow(){for(let e of this.itemList){let t=e.owner,a=Math.abs(t.x-this.scrollValue-this.scroll.width/2+t.width/2+this.layout.spaceX),n=this.showing.indexOf(e);a<this.scroll.width/2?n<0&&(this.showing.push(e),e.OnShow()):n>=0&&this.showing.splice(n,1)}}}l.style="P204";class s extends n{constructor(){super(...arguments),this.promoList=null,this.itemList=[],this.scroll=null,this.layout=null,this.prefab=null,this.paddingTop=10,this.paddingBottom=10,this.move=null,this.show=null,this.hide=null,this.maxX=620,this.line=0,this.column=0,this.targetX=0,this.showing=[]}OnAwake(){return __awaiter(this,void 0,void 0,function*(){this.move=this.owner.getChildByName("move");let e=this.move.getChildByName("button");this.show=e.getChildByName("show"),this.hide=e.getChildByName("hide");let t=this.move.getChildByName("board");this.scroll=t.getChildByName("scroll"),this.layout=this.scroll.getChildByName("layout"),this.prefab=this.layout.getCell(0),this.show.clickHandler=new Laya.Handler(null,()=>{this.Show()}),this.hide.clickHandler=new Laya.Handler(null,()=>{this.Hide()});let n=this.scroll.width-this.paddingTop-this.paddingBottom;for(;n>=this.prefab.width;)n=n-this.prefab.width-this.layout.spaceX,this.column++;if(TJ.Develop.Yun.Promo.Data.ReportAwake(s.style),this.show.parent.scaleX<0&&(this.maxX=-this.maxX),TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt)return Laya.Browser.onIOS&&TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt?void(this.active=!1):void 0;if(this.promoList=yield TJ.Develop.Yun.Promo.List.Get(s.style),this.promoList.count>0){TJ.Develop.Yun.Promo.Data.ReportStart(s.style),this.line=Math.ceil(this.promoList.count/this.column),this.layout.repeatX=this.column,this.layout.repeatY=this.line;for(let e=0;e<this.layout.cells.length;e++){let t=this.layout.getCell(e);if(e<this.promoList.count){let e=t.getComponent(a);null!=e&&(this.itemList.push(e),e.style=s.style),t.active=t.visible=!0}else t.active=t.visible=!1}this.line=Math.ceil(this.itemList.length/this.column);let e=this.paddingTop+this.paddingBottom;e+=this.prefab.height*this.line+this.layout.spaceY*(this.line-1),this.layout.height=e,this.scroll.height<this.layout.height&&(this.scroll.vScrollBarSkin="",this.scroll.vScrollBar.rollRatio=0);for(let e of this.itemList)this.LoadIcon(e);this.active=!0}else this.owner.destroy()})}get scrollValue(){return null!=this.scroll.vScrollBar?this.scroll.vScrollBar.value:0}set scrollValue(e){null!=this.scroll.vScrollBar&&(this.scroll.vScrollBar.value=e)}LoadIcon(e){let t=this.promoList.Load();return null!=t&&(this.promoList.Unload(e.data),e.data=t,e.onClick_=(e=>{this.LoadAndShowIcon(e)}),e.DoLoad()),t}LoadAndShowIcon(e){null!=this.LoadIcon(e)&&e.OnShow()}Show(){if(TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt){let e=new TJ.API.Promo.Param;return e.extraData={TJ_App:TJ.API.AppInfo.AppGuid()},void TJ.API.Promo.Pop(e)}this.targetX=this.maxX,this.show.active=this.show.visible=!1,this.hide.active=this.hide.visible=!0,this.scrollValue=0}Hide(){this.targetX=0,this.showing=[]}OnUpdate(){let e=Laya.timer.delta/1e3;if(this.move.centerX!=this.targetX){let t=this.targetX-this.move.centerX,a=3e3*e;t=t>0?Math.min(this.move.centerX+a,this.targetX):Math.max(this.move.centerX-a,this.targetX),this.move.centerX=t,0==this.move.centerX&&(this.show.active=this.show.visible=!0,this.hide.active=this.hide.visible=!1,window.setTimeout(()=>__awaiter(this,void 0,void 0,function*(){this.promoList=yield TJ.Develop.Yun.Promo.List.Get(s.style);for(let e of this.itemList)this.LoadIcon(e)}),0))}else this.move.centerX==this.maxX&&this.CheckShow()}CheckShow(){for(let e of this.itemList){let t=this.showing.indexOf(e),a=e.owner;Math.abs(-a.y-this.paddingTop-this.prefab.height/2+this.scrollValue+this.scroll.height/2)<this.scroll.height/2?t<0&&(this.showing.push(e),e.OnShow()):t>=0&&this.showing.splice(t,1)}}}s.style="P205";class r extends n{constructor(){super(...arguments),this.promoList=null,this.itemList=[],this.layout=null,this.showing=[]}OnAwake(){return __awaiter(this,void 0,void 0,function*(){if(this.scrollView=this.owner.getChildByName("scroll"),this.layout=this.scrollView.getChildByName("layout"),this.scrollView.vScrollBarSkin="",this.owner.getChildByName("close").clickHandler=new Laya.Handler(null,()=>{this.OnClose()}),TJ.Develop.Yun.Promo.Data.ReportAwake(r.style),this.active=!1,Laya.Browser.onIOS&&TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt)return;let e=yield TJ.Develop.Yun.Promo.List.Get(r.style);if(null==this.promoList&&(this.promoList=e),this.promoList.count>0){TJ.Develop.Yun.Promo.Data.ReportStart(r.style),this.layout.repeatY=this.promoList.count;let e=0;for(let t=0;t<this.layout.cells.length;t++){let i=this.layout.getCell(t);if(t<this.promoList.count){let e=i.getComponent(a);null!=e&&(this.itemList.push(e),e.style=r.style),n.SetActive(i,!0)}else n.SetActive(i,!1);t>0&&(e+=this.layout.spaceY),e+=i.height}this.layout.height=e;for(let e of this.itemList)this.LoadIcon(e);this.active=!0}else this.owner.destroy()})}OnEnable(){this.scrollValue=0}OnDisable(){return __awaiter(this,void 0,void 0,function*(){this.promoList=yield TJ.Develop.Yun.Promo.List.Get(r.style);for(let e of this.itemList)this.LoadIcon(e)})}OnUpdate(){this.CheckShow()}LoadIcon(e){let t=this.promoList.Load();if(null!=t){this.promoList.Unload(e.data),e.data=t,e.onClick_=(e=>{this.LoadIcon(e)}),e.DoLoad();let a=this.showing.indexOf(e);a>=0&&this.showing.splice(a,1)}return t}get scrollValue(){return null!=this.scrollView.vScrollBar?this.scrollView.vScrollBar.value:0}set scrollValue(e){null!=this.scrollView.vScrollBar&&(this.scrollView.vScrollBar.value=e)}CheckShow(){for(let e of this.itemList){let t=e.owner,a=Math.abs(t.y-this.scrollValue-this.scrollView.height/2+t.height/2+this.layout.spaceY),n=this.showing.indexOf(e);a<this.scrollView.height/2?n<0&&(this.showing.push(e),e.OnShow()):n>=0&&this.showing.splice(n,1)}}OnClose(){let e=this.owner;e.active=e.visible=!1}}var h,c,d;r.style="P106",function(e){e.Scene3D=class extends Laya.Script3D{constructor(){super(),this.mainCameraFpos=new Laya.Vector3}onAwake(){this.self=this.owner,this.calssName=this.__proto__.constructor.name,this.MainCamera=this.self.getChildByName("Main Camera"),this.MainCamera&&(this.mainCameraFpos.x=this.MainCamera.transform.localPositionX,this.mainCameraFpos.y=this.MainCamera.transform.localPositionY,this.mainCameraFpos.z=this.MainCamera.transform.localPositionZ),this.lwgOnAwake(),this.lwgNodeDec(),this.lwgAdaptive()}lwgOnAwake(){}onEnable(){this.self[this.calssName]=this,this.lwgEventReg(),this.lwgOnEnable(),this.lwgBtnClick(),this.lwgAdaptive(),this.lwgOpenAni()}lwgNodeDec(){}lwgEventReg(){}lwgOnEnable(){}lwgBtnClick(){}lwgAdaptive(){}lwgOpenAni(){}lwgVanishAni(){}onUpdate(){this.lwgOnUpDate()}lwgOnUpDate(){}onDisable(){this.lwgOnDisable(),Laya.timer.clearAll(this),Laya.Tween.clearAll(this),p.offCaller(this)}lwgOnDisable(){}};e.Object3D=class extends Laya.Script3D{constructor(){super()}onAwake(){this.self=this.owner,this.selfTransform=this.self.transform,this.selfScene=this.self.scene;let e=this.__proto__.constructor.name;this.self[e]=this,this.rig3D=this.self.getComponent(Laya.Rigidbody3D),this.BoxCol3D=this.self.getComponent(Laya.PhysicsCollider),this.lwgNodeDec()}lwgNodeDec(){}onEnable(){this.lwgEventReg(),this.lwgOnEnable()}lwgOnEnable(){}lwgBtnClick(){}lwgEventReg(){}onUpdate(){this.lwgOnUpdate()}lwgOnUpdate(){}onDisable(){this.lwgOnDisable(),Laya.Tween.clearAll(this),Laya.timer.clearAll(this),p.offCaller(this)}lwgOnDisable(){}}}(h||(h={}));class u{constructor(){this.GRV=null,this.isRecordVideoing=!1,this.isVideoRecord=!1,this.videoRecordTimer=0,this.isHasVideoRecord=!1}static Init(){u.grv=new TJ.Platform.AppRt.DevKit.TT.GameRecorderVideo}static startAutoRecord(){TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt&&(null==u.grv&&u.Init(),u.recording||(u.autoRecording=!0,console.log("******************开始录屏"),u._start(),u.lastRecordTime=Date.now()))}static stopAutoRecord(){if(TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt)return u.autoRecording?(u.autoRecording=!1,u._end(!1),Date.now()-u.lastRecordTime>6e3||(!(Date.now()-u.lastRecordTime<3e3)||(console.log("小于3秒"),!1))):(console.log("RecordManager.autoRecording",u.autoRecording),!1)}static startRecord(){TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt&&(u.autoRecording&&this.stopAutoRecord(),u.recording=!0,u._start(),u.lastRecordTime=Date.now())}static stopRecord(){if(TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt)return console.log("time:"+(Date.now()-u.lastRecordTime)),!(Date.now()-u.lastRecordTime<=3e3)&&(u.recording=!1,u._end(!0),!0)}static _start(){TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt&&(console.log("******************180s  ？？？？？"),u.grv.Start(180))}static _end(e){TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt&&(console.log("******************180结束 ？？？？？"),u.grv.Stop(e))}static _share(e,t,a=null,n=null){if(TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt)if(console.log("******************吊起分享 ？？？？？",u.grv,u.grv.videoPath),u.grv.videoPath){let a=new TJ.Platform.AppRt.Extern.TT.ShareAppMessageParam;a.extra.videoTopics=["比谁猜的快","番茄小游戏","抖音小游戏"],a.channel="video",a.success=(()=>{w.createHint_Middle(w.HintContent["分享成功!"]),t()}),a.fail=(()=>{"noAward"===e?w.createHint_Middle(w.HintContent["分享成功后才能获取奖励！"]):w.createHint_Middle(w.HintContent["分享失败！"]),n()}),u.grv.Share(a)}else w.createHint_Middle(w.HintContent["暂无视频，玩一局游戏之后分享！"])}}u.recording=!1,u.autoRecording=!1,function(e){let t,a,n,i,o,l,s,r,c;function getCardObjByNameArr(t){let a=[],i=A.objArray_Copy(e.CardData);for(let e=0;e<i.length;e++)for(let o=0;o<t.length;o++)i[e][n.name]==t[o]&&a.push(i[e]);return a}function set16InitialCards(a){let i,o;if(a==t.MyCardParent){i=getCardObjByNameArr(M._haveCardArray.arr);let t=A.objArray_Copy(i);o=A.arrayRandomGetOut(t,16),e.oppositeHandName=A.arrayRandomGetOut(A.objArray_Copy(o),1)[0][n.name]}else if(a==t.OppositeCardParent){let t=A.objArray_Copy(e.CardData);o=A.arrayRandomGetOut(t,16),e.myHandName=A.arrayRandomGetOut(A.objArray_Copy(o),1)[0][n.name],console.log(o,e.myHandName)}let l=e.AllCardGray.clone(),s=-.26;for(let i=0;i<o.length;i++){const r=l.getChildByName(o[i][n.name]);a==t.MyCardParent?(e.MyCardParent.addChild(r),i%4==0&&(s-=.45),r.transform.localPosition=new Laya.Vector3(i%4*.3055-.204,-.1210217,s),A.d3_animatorPlay(r,c.standMe)):a==t.OppositeCardParent&&(e.OppositeCardParent.addChild(r),i%4==0&&(s+=.45),r.transform.localPosition=new Laya.Vector3(i%4*.3055-.204,-.1210217,s+.2),A.d3_animatorPlay(r,c.standOpposite)),r[n.featureArr]=o[i][n.featureArr],r[n.fall]=!1}}function getFeatureWeights(t){let i=[];for(let t=0;t<e.featureData.length;t++){let n=e.featureData[t][a.index];i.push({index:n,value:0})}for(let e=0;e<t.numChildren;e++){let a=t.getChildAt(e);if(!a[n.fall]){const e=a[n.featureArr];for(let t=0;t<e.length;t++){i[e[t]-1].value++}}}for(let e=0;e<i.length;e++){0==i[e].value&&(i.splice(e,1),e--)}return A.objArrPropertySort(i,"value"),i}function setAnswerForMe(){let t=getFeatureWeights(e.MyCardParent),n=getNotFallCardNameForMe().length,i=[];if(1==n)return["是谁？"];if(2==n)return["是谁？"];{let n=[],o=Math.floor(t.length/2),l=t[o].index,s=t[o+1].index,r=t[o-1].index,h=t[o+(A.randomOneHalf()?-2:2)].index;n.push(l,s,r,h);for(let t=0;t<e.featureData.length;t++)for(let o=0;o<n.length;o++)e.featureData[t][a.index]==n[o]&&i.push(e.featureData[t][a.question]);return i}}function setAnswerForOpposite(){let t,n=[],i=getFeatureWeights(e.OppositeCardParent),o=getNotFallCardNameOpposite(),l=Math.floor(i.length/2);if(1==o.length)n=[t="是他吗?",!0];else if(2==o.length){let a=A.randomOneHalf();getChNameByName(o[a]);n=[t="是他吗?",o[a]==e.myHandName,o[a]]}else{let s;for(let o=0;o<e.featureData.length;o++)if(e.featureData[o][a.index]==i[l].index){t=e.featureData[o][a.question],s=o,n=[t,checkAnswerForHand(t,e.OppositeCardParent)];break}let r=getCardHaveFeature(e.OppositeCardParent,s,!0);if(o.length==r.length+1){let t=getTowCardNotFeatureArr(r[0],r[1]),a=getQuestionByIndex(A.arrayRandomGetOut(t,1)[0]);n=[a,checkAnswerForHand(a,e.OppositeCardParent)]}}return n}function getTowCardNotFeatureArr(e,t){let a=A.array1ExcludeArray2(e[n.featureArr],t[n.featureArr]),i=A.array1ExcludeArray2(t[n.featureArr],e[n.featureArr]);return A.arrayAddToarray(a,i)}function getNotFallCard(t){let a=[];for(let i=0;i<t.numChildren;i++){let t=e.MyCardParent.getChildAt(i);t[n.fall]||a.push(t)}return a}function getNotFallCardNameForMe(){let t=[];for(let a=0;a<e.MyCardParent.numChildren;a++){let i=e.MyCardParent.getChildAt(a);i[n.fall]||t.push(i.name)}return t}function getNotFallCardNameOpposite(t){let a=[];for(let i=0;i<e.OppositeCardParent.numChildren;i++){let o=e.OppositeCardParent.getChildAt(i);t?o[n.fall]||o[n.name]===e.myHandName||a.push(o.name):o[n.fall]||a.push(o.name)}return a}function getChNameByName(t){let a;for(let i=0;i<e.CardData.length;i++)if(t==e.CardData[i][n.name]){a=e.CardData[i][n.ChName];break}return a}function getQuestionByIndex(t){let n;for(let i=0;i<e.featureData.length;i++)if(t===e.featureData[i][a.index])return n=e.featureData[i][a.question]}function getCardHaveFeature(t,a,i){let o;o=getNotFallCard(t);let l=[];for(let t=0;t<o.length;t++){const s=o[t];for(let r=0;r<s[n.featureArr].length;r++)if(i){if(s.name==e.myHandName||s.name==e.oppositeHandName){console.log("排除手上的答案");break}if(a==s[n.featureArr][r]){l.push(o[t]);break}}}return l}function checkQuestion(t,i){let o;for(let n=0;n<e.featureData.length;n++)t==e.featureData[n][a.question]&&(o=e.featureData[n][a.index]);let l=[],s=[];for(let e=0;e<i.numChildren;e++){let t,a=i.getChildAt(e);if(!a[n.fall]){for(let e=0;e<a[n.featureArr].length;e++)if(o==a[n.featureArr][e]){l.push(a.name),t=!0;break}t||s.push(a.name)}}return[l,s]}function checkAnswerForHand(t,a){let n,i=!1,o=checkQuestion(t,a)[0];a==e.MyCardParent?n=e.oppositeHandName:a==e.OppositeCardParent&&(n=e.myHandName);for(let e=0;e<o.length;e++)o[e]==n&&(i=!0);return i}e.questionArr=[],e.featureData=[],e.CardData=[],function(e){e.OppositeCardParent="OppositeCardParent",e.MyCardParent="MyCardParent"}(t=e.WhichScard||(e.WhichScard={})),function(e){e.index="index",e.describe="describe",e.question="question"}(a=e.featureProperty||(e.featureProperty={})),function(e){e.featureArr="featureArr",e.ChName="ChName",e.name="name",e.fall="fall",e.quality="quality",e.price="price",e.repetition="repetition"}(n=e.CardProperty||(e.CardProperty={})),function(e){e.R="R",e.SR="SR",e.SSR="SSR",e.UR="UR"}(i=e.Quality||(e.Quality={})),function(e){e.me="me",e.opposite="opposite",e.stop="stop"}(o=e.WhichBoutType||(e.WhichBoutType={})),function(e){e.judgeMeAnswer="judgeMeAnswer",e.judgeOppositeAnswer="judgeOppositeAnswer",e.judgeMeClickCard="judgeMeClickCard",e.nextRound="nextRound",e.meAnswer="meAnswer",e.oppositeAnswer="oppositeAnswer",e.winOrLose="winOrLose",e.opening="opening",e.hideOption="hideOption",e.hideGuessCard="hideGuessCard",e.doWell="doWell",e.BtnSC="BtnSC",e.BtnSX="BtnSX",e.openUICard="openUICard",e.closeUICard="closeUICard",e.UICardBuy="UICardBuy",e.UICardMove="UICardMove",e.closeGameScene="closeGameScene"}(l=e.EventType||(e.EventType={})),function(e){e.Girl="Girl"}(s=e.RoleName||(e.RoleName={})),function(e){e.chaofeng="chaofeng",e.daiji="daiji",e.fouren="fouren",e.qupai="qupai",e.tiwen="tiwen",e.zhuhe="zhuhe",e.queding="queding",e.zhuhetingliu="zhuhetingliu"}(r=e.RoleAniName||(e.RoleAniName={})),function(e){e.standMe="standMe",e.fallMe="fallMe",e.standOpposite="standOpposite",e.fallOpposite="fallOpposite",e.blinkMe="blinkMe",e.blinkOpposite="blinkOpposite",e.clickMe="clickMe",e.flop="flop"}(c=e.CardAni||(e.CardAni={})),e.getAllCardName=function(){let t=[];for(let a=0;a<e.CardData.length;a++)t.push(e.CardData[a][n.name]);return t},e.getCardObjByQuality=function(t){let a=[],i=A.objArray_Copy(e.CardData);for(let e=0;e<i.length;e++)i[e][n.quality]==t&&a.push(i[e]);return a},e.getQualityObjArrByNameArr=function(t,a){let i=[],o=A.objArray_Copy(e.CardData);for(let e=0;e<o.length;e++)for(let l=0;l<t.length;l++)o[e][n.name]==t[l]&&o[e][n.quality]==a&&i.push(o[e]);return i},e.getCardObjByNameArr=getCardObjByNameArr,e.getNameArrByObjArr=function(e){let t=[];for(let a=0;a<e.length;a++)t.push(e[a][n.name]);return t},e.set16InitialCards=set16InitialCards,e.getFeatureWeights=getFeatureWeights,e.setAnswerForMe=setAnswerForMe,e.setRefrashAnswerForMe=function(){let t=getNotFallCard(e.MyCardParent),i=[];if(1==t.length)return["是谁？"];if(2==t.length)return["是谁？"];{let o=A.arrayRandomGetOut(t,4),l=A.array_ExcludeArrays([o[0][n.featureArr],o[1][n.featureArr],o[2][n.featureArr],o[3][n.featureArr]],!0),s=A.arrayRandomGetOut(l,l.length),r=[s[0],s[1],s[2],s[3]];for(let t=0;t<e.featureData.length;t++)for(let n=0;n<r.length;n++)e.featureData[t][a.index]==r[n]&&i.push(e.featureData[t][a.question]);return i}},e.setAnswerForOpposite=setAnswerForOpposite,e.getTowCardNotFeatureArr=getTowCardNotFeatureArr,e.getNotFallCard=getNotFallCard,e.getNotFallCardNameForMe=getNotFallCardNameForMe,e.getNotFallCardNameOpposite=getNotFallCardNameOpposite,e.getQualityName=function(t){let a;for(let i=0;i<e.CardData.length;i++)if(t==e.CardData[i][n.name]){a=e.CardData[i][n.quality];break}return a},e.getChNameByName=getChNameByName,e.getNameByChName=function(t){let a;for(let i=0;i<e.CardData.length;i++)if(t==e.CardData[i][n.ChName]){a=e.CardData[i][n.name];break}return a},e.getFeatureArrByName=function(t){let a;for(let i=0;i<e.CardData.length;i++)if(t==e.CardData[i][n.name]){a=e.CardData[i][n.ChName];break}return a},e.getNameArrByQuestion=function(t){let i;for(let n=0;n<e.featureData.length;n++)if(t==e.featureData[n][a.question]){i=e.featureData[n][a.index];break}let o=[];for(let t=0;t<e.CardData.length;t++){const a=e.CardData[t];for(let e=0;e<a[n.featureArr].length;e++)if(i==a[n.featureArr][e]){o.push(a[n.name]);break}}return o},e.getNameArrByFeature=function(t){let i;for(let t=0;t<e.featureData.length;t++)if(e.featureData[t]){i=e.featureData[t][a.index];break}let o=[];for(let t=0;t<e.CardData.length;t++){const a=e.CardData[t];for(let e=0;e<a[n.featureArr].length;e++)if(i==a[n.featureArr][e]){o.push(a[n.name]);break}}return o},e.getIndexByFeature=function(t){let n;for(let i=0;i<e.featureData.length;i++)if(t===e.featureData[i][a.describe])return n=i},e.getQuestionByIndex=getQuestionByIndex,e.getCardHaveFeature=getCardHaveFeature,e.getCardNotHaveFeature=function(t,a,i){let o;o=getNotFallCard(t);let l=[];for(let t=0;t<o.length;t++){const s=o[t];let r;for(let t=0;t<s[n.featureArr].length;t++)if(i){if(s.name==e.myHandName||s.name==e.oppositeHandName)break;a==s[n.featureArr][t]&&(r=!0)}r&&l.push(o[t])}return l},e.checkQuestion=checkQuestion,e.checkAnswerForHand=checkAnswerForHand,e.dataInit=function(){e.featureData=Laya.loader.getRes("GameData/Game/Feature.json").RECORDS,e.CardData=Laya.loader.getRes("GameData/Game/Card.json").RECORDS};e.MainScene=class extends h.Scene3D{lwgOnAwake(){e.Scene3D=this.self,e.MainCamera=this.self.getChildByName("MainCamera"),e.OppositeRoleParent=this.self.getChildByName("OppositeRoleParent"),e.MyCardParent=this.self.getChildByName("MyCardParent"),e.OppositeCardParent=this.self.getChildByName("OppositeCardParent"),e.AllCardGray=this.self.getChildByName("AllCardGray"),e.CardContainer=Laya.loader.getRes(P.list_3DPrefab[0]),this.self.addChild(e.CardContainer),e.CardContainerPos=new Laya.Vector3(e.CardContainer.transform.localPositionX,e.CardContainer.transform.localPositionY,e.CardContainer.transform.localPositionZ),e.CardContainer.active=!1,e.AllCardColours=e.CardContainer.getChildByName("AllCardColours"),e.PerspectiveMe=this.self.getChildByName("PerspectiveMe"),e.PerspectiveOPPosite=this.self.getChildByName("PerspectiveOPPosite"),e.PerspectiveAwait=this.self.getChildByName("PerspectiveAwait"),e.PerspectiveUICard=this.self.getChildByName("PerspectiveUICard"),e.MainCamera.transform.position=e.PerspectiveAwait.transform.position,e.MainCamera.transform.localRotationEuler=e.PerspectiveAwait.transform.localRotationEuler}lwgOnEnable(){}lwgEventReg(){p.reg(l.opening,this,()=>{u.startAutoRecord(),this.init(),k.moveRotateTo(e.MainCamera,e.PerspectiveOPPosite,3*t,this,null,()=>{Laya.timer.once(2*t,this,()=>{A.d3_animatorPlay(e.OppositeRole,r.chaofeng),Laya.timer.once(4*t,this,()=>{A.d3_animatorPlay(e.OppositeRole,r.daiji),this.roundChange(),p.notify(l.nextRound)})})})});let t=500;p.reg(l.nextRound,this,()=>{e.whichBout==o.me?k.moveRotateTo(e.MainCamera,e.PerspectiveMe,t,this,null,()=>{p.notify(l.meAnswer,[setAnswerForMe()])}):e.whichBout==o.opposite&&k.moveRotateTo(e.MainCamera,e.PerspectiveOPPosite,t,this,null,()=>{p.notify(l.oppositeAnswer,[setAnswerForOpposite(),e.myHandName])})}),p.reg(l.judgeMeAnswer,this,a=>{if(e.whichBout!==o.me)return;this.roundChange();let n=checkAnswerForHand(a,e.MyCardParent),i=checkQuestion(a,e.MyCardParent);k.moveRotateTo(e.MainCamera,e.PerspectiveOPPosite,t,this,null,()=>{n?(console.log("我回答正确"),A.d3_animatorPlay(e.OppositeRole,r.queding),Laya.timer.once(4*t,this,()=>{A.d3_animatorPlay(e.OppositeRole,r.daiji),k.moveRotateTo(e.MainCamera,e.PerspectiveMe,t,this,null,()=>{Laya.timer.once(1.5*t,this,()=>{this.carFallAni(i[1],e.MyCardParent),Laya.timer.once(4*t,this,()=>{p.notify(l.nextRound)})})})})):(console.log("我回答错误"),A.d3_animatorPlay(e.OppositeRole,r.fouren),Laya.timer.once(4*t,this,()=>{A.d3_animatorPlay(e.OppositeRole,r.daiji),k.moveRotateTo(e.MainCamera,e.PerspectiveMe,t,this,null,()=>{Laya.timer.once(1.5*t,this,()=>{this.carFallAni(i[0],e.MyCardParent),Laya.timer.once(4*t,this,()=>{p.notify(l.nextRound)})})})}))})}),p.reg(l.judgeMeClickCard,this,a=>{a[n.fall]||e.whichBout===o.me&&a.parent==e.MyCardParent&&(A.d3_animatorPlay(a,c.clickMe),this.roundChange(),a.name==e.oppositeHandName?k.moveRotateTo(e.MainCamera,e.PerspectiveOPPosite,t,this,null,()=>{console.log("我方赢了！"),A.d3_animatorPlay(e.OppositeRole,r.zhuhetingliu),Laya.timer.once(3*t,this,()=>{this.carFallAni([e.oppositeHandName],e.MyCardParent,!0),Laya.timer.once(4*t,this,()=>{p.notify(p.EventType.victory)})})}):k.moveRotateTo(e.MainCamera,e.PerspectiveOPPosite,t,this,null,()=>{console.log("我选错了！"),A.d3_animatorPlay(e.OppositeRole,r.fouren),Laya.timer.once(4*t,this,()=>{k.moveRotateTo(e.MainCamera,e.PerspectiveMe,t,this,null,()=>{A.d3_animatorPlay(e.OppositeRole,r.daiji),Laya.timer.once(1.5*t,this,()=>{this.carFallAni([a.name],e.MyCardParent),Laya.timer.once(4*t,this,()=>{p.notify(l.nextRound)})})})})}))}),p.reg(l.judgeOppositeAnswer,this,(a,n)=>{if(e.whichBout!==o.opposite)return;this.roundChange();let i=checkQuestion(a,e.OppositeCardParent),s=getNotFallCardNameOpposite().length;n?(console.log("对方回答正确"),k.rock(e.MainCamera,new Laya.Vector3(5,0,0),t,this,()=>{p.notify(e.EventType.hideGuessCard),Laya.timer.once(2.5*t,this,()=>{if(2==s){console.log("对方只剩下2张牌，并且回答正确了，我方输了~！"),_.playSound("Game/Voice/chaofeng.wav"),A.d3_animatorPlay(e.OppositeRole,r.chaofeng);let a=getNotFallCardNameOpposite(!0)[0];console.log("即将倒下的牌是",a),Laya.timer.once(3*t,this,()=>{this.carFallAni([a],e.OppositeCardParent,!0),Laya.timer.once(3*t,this,()=>{p.notify(p.EventType.defeated)})})}else 1==s?(A.d3_animatorPlay(e.OppositeRole,r.chaofeng),Laya.timer.once(3*t,this,()=>{A.d3_animatorPlay(e.OppositeRole,r.daiji),p.notify(p.EventType.defeated)})):(A.d3_animatorPlay(e.OppositeRole,r.qupai),Laya.timer.once(3*t,this,()=>{A.d3_animatorPlay(e.OppositeRole,r.daiji),this.carFallAni(i[1],e.OppositeCardParent),Laya.timer.once(3*t,this,()=>{p.notify(l.nextRound)})}))})})):(console.log("对方回答错误"),k.rock(e.MainCamera,new Laya.Vector3(0,5,0),t,this,()=>{p.notify(e.EventType.hideGuessCard,[()=>{A.d3_animatorPlay(e.OppositeRole,r.qupai)}]),Laya.timer.once(3*t,this,()=>{if(2==s){let a=getNotFallCardNameOpposite(!0)[0];console.log("对方只剩下2张牌了，错误的卡牌倒下"+a+"，但是回答错了，我们还有一次机会~！"),Laya.timer.once(1*t,this,()=>{this.carFallAni([a],e.OppositeCardParent),Laya.timer.once(3*t,this,()=>{p.notify(l.nextRound)})})}else console.log("对方回答错误，倒下的牌将会是：",i[0]),Laya.timer.once(1*t,this,()=>{this.carFallAni(i[0],e.OppositeCardParent),Laya.timer.once(3*t,this,()=>{p.notify(l.nextRound)})})})}))}),p.reg(l.BtnSC,this,a=>{let n=checkAnswerForHand(a,e.MyCardParent),i=checkQuestion(a,e.MyCardParent);n?(console.log("我回答正确"),Laya.timer.once(2*t,this,()=>{this.carFallAni(i[1],e.MyCardParent)})):(console.log("我回答错误"),Laya.timer.once(2*t,this,()=>{this.carFallAni(i[0],e.MyCardParent)}))}),p.reg(p.EventType.nextCustoms,this,()=>{k.moveRotateTo(e.MainCamera,e.PerspectiveAwait,1500,this)}),p.reg(l.openUICard,this,()=>{e.CardContainer.active=!0,e.CardContainer.transform.localPosition=e.CardContainerPos;for(let t=0;t<e.AllCardColours.numChildren;t++){const a=e.AllCardColours.getChildAt(t);A.d3_animatorPlay(a,c.fallMe)}k.moveRotateTo(e.MainCamera,e.PerspectiveUICard,1500,this,null,()=>{k.moveTo(e.MainCamera,new Laya.Vector3(e.PerspectiveUICard.transform.localPositionX,e.PerspectiveUICard.transform.localPositionY,e.PerspectiveUICard.transform.localPositionZ+3),3e3,this);let t=[];for(let a=0;a<M._haveCardArray.arr.length;a++){let n=e.AllCardColours.getChildByName(M._haveCardArray.arr[a]),i={name:n.name,x:n.transform.localPositionX};t.push(i)}let a=A.objArrPropertySort(t,"x");for(let t=0;t<a.length;t++){let n=e.AllCardColours.getChildByName(a[t].name);Laya.timer.once(60*t,this,()=>{A.d3_animatorPlay(n,c.flop)})}e.OppositeRoleParent.active=!1})}),p.reg(l.closeUICard,this,()=>{e.OppositeRoleParent.active=!0,k.moveRotateTo(e.MainCamera,e.PerspectiveAwait,1500,this,null,()=>{e.CardContainer.active=!1})}),p.reg(l.UICardMove,this,t=>{"add"==t?e.CardContainer.transform.localPositionZ<e.CardContainerPos.z+3&&(e.CardContainer.transform.localPositionZ+=.04):"sub"==t&&e.CardContainer.transform.localPositionZ>e.CardContainerPos.z&&(e.CardContainer.transform.localPositionZ-=.04)}),p.reg(l.UICardBuy,this,t=>{let a=A.arrayRandomGetOut(t)[0],i=e.AllCardColours.getChildByName(a[n.name]),o=i.transform.position.z-e.MainCamera.transform.position.z;k.moveTo(e.CardContainer,new Laya.Vector3(e.CardContainer.transform.position.x,e.CardContainer.transform.position.y,e.CardContainer.transform.position.z-o),1e3,this,null,()=>{A.d3_animatorPlay(i,c.flop),M._haveCardArray.add([i.name])})})}roundChange(){switch(e.whichBout){case o.stop:e.whichBout=o.me;break;case o.me:p.notify(l.hideOption),e.whichBout=o.opposite;break;case o.opposite:e.whichBout=o.me}}carFallAni(t,a,i){let o=0;var s=t=>{a==e.MyCardParent?(A.d3_animatorPlay(t,c.blinkMe),Laya.timer.once(600,this,()=>{A.d3_animatorPlay(t,c.fallMe)})):(A.d3_animatorPlay(t,c.blinkOpposite),Laya.timer.once(600,this,()=>{A.d3_animatorPlay(t,c.fallOpposite)}))};if(i){let e=[];for(let t=0;t<a.numChildren;t++){const i=a.getChildAt(t);i[n.fall]||e.push(i.name)}let i=A.array1ExcludeArray2(e,t);for(let e=0;e<i.length;e++){o++;let t=a.getChildByName(i[e]);t[n.fall]=!0,s(t)}}else for(let e=0;e<t.length;e++){let i=a.getChildByName(t[e]);i[n.fall]||(o++,i[n.fall]=!0,s(i))}Laya.timer.once(400,this,()=>{o>=4&&a==e.MyCardParent&&(_.playSound("Game/Voice/kuazan.wav"),p.notify(l.doWell))})}init(){e.AllCardGray.active=!0,e.whichBout=o.stop,A.node_RemoveAllChildren(e.MyCardParent),A.node_RemoveAllChildren(e.OppositeCardParent),set16InitialCards(t.MyCardParent),set16InitialCards(t.OppositeCardParent),this.changeOpppsiteRole(),A.d3_animatorPlay(e.OppositeRole,r.daiji),e.AllCardGray.active=!1,console.log(e.myHandName)}changeOpppsiteRole(){e.OppositeRole=e.OppositeRoleParent.getChildByName("Girl");let t=A.node_3dFindChild(e.OppositeRole,"CardMarked"),a=e.MyCardParent.getChildByName(e.oppositeHandName).meshRenderer.material;t.meshRenderer.material=a}}}(c||(c={})),function(e){let t,a,n,i,o,l,s,r,h,d,u,f,p,y,g,m,_,S,L,C,w,v,k,A,P,T,b,B,O,I,D,N,x,E;!function(t){function btnPauseUp(t){t.stopPropagation(),t.currentTarget.scale(1,1),e.Admin._openScene("UIPause",null,null,null)}t._createBtnPause=function(e){let a;Laya.loader.load("prefab/BtnPause.json",Laya.Handler.create(this,function(n){let i=new Laya.Prefab;i.json=n,a=Laya.Pool.getItemByCreateFun("prefab",i.create,i),e.addChild(a),a.pos(645,167),a.zOrder=0,t.BtnPauseNode=a,t.BtnPauseNode.name="BtnPauseNode",p.on(p.Type.largen,a,null,null,null,btnPauseUp,null)}))},t.btnPauseUp=btnPauseUp}(t=e.Pause||(e.Pause={})),function(e){e._createP201_01=function(e){let t;Laya.loader.load("prefab/P201.json",Laya.Handler.create(this,function(a){let n=new Laya.Prefab;n.json=a,t=Laya.Pool.getItemByCreateFun("P201",n.create,n),e.addChild(t),t.pos(80,290),t.zOrder=65}))}}(a=e.Elect||(e.Elect={})),function(e){let t,a,n,i,o;function getDialogContent_Random(e){let t=[],a=getUseWhere(e),n=Math.floor(Math.random()*a.length);for(const e in a[n])if(a[n].hasOwnProperty(e)){const i=a[n][e];"content"==e.substring(0,7)&&"-1"!==i&&t.push(i)}return t}function getUseWhere(t){let a=[];for(let n=0;n<e._dialogContent.Array.length;n++){const i=e._dialogContent.Array[n];i.useWhere==t&&a.push(i)}return a}!function(e){e[e["金币不够了！"]=0]="金币不够了！",e[e["没有可以购买的皮肤了！"]=1]="没有可以购买的皮肤了！",e[e["暂时没有广告，过会儿再试试吧！"]=2]="暂时没有广告，过会儿再试试吧！",e[e["暂无皮肤!"]=3]="暂无皮肤!",e[e["暂无分享!"]=4]="暂无分享!",e[e["暂无提示机会!"]=5]="暂无提示机会!",e[e["观看完整广告才能获取奖励哦！"]=6]="观看完整广告才能获取奖励哦！",e[e["通关上一关才能解锁本关！"]=7]="通关上一关才能解锁本关！",e[e["分享成功后才能获取奖励！"]=8]="分享成功后才能获取奖励！",e[e["分享成功!"]=9]="分享成功!",e[e["暂无视频，玩一局游戏之后分享！"]=10]="暂无视频，玩一局游戏之后分享！",e[e["消耗2点体力！"]=11]="消耗2点体力！",e[e["今日体力福利已领取！"]=12]="今日体力福利已领取！",e[e["分享成功，获得125金币！"]=13]="分享成功，获得125金币！",e[e["分享成功，获得50金币！"]=14]="分享成功，获得50金币！",e[e["限定皮肤已经获得，请前往皮肤界面查看。"]=15]="限定皮肤已经获得，请前往皮肤界面查看。",e[e["分享失败！"]=16]="分享失败！",e[e["兑换码错误！"]=17]="兑换码错误！",e[e["尚未获得该商品!"]=18]="尚未获得该商品!",e[e["恭喜获得新皮肤!"]=19]="恭喜获得新皮肤!",e[e["请前往皮肤限定界面获取!"]=20]="请前往皮肤限定界面获取!",e[e["通过相应的关卡数达到就可以得到了!"]=21]="通过相应的关卡数达到就可以得到了!",e[e["点击金币抽奖按钮购买!"]=22]="点击金币抽奖按钮购买!",e[e["没有领取次数了！"]=23]="没有领取次数了！",e[e["增加三次开启宝箱次数！"]=24]="增加三次开启宝箱次数！",e[e["观看广告可以获得三次开宝箱次数！"]=25]="观看广告可以获得三次开宝箱次数！",e[e["没有宝箱领可以领了！"]=26]="没有宝箱领可以领了！",e[e["请前往皮肤界面购买！"]=27]="请前往皮肤界面购买！",e[e["今天已经签到过了！"]=28]="今天已经签到过了！",e[e["没有抽奖次数了，请通过观看广告获取！"]=29]="没有抽奖次数了，请通过观看广告获取！",e[e["没有库存了！"]=30]="没有库存了！",e[e["牌数太少，无法使用道具！"]=31]="牌数太少，无法使用道具！",e[e["没有可以购买的卡牌了！"]=32]="没有可以购买的卡牌了！",e[e["敬请期待!"]=33]="敬请期待!"}(t=e.HintContent||(e.HintContent={})),function(e){e.blackBord="Frame/UI/ui_orthogon_black.png"}(a||(a={})),e.createHint_Middle=function(e){let n=Laya.Pool.getItemByClass("Hint_M",Laya.Sprite);n.name="Hint_M",Laya.stage.addChild(n),n.width=Laya.stage.width,n.height=100,n.pivotY=n.height/2,n.pivotX=Laya.stage.width/2,n.x=Laya.stage.width/2,n.y=Laya.stage.height/2,n.zOrder=100;let i=new Laya.Image;n.addChild(i),i.skin=a.blackBord,i.width=Laya.stage.width,i.pivotX=Laya.stage.width/2,i.height=100,i.pivotY=i.height/2,i.y=n.height/2,i.x=Laya.stage.width/2,i.alpha=.6;let o=new Laya.Label;n.addChild(o),o.width=Laya.stage.width,o.text=t[e],o.pivotX=Laya.stage.width/2,o.x=Laya.stage.width/2,o.height=100,o.pivotY=50,o.y=n.height/2,o.bold=!0,o.fontSize=35,o.color="#ffffff",o.align="center",o.valign="middle",o.alpha=0,g.scale_Alpha(n,0,1,0,1,1,1,200,0,e=>{g.fadeOut(o,0,1,150,0,e=>{g.fadeOut(o,1,0,200,800,e=>{g.scale_Alpha(n,1,1,1,1,0,0,200,0,e=>{n.removeSelf()})})})})},e._dialogContent={get Array(){return null!==Laya.loader.getRes("GameData/Dialog/Dialog.json").RECORDS?Laya.loader.getRes("GameData/Dialog/Dialog.json").RECORDS:[]}},e.getDialogContent=function(t,a){let n;for(let i=0;i<e._dialogContent.Array.length;i++){const o=e._dialogContent.Array[i];if(o.useWhere==t&&o.name==a){n=o;break}}let i=[];for(const e in n)if(n.hasOwnProperty(e)){const t=n[e];"content"!=e.substring(0,7)&&-1===t||i.push(t)}return i},e.getDialogContent_Random=getDialogContent_Random,e.getUseWhere=getUseWhere,function(e){e.scene1="scene1",e.scene2="scene2",e.scene3="scene3"}(n=e.UseWhere||(e.UseWhere={})),function(e){e.name="name",e.useWhere="useWhere",e.content="content",e.max="max"}(i=e.DialogProperty||(e.DialogProperty={})),function(e){e.voluntarily="voluntarily",e.manual="manual",e.clickContent="clickContent"}(o=e.PlayMode||(e.PlayMode={})),e.createVoluntarilyDialogue=function(t,a,n,i,o,l,s){null==i&&(i=0),Laya.timer.once(i,this,()=>{let i;Laya.loader.load("Prefab/Dialogue_Common.json",Laya.Handler.create(this,function(r){let h=new Laya.Prefab;h.json=r,i=Laya.Pool.getItemByCreateFun("Pre_Dialogue",h.create,h),l?l.addChild(i):Laya.stage.addChild(i),i.x=t,i.y=a;let c,d=i.getChildByName("Content");void 0!==s?d.text=s[0]:(c=getDialogContent_Random(n),d.text=c[0]),i.zOrder=100,null==o&&(o=1e3),g.scale_Alpha(i,0,0,0,1,1,1,150,1e3,()=>{for(let e=0;e<c.length;e++)Laya.timer.once(e*o,this,()=>{d.text=c[e],e==c.length-1&&Laya.timer.once(o,this,()=>{g.scale_Alpha(i,1,1,1,0,0,0,150,1e3,()=>{i.removeSelf()})})})}),e.DialogueNode=i}))})},e.createCommonDialog=function(e,t,a,n){let i;Laya.loader.load("Prefab/Dialogue_Common.json",Laya.Handler.create(this,function(o){let l=new Laya.Prefab;l.json=o,i=Laya.Pool.getItemByCreateFun("Dialogue_Common",l.create,l),e.addChild(i),i.pos(t,a),i.getChildByName("Dialogue_Common").text=n}))}}(n=e.Dialog||(e.Dialog={})),function(t){t._execution={get value(){return Laya.LocalStorage.getItem("_execution")?Number(Laya.LocalStorage.getItem("_execution")):15},set value(e){Laya.LocalStorage.setItem("_execution",e.toString())}},t._createExecutionNum=function(e){let a;Laya.loader.load("prefab/ExecutionNum.json",Laya.Handler.create(this,function(n){let i=new Laya.Prefab;i.json=n,a=Laya.Pool.getItemByCreateFun("prefab",i.create,i),e.addChild(a),a.getChildByName("Num"),a.pos(297,90),a.zOrder=50,t.ExecutionNumNode=a,t.ExecutionNumNode.name="ExecutionNumNode"}))},t._createAddExecution=function(a,n,i){let o;Laya.loader.load("prefab/execution.json",Laya.Handler.create(this,function(a){let n=new Laya.Prefab;n.json=a,o=Laya.Pool.getItemByCreateFun("prefab",n.create,n),Laya.stage.addChild(o),o.x=Laya.stage.width/2,o.y=Laya.stage.height/2,o.zOrder=50,t.ExecutionNumNode&&g.move_Simple(o,o.x,o.y,t.ExecutionNumNode.x,t.ExecutionNumNode.y,800,100,a=>{g.fadeOut(o,1,0,200,0,a=>{e.Animation2D.upDwon_Shake(t.ExecutionNumNode,10,80,0,null),i&&i()})},Laya.Ease.expoIn)}))},t.createConsumeEx=function(a){let n=Laya.Pool.getItemByClass("label",Laya.Label);n.name="label",Laya.stage.addChild(n),n.text="-2",n.fontSize=40,n.bold=!0,n.color="#59245c",n.x=t.ExecutionNumNode.x+100,n.y=t.ExecutionNumNode.y-n.height/2+4,n.zOrder=100,e.Animation2D.fadeOut(n,0,1,200,150,a=>{e.Animation2D.leftRight_Shake(t.ExecutionNumNode,15,60,0,null),e.Animation2D.fadeOut(n,1,0,600,400,e=>{})})}}(i=e.Execution||(e.Execution={})),function(t){let a;function createOneGold(e,t,n){let i=Laya.Pool.getItemByClass("addGold",Laya.Image);return i.name="addGold",i.alpha=1,i.zOrder=60,i.width=e,i.height=t,i.pivotX=e/2,i.pivotY=t/2,i.skin=n||a[0],i}t._num={get value(){return Laya.LocalStorage.getItem("_goldNum")?Number(Laya.LocalStorage.getItem("_goldNum")):0},set value(e){Laya.LocalStorage.setItem("_goldNum",e.toString())}},t.createGoldNode=function(e,a,n){let i;n||(n=Laya.stage),t.GoldNode&&t.GoldNode.removeSelf(),Laya.loader.load("Prefab/PreGold.json",Laya.Handler.create(this,function(o){let l=new Laya.Prefab;l.json=o,(i=Laya.Pool.getItemByCreateFun("gold",l.create,l)).getChildByName("Num").text=t._num.value.toString(),n.addChild(i),i.getChildByName("Pic"),i.pos(e,a),i.zOrder=100,t.GoldNode=i}))},t.addGold=function(e){t._num.value+=Number(e),t.GoldNode.getChildByName("Num").text=t._num.value.toString()},t.addGoldDisPlay=function(e){let a=t.GoldNode.getChildByName("Num");a.value=(Number(a.value)+Number(e)).toString()},t.addGoldNoDisPlay=function(e){t._num.value+=Number(e)},t.goldAppear=function(e,a,n){t.GoldNode&&(e?g.scale_Alpha(t.GoldNode,0,1,1,1,1,1,e,0,e=>{t.GoldNode.visible=!0}):t.GoldNode.visible=!0,a&&(t.GoldNode.x=a),n&&(t.GoldNode.y=n))},t.goldVinish=function(e){t.GoldNode&&(e?g.scale_Alpha(t.GoldNode,1,1,1,1,1,0,e,0,e=>{t.GoldNode.visible=!1}):t.GoldNode.visible=!1)},function(e){e[e["Frame/Effects/icon_gold.png"]=0]="Frame/Effects/icon_gold.png"}(a||(a={})),t.createOneGold=createOneGold,t.getGoldAni_Single=function(e,t,a,n,i,o,l,s,r){for(let h=0;h<t;h++)Laya.timer.once(30*h,this,()=>{let c=createOneGold(a,n,i);e.addChild(c),g.move_Scale(c,1,o.x,o.y,l.x,l.y,1,350,0,null,()=>{_.playSound(_.voiceUrl.huodejinbi),h===t-1?Laya.timer.once(200,this,()=>{r&&r()}):s&&s(),c.removeSelf()})})},t.getGoldAni_Heap=function(e,t,n,i,o,l,s,r,h){for(let c=0;c<t;c++){let d=createOneGold(n,i,o);e.addChild(d),d.skin=o||a[0];let u=1==Math.floor(2*Math.random())?l.x+100*Math.random():l.x-100*Math.random(),f=1==Math.floor(2*Math.random())?l.y+100*Math.random():l.y-100*Math.random();g.move_Scale(d,.5,l.x,l.y,u,f,1,300,100*Math.random()+100,Laya.Ease.expoIn,()=>{g.move_Scale(d,1,d.x,d.y,s.x,s.y,1,400,200*Math.random()+100,Laya.Ease.cubicOut,()=>{_.playSound(_.voiceUrl.huodejinbi),c===t-1?Laya.timer.once(200,this,()=>{h&&h()}):r&&r(),d.removeSelf()})})}};class n extends Laya.Script{onAwake(){this.initProperty()}onEnable(){this.self=this.owner,this.selfScene=this.self.scene;let e=this.__proto__.constructor.name;this.self[e]=this,this.timer=0,this.lwgInit(),this.propertyAssign()}lwgInit(){}initProperty(){}propertyAssign(){this.startAlpha&&(this.self.alpha=this.startAlpha),this.startScale&&this.self.scale(this.startScale,this.startScale),this.startRotat&&(this.self.rotation=this.startRotat)}commonSpeedXYByAngle(e,t){this.self.x+=S.point_SpeedXYByAngle(e,t+this.accelerated).x,this.self.y+=S.point_SpeedXYByAngle(e,t+this.accelerated).y}moveRules(){}onUpdate(){this.moveRules()}onDisable(){Laya.Pool.recover(this.self.name,this.self),this.destroy(),Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}}t.GoldAniBase=n;t.AddGold=class extends n{lwgInit(){this.self.width=115,this.self.height=111,this.self.pivotX=this.self.width/2,this.self.pivotY=this.self.height/2}initProperty(){}moveRules(){this.moveSwitch&&(this.timer++,this.timer>0&&(e.Animation2D.move_Scale(this.self,1,this.self.x,this.self.y,this.targetX,this.targetY,.35,250,0,e=>{this.self.removeSelf(),null!==this.func&&this.func()}),this.moveSwitch=!1))}}}(o=e.Gold||(e.Gold={})),function(e){let t;!function(e){e.taskReach="taskReach",e.startGame="startGame",e.defeated="defeated",e.victory="victory",e.scene3DRefresh="Scene3DRefresh",e.gameSceneRefresh="gameSceneRefresh",e.nextCustoms="nextCustoms",e.resurgence="resurgence"}(t=e.EventType||(e.EventType={})),e.dispatcher=new Laya.EventDispatcher,e.reg=function(t,a,n){a||console.error("事件的执行域必须存在!"),e.dispatcher.on(t.toString(),a,n)},e.regOnce=function(t,a,n){a||console.error("事件的执行域必须存在!"),e.dispatcher.once(t.toString(),a,n)},e.notify=function(t,a){e.dispatcher.event(t.toString(),a)},e.off=function(e,t,a){this.dispatcher.off(e.toString(),t,a)},e.offAll=function(t){e.dispatcher.offAll(t.toString())},e.offCaller=function(t){e.dispatcher.offAllCaller(t)}}(l=e.EventAdmin||(e.EventAdmin={})),function(e){e._date={get year(){return(new Date).getFullYear()},get month(){return(new Date).getMonth()},get date(){return(new Date).getDate()},get day(){return(new Date).getDay()},get hours(){return(new Date).getHours()},get minutes(){return(new Date).getMinutes()},get seconds(){return(new Date).getSeconds()},get milliseconds(){return(new Date).getMilliseconds()},get toLocaleDateString(){return(new Date).toLocaleDateString()},get toLocaleTimeString(){return(new Date).toLocaleTimeString()}},e._loginDate={get value(){let e=Laya.LocalStorage.getJSON("Date_loginDate"),t=[],a=new Date,n=[a.getFullYear(),a.getMonth()+1,a.getDate(),a.getDay()];if(e){t=JSON.parse(e);let a=!1;for(let e=0;e<t.length;e++)t[e].toString()==n.toString()&&(a=!0);a||t.push(n)}return 0==t.length&&t.push(n),Laya.LocalStorage.setJSON("Date_loginDate",JSON.stringify(t)),t}},e._loginNumber={get value(){return Laya.LocalStorage.getItem("_loginNumber")?Number(Laya.LocalStorage.getItem("_loginNumber")):1},set value(e){Laya.LocalStorage.setItem("_loginNumber",e.toString())}}}(s=e.DateAdmin||(e.DateAdmin={})),function(e){e.frameLoop=function(e,t,a,n,i,o){n&&a(),Laya.timer.frameLoop(e,t,()=>{a()},i,o)},e.frameRandomLoop=function(e,t,a,n,i,o,l){i&&n(),Laya.timer.frameLoop(e,a,()=>{let a=S.randomNumber(e,t);Laya.timer.frameOnce(a,this,()=>{n()})},o,l)},e.loop=function(e,t,a,n,i,o){n&&a(),Laya.timer.loop(e,t,()=>{a()},i,o)},e.randomLoop=function(e,t,a,n,i,o,l){i&&n(),Laya.timer.loop(e,a,()=>{let a=S.randomNumber(e,t);Laya.timer.frameOnce(a,this,()=>{n()})},o,l)}}(r=e.TimerAdmin||(e.TimerAdmin={})),function(e){let t,a,n,i;function _unlockPreventClick(e){let t=e.getChildByName("__lockClick__");t&&t.removeSelf()}function _closeScene(t,n){var i=()=>{e._clickLock.switch=!1,t.close(),n&&n()};if(!e._commonVanishAni)return void i();let o=t[t.name];if(o){if(o){e._clickLock.switch=!0,o.lwgBeforeVanishAni();let n=o.lwgVanishAni();null!==n?Laya.timer.once(n,this,()=>{i(),e._clickLock.switch=!1}):(o.lwgBeforeVanishAni(),(()=>{let n=0,o=0;switch(e._commonOpenAni){case a.fadeOut:n=150,o=50,t.Background&&g.fadeOut(t,1,0,n/2),g.fadeOut(t,1,0,n,o,()=>{i()});break;case a.leftMove:}})())}}else console.log("界面关闭失败，可能是脚本名称与场景名称不一样","场景为：",t,"类名为：",o)}function commonOpenAni(t){let n=0,i=0;switch(e._commonOpenAni){case a.fadeOut:n=400,i=300,t.Background&&g.fadeOut(t,0,1,n/2,i),g.fadeOut(t,0,1,n,0),Laya.timer.once(500,this,()=>{e._clickLock.switch=!1,t[t.name]&&(t[t.name].lwgOpenAniAfter(),t[t.name].lwgBtnClick())});break;case a.leftMove:}return n}function gameState(t){switch(t){case n.UIStart:e._gameState=i.Start;break;case n.GameScene:e._gameState=i.Play;break;case n.UIDefeated:e._gameState=i.Defeated;break;case n.UIVictory:e._gameState=i.Victory}}!function(e){e.WeChat="WeChat",e.OPPO="OPPO",e.Bytedance="Bytedance",e.All="All"}(t=e._platformTpye||(e._platformTpye={})),e._platform=t.Bytedance,e._evaluating=!1,e._gameSwitch=!1,e._gameLevel={get value(){return Laya.LocalStorage.getItem("_gameLevel")?Number(Laya.LocalStorage.getItem("_gameLevel")):1},set value(e){Laya.LocalStorage.setItem("_gameLevel",e.toString())}},e._practicalLevel={get value(){return Laya.LocalStorage.getItem("_practicalLevel")?Number(Laya.LocalStorage.getItem("_practicalLevel")):e._gameLevel.value},set value(e){Laya.LocalStorage.setItem("_practicalLevel",e.toString())}},e._createLevel=function(t,a,n){let i;Laya.loader.load("prefab/LevelNode.json",Laya.Handler.create(this,function(o){let l=new Laya.Prefab;l.json=o,i=Laya.Pool.getItemByCreateFun("prefab",l.create,l),t.addChild(i),i.pos(a,n),i.zOrder=0,i.getChildByName("level"),e.LevelNode=i}))},e._pause={get switch(){return e._gameSwitch},set switch(t){this.bool=t,t?(e._gameSwitch=!1,Laya.timer.pause()):(e._gameSwitch=!0,Laya.timer.resume())}},e._clickLock={get switch(){return!!Laya.stage.getChildByName("__stageClickLock__")},set switch(e){if(e){if(!Laya.stage.getChildByName("__stageClickLock__")){console.log("锁住点击！");let e=new Laya.Sprite;e.name="__stageClickLock__",Laya.stage.addChild(e),e.zOrder=3e3,e.width=Laya.stage.width,e.height=Laya.stage.height,e.pos(0,0),p.on(p.Type.noEffect,e,this,null,null,e=>{console.log("舞台点击被锁住了！请用admin._clickLock=false解锁"),e.stopPropagation()})}}else Laya.stage.getChildByName("__stageClickLock__")&&Laya.stage.getChildByName("__stageClickLock__").removeSelf()}},e._secneLockClick=function(e){_unlockPreventClick(e);let t=new Laya.Sprite;e.addChild(t),t.zOrder=1e3,t.name="__lockClick__",t.width=Laya.stage.width,t.height=Laya.stage.height,t.pos(0,0),p.on(p.Type.noEffect,t,this,null,null,e=>{console.log("场景点击被锁住了！请用admin._unlockPreventClick（）解锁"),e.stopPropagation()})},e._unlockPreventClick=_unlockPreventClick,e._sceneControl={},function(e){e.fadeOut="fadeOut",e.leftMove="fadeOut",e.rightMove="rightMove",e.centerRotate="centerRotate"}(a=e.OpenAniType||(e.OpenAniType={})),e._commonOpenAni=a.fadeOut,e._commonVanishAni=!1,function(e){e.UILoding="UILoding",e.UIStart="UIStart",e.UIGuide="UIGuide",e.UISkin="UISkin",e.UIShop="UIShop",e.UITask="UITask",e.UISet="UISet",e.UIPifu="UIPifu",e.UIPuase="UIPuase",e.UIShare="UIShare",e.GameMain3D="GameMain3D",e.UIVictory="UIVictory",e.UIDefeated="UIDefeated",e.UIPassHint="UIPassHint",e.UISkinQualified="UISkinQualified",e.UISkinTry="UISkinTry",e.UIRedeem="UIRedeem",e.UIAnchorXD="UIAnchorXD",e.UITurntable="UITurntable",e.UICaiDanQiang="UICaiDanQiang",e.UICaidanPifu="UICaidanPifu",e.UIOperation="UIOperation",e.UIVictoryBox="UIVictoryBox",e.UICheckIn="UICheckIn",e.UIResurgence="UIResurgence",e.UIEasterEgg="UIEasterEgg",e.UIAds="UIAds",e.UILwgInit="UILwgInit",e.GameScene="GameScene",e.UISmallHint="UISmallHint",e.UIExecutionHint="UIExecutionHint",e.UIDrawCard="UIDrawCard",e.UIPropTry="UIPropTry",e.UICard="UICard",e.UIInit="UIInit"}(n=e.SceneName||(e.SceneName={})),e._openScene=function(t,a,n,i){e._clickLock.switch=!0,Laya.Scene.load("Scene/"+t+".json",Laya.Handler.create(this,function(o){o.width=Laya.stage.width,o.height=Laya.stage.height;var l=()=>{i?Laya.stage.addChildAt(o,i):Laya.stage.addChild(o)};o.name=t,e._sceneControl[t]=o;let s=o.getChildByName("Background");s&&(s.width=Laya.stage.width,s.height=Laya.stage.height),a?_closeScene(a,l):l(),n&&n()}))},e._closeScene=_closeScene,e.commonOpenAni=commonOpenAni,function(e){e.Start="Start",e.Play="Play",e.Pause="pause",e.Victory="victory",e.Defeated="defeated"}(i=e.GameState||(e.GameState={})),e.gameState=gameState;e.Scene=class extends Laya.Script{constructor(){super(),this.aniTime=100,this.aniDelayde=100}var(e){if(this.self[e])return this.self[e];console.log("场景内不存在全局节点：",e)}onAwake(){this.self=this.owner,null==this.self.name?console.log("场景名称失效，脚本赋值失败"):(this.calssName=this.self.name,this.self[this.calssName]=this),gameState(this.calssName),this.lwgNodeDec(),this.moduleOnAwake(),this.lwgOnAwake(),this.lwgAdaptive()}lwgOnAwake(){}moduleOnAwake(){}onEnable(){this.moduleEventReg(),this.lwgEventReg(),this.moduleOnEnable(),this.lwgOnEnable(),this.btnAndlwgOpenAni()}moduleOnEnable(){}lwgNodeDec(){}lwgEventReg(){}moduleEventReg(){}lwgOnEnable(){}btnAndlwgOpenAni(){let t=this.lwgOpenAni();t?Laya.timer.once(t,this,t=>{e._clickLock.switch=!1,this.lwgOpenAniAfter(),this.lwgBtnClick()}):t=commonOpenAni(this.self)}lwgOpenAni(){return null}lwgOpenAniAfter(){}lwgBtnClick(){}lwgAdaptive(){}onUpdate(){this.lwgOnUpdate()}lwgOnUpdate(){}lwgBeforeVanishAni(){}lwgVanishAni(){return null}onDisable(){g.fadeOut(this.self,1,0,2e3,1),this.lwgOnDisable(),Laya.timer.clearAll(this),Laya.Tween.clearAll(this),l.offCaller(this)}lwgOnDisable(){}};e.Person=class extends Laya.Script{constructor(){super()}onAwake(){this.lwgOnAwake()}lwgOnAwake(){}onEnable(){this.self=this.owner,this.selfScene=this.self.scene,this.rig=this.self.getComponent(Laya.RigidBody);let e=this.__proto__.constructor.name;this.self[e]=this,this.lwgOnEnable()}lwgOnEnable(){console.log("父类的初始化！")}};e.Object=class extends Laya.Script{constructor(){super()}onAwake(){this.self=this.owner,this.selfScene=this.self.scene;let e=this.__proto__.constructor.name;this.self[e]=this,this.lwgNodeDec(),this.lwgOnAwake()}lwgNodeDec(){}lwgOnAwake(){}onEnable(){this.lwgBtnClick(),this.lwgEventReg(),this.lwgOnEnable()}lwgOnEnable(){}lwgBtnClick(){}lwgEventReg(){}onUpdate(){this.lwgOnUpdate()}lwgOnUpdate(){}onDisable(){this.lwgOnDisable(),Laya.timer.clearAll(this),l.offCaller(this)}lwgOnDisable(){}}}(h=e.Admin||(e.Admin={})),function(e){e.RGBtoHexString=function(e,t,a){return"#"+("00000"+(e<<16|t<<8|a).toString(16)).slice(-6)},e.colour=function(e,t,a){let n=new Laya.ColorFilter;return t?n.color(t[0],t[1],t[2],t[3]):n.color(255,0,0,1),e.filters=[n],a&&Laya.timer.once(a,this,()=>{for(let t=0;t<e.filters.length;t++)if(e.filters[t]==n){e.filters=[];break}}),n},e.changeOnce=function(e,t,a){if(!e)return;let n=new Laya.ColorFilter;n.color(0,0,0,0);let i=t[0]/a,o=t[1]/a,l=t[2]/a,s=0;t[3]&&(s=t[3]/a);let h={add:!0},c=0,d=0,u=0,f=0;r.frameLoop(1,h,()=>{c<t[0]&&h.add?(d+=o,u+=l,0!==s&&(f+=s),(c+=i)>=t[0]&&(h.add=!1)):(d-=o,u-=l,0!==s&&(f-=s),(c-=i)<=0&&Laya.timer.clearAll(h)),n.color(c,d,u,f),e.filters=[n]})},e.changeConstant=function(e,t,a,n){let i,o=[];e.filters?(i=e.filters[0],o=[e.filters[0]._alpha[0],e.filters[0]._alpha[1],e.filters[0]._alpha[2],e.filters[0]._alpha[3]?e.filters[0]._alpha[3]:1]):((i=new Laya.ColorFilter).color(t[0],t[1],t[2],t[3]?t[3]:1),o=[t[0],t[1],t[2],t[3]?t[3]:1],e.filters=[i]);let l=[S.randomCountNumer(t[0],a[0])[0],S.randomCountNumer(t[1],a[1])[0],S.randomCountNumer(t[2],a[2])[0],S.randomCountNumer(t[3]?t[3]:1,a[3]?a[3]:1)[0]],s=(l[0]-o[0])/n,h=(l[1]-o[1])/n,c=(l[2]-o[2])/n,d=0;l[3]&&(d=(l[3]-o[3])/n);let u={},f=0;r.frameLoop(1,u,()=>{++f<=n?(o[0]+=s,o[1]+=h,o[2]+=c):Laya.timer.clearAll(u),i.color(o[0],o[1],o[2],o[3]),e.filters=[i]})}}(d=e.Color||(e.Color={})),function(t){let a,n;!function(e){e[e["Frame/Effects/cir_white.png"]=0]="Frame/Effects/cir_white.png",e[e["Frame/Effects/cir_black.png"]=1]="Frame/Effects/cir_black.png",e[e["Frame/Effects/cir_blue.png"]=2]="Frame/Effects/cir_blue.png",e[e["Frame/Effects/cir_bluish.png"]=3]="Frame/Effects/cir_bluish.png",e[e["Frame/Effects/cir_cyan.png"]=4]="Frame/Effects/cir_cyan.png",e[e["Frame/Effects/cir_grass.png"]=5]="Frame/Effects/cir_grass.png",e[e["Frame/Effects/cir_green.png"]=6]="Frame/Effects/cir_green.png",e[e["Frame/Effects/cir_orange.png"]=7]="Frame/Effects/cir_orange.png",e[e["Frame/Effects/cir_pink.png"]=8]="Frame/Effects/cir_pink.png",e[e["Frame/Effects/cir_purple.png"]=9]="Frame/Effects/cir_purple.png",e[e["Frame/Effects/cir_red.png"]=10]="Frame/Effects/cir_red.png",e[e["Frame/Effects/cir_yellow.png"]=11]="Frame/Effects/cir_yellow.png",e[e["Frame/Effects/star_black.png"]=12]="Frame/Effects/star_black.png",e[e["Frame/Effects/star_blue.png"]=13]="Frame/Effects/star_blue.png",e[e["Frame/Effects/star_bluish.png"]=14]="Frame/Effects/star_bluish.png",e[e["Frame/Effects/star_cyan.png"]=15]="Frame/Effects/star_cyan.png",e[e["Frame/Effects/star_grass.png"]=16]="Frame/Effects/star_grass.png",e[e["Frame/Effects/star_green.png"]=17]="Frame/Effects/star_green.png",e[e["Frame/Effects/star_orange.png"]=18]="Frame/Effects/star_orange.png",e[e["Frame/Effects/star_pink.png"]=19]="Frame/Effects/star_pink.png",e[e["Frame/Effects/star_purple.png"]=20]="Frame/Effects/star_purple.png",e[e["Frame/Effects/star_red.png"]=21]="Frame/Effects/star_red.png",e[e["Frame/Effects/star_white.png"]=22]="Frame/Effects/star_white.png",e[e["Frame/Effects/star_yellow.png"]=23]="Frame/Effects/star_yellow.png",e[e["Frame/Effects/ui_Circular_l_yellow.png"]=24]="Frame/Effects/ui_Circular_l_yellow.png",e[e["Frame/UI/ui_square_guang.png"]=25]="Frame/UI/ui_square_guang.png"}(a=t.SkinUrl||(t.SkinUrl={})),function(e){e.star="star",e.dot="dot"}(n=t.SkinStyle||(t.SkinStyle={}));t.EffectsBase=class extends Laya.Script{onAwake(){this.initProperty()}onEnable(){this.self=this.owner,this.selfScene=this.self.scene;let e=this.__proto__.constructor.name;this.self[e]=this,this.timer=0,this.lwgInit(),this.propertyAssign()}lwgInit(){}initProperty(){}propertyAssign(){this.startAlpha&&(this.self.alpha=this.startAlpha),this.startScale&&this.self.scale(this.startScale,this.startScale),this.startRotat&&(this.self.rotation=this.startRotat)}commonSpeedXYByAngle(e,t){this.self.x+=S.point_SpeedXYByAngle(e,t+this.accelerated).x,this.self.y+=S.point_SpeedXYByAngle(e,t+this.accelerated).y}moveRules(){}onUpdate(){this.moveRules()}onDisable(){Laya.Pool.recover(this.self.name,this.self),this.destroy(),Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}},t.aureole_Continuous=function(e,t,n,i,o,l,s,h,c){let d=new Laya.Image;d.skin=l?S.arrayRandomGetOut(l)[0]:a[S.randomCountNumer(0,12)[0]],e.addChild(d),d.pos(t.x,t.y),d.width=n||100,d.height=i||100,d.pivotX=d.width/2,d.pivotY=d.height/2,d.alpha=0,d.zOrder=s||0,h=h||.025,S.randomCountNumer(0,360)[0];let u={},f=0;c=c||5e-4;let p=!1;r.frameLoop(1,u,()=>{d.alpha<1&&!p?(d.alpha+=.05,f+=c/5,d.scaleX+=h/2+f,d.scaleY+=h/2+f):(p=!0,f+=c,d.scaleX+=h+f,d.scaleY+=h+f,d.scaleX>2.4&&(f-=c,d.scaleX>3.2&&(d.alpha-=.015,d.alpha<=.005&&(d.removeSelf(),Laya.timer.clearAll(u)))))})},t.particle_FallingVertical=function(e,t,n,i,o,l,s,h,c,d){let u=new Laya.Image;e.addChild(u);let f=n?S.randomCountNumer(n[0],n[1])[0]:S.randomCountNumer(-200,200)[0],p=n?S.randomCountNumer(n[1],n[1])[0]:S.randomCountNumer(-25,25)[0];u.x=t?t.x+f:f,u.y=t?t.y+p:p,o=o||[25,50],u.width=S.randomCountNumer(o[0],o[1])[0],u.height=l?S.randomCountNumer(l[0],l[1])[0]:u.width,u.pivotX=u.width/2,u.pivotY=u.height/2,u.skin=s?S.arrayRandomGetOut(s)[0]:a[S.randomCountNumer(0,12)[0]],u.alpha=0;let y=h?S.randomCountNumer(h[0],h[1])[0]:S.randomCountNumer(4,8)[0],g=c?S.randomCountNumer(c[0],c[1])[0]:S.randomCountNumer(.25,.45)[0],m=0,_={alpha:!0,move:!1,vinish:!1},L=0,C=i?S.randomCountNumer(i[0],i[1])[0]:S.randomCountNumer(100,300)[0];r.frameLoop(1,_,()=>{u.alpha<1&&_.alpha&&(u.alpha+=.05,L=u.y++,u.alpha>=1&&(_.alpha=!1,_.move=!0)),L<C&&_.move&&(m+=g,(L=u.y+=y+m)>=C&&(_.move=!1,_.vinish=!0)),_.vinish&&(m-=g/2,u.alpha-=.03,u.y+=y+m,(u.alpha<=0||y+m<=0)&&(u.removeSelf(),Laya.timer.clearAll(_)))})},t.particle_AnnularInhalation=function(e,t,n,i,o,l,s,h,c,d){let u=new Laya.Image;e.addChild(u),o=o||[25,50],u.width=S.randomCountNumer(o[0],o[1])[0],u.height=l?S.randomCountNumer(l[0],l[1])[0]:u.width,u.pivotX=u.width/2,u.pivotY=u.height/2,u.skin=s?S.arrayRandomGetOut(s)[0]:a[S.randomCountNumer(0,12)[0]];let f=S.randomCountNumer(n[0],n[1])[0];u.alpha=0;let p=h?S.randomCountNumer(h[0],h[1])[0]:S.randomCountNumer(5,10)[0],y=i?S.randomCountNumer(i[0],i[1])[0]:S.randomCountNumer(0,360)[0],g={},m=0;c=c||.35,r.frameLoop(1,g,()=>{u.alpha<1?(u.alpha+=.05,f-=p/2+(m+=c/5)):f-=p+(m+=c);let e=S.point_GetRoundPos(y,f,t);u.pos(e.x,e.y),(e.distance(t.x,t.y)<=20||e.distance(t.x,t.y)>=1e3)&&(u.removeSelf(),Laya.timer.clearAll(g))})},t.light_SimpleInfinite=function(e,t,n,i,o,l,s,r){let h=new Laya.Image;e.addChild(h),h.pos(t,n),h.width=i,h.height=o,h.pivotX=i/2,h.pivotY=o/2,h.skin=s||a[24],h.alpha=0,h.zOrder=l||0;let c=!0,d={};Laya.timer.frameLoop(1,d,()=>{c?(h.alpha+=r?2*r:.02,h.alpha>=1&&(c=!1,d.end=!0)):(h.alpha-=r||.01,h.alpha<=0&&(d.end?(Laya.timer.clearAll(d),h.removeSelf()):c=!0))})},t.blink_Star=function(e,t,i,o,l,s,r,h,c){c||(c=0==S.randomOneHalf()?-5:5);let d,u=Laya.Pool.getItemByClass("star_Blink",Laya.Image);u.name="star_Blink",l!=n.star&&l?l==n.dot?(d=Math.floor(12*Math.random()),u.skin=a[d]):u.skin=l:(d=12+Math.floor(12*Math.random()),u.skin=a[d]),u.alpha=0,u.width=s,u.height=r,u.scaleX=0,u.scaleY=0,u.pivotX=u.width/2,u.pivotY=u.height/2,e.addChild(u);let f=S.point_RandomPointByCenter(t,i,o,1);u.pos(f[0].x,f[0].y);let p=S.randomCountNumer(.8,1.2)[0],y=0,g={};Laya.timer.frameLoop(1,g,()=>{++y>0&&y<=20?(u.alpha+=.1,u.rotation+=c,u.scaleX+=.011,u.scaleY+=.011):y>20&&(u.reduce?(u.rotation-=c,u.alpha-=.015,u.scaleX-=.01,u.scaleY-=.01,u.scaleX<=0&&(u.removeSelf(),Laya.timer.clearAll(g))):u.scaleX>p?u.reduce=!0:(u.rotation+=c,u.scaleX+=.02,u.scaleY+=.02))})},t.createCommonExplosion=function(e,t,o,l,s,r,h){for(let c=0;c<t;c++){let t,c=Laya.Pool.getItemByClass("ele",Laya.Image);c.name="ele",s===n.star?t=12+Math.floor(12*Math.random()):s===n.dot&&(t=Math.floor(12*Math.random())),c.skin=a[t],c.alpha=1,e.addChild(c),c.pos(o,l);let d=c.addComponent(i);d.startSpeed=Math.random()*r,d.continueTime=2*Math.random()+h}};class i extends e.Effects.EffectsBase{lwgInit(){this.self.width=25,this.self.height=25,this.self.pivotX=this.self.width/2,this.self.pivotY=this.self.height/2}initProperty(){this.startAngle=360*Math.random(),this.startSpeed=5*Math.random()+8,this.startScale=.4+.6*Math.random(),this.accelerated=2,this.continueTime=8+10*Math.random(),this.rotateDir=1===Math.floor(2*Math.random())?"left":"right",this.rotateRan=10*Math.random()}moveRules(){this.timer++,"left"===this.rotateDir?this.self.rotation+=this.rotateRan:this.self.rotation-=this.rotateRan,this.timer>=this.continueTime/2&&(this.self.alpha-=.04,this.self.alpha<=.65&&this.self.removeSelf()),this.commonSpeedXYByAngle(this.startAngle,this.startSpeed+this.accelerated),this.accelerated+=.2}}t.commonExplosion=i,t.createExplosion_Rotate=function(e,t,i,l,s,r,h){for(let c=0;c<t;c++){let t,c=Laya.Pool.getItemByClass("ele",Laya.Image);c.name="ele",s===n.star?t=12+Math.floor(12*Math.random()):s===n.dot&&(t=Math.floor(12*Math.random())),c.skin=a[t],c.alpha=1,e.addChild(c),c.pos(i,l);let d=c.addComponent(o);d.startSpeed=2+Math.random()*r,d.rotateRan=Math.random()*h}};class o extends e.Effects.EffectsBase{lwgInit(){this.self.width=41,this.self.height=41,this.self.pivotX=this.self.width/2,this.self.pivotY=this.self.height/2}initProperty(){this.startAngle=360*Math.random(),this.startSpeed=5*Math.random()+8,this.startScale=.4+.6*Math.random(),this.accelerated=0,this.continueTime=5+20*Math.random(),this.rotateDir=1===Math.floor(2*Math.random())?"left":"right",this.rotateRan=15*Math.random()}moveRules(){"left"===this.rotateDir?this.self.rotation+=this.rotateRan:this.self.rotation-=this.rotateRan,this.startSpeed-this.accelerated<=.1?(this.self.alpha-=.03,this.self.alpha<=0&&this.self.removeSelf()):this.accelerated+=.2,this.commonSpeedXYByAngle(this.startAngle,this.startSpeed-this.accelerated)}}t.Explosion_Rotate=o,t.createFireworks=function(e,t,n,i){for(let o=0;o<t;o++){let t=Laya.Pool.getItemByClass("fireworks",Laya.Image);t.name="fireworks";let o=12+Math.floor(11*Math.random());t.alpha=1,t.skin=a[o],e.addChild(t),t.pos(n,i),t.getComponent(l)||t.addComponent(l)}};class l extends e.Effects.EffectsBase{lwgInit(){this.self.width=41,this.self.height=41,this.self.pivotX=this.self.width/2,this.self.pivotY=this.self.height/2}initProperty(){this.startAngle=360*Math.random(),this.startSpeed=5*Math.random()+5,this.startScale=.4+.6*Math.random(),this.accelerated=.1,this.continueTime=200+10*Math.random()}moveRules(){this.timer++,this.timer>=3*this.continueTime/5&&(this.self.alpha-=.1),this.timer>=this.continueTime?this.self.removeSelf():this.commonSpeedXYByAngle(this.startAngle,this.startSpeed),this.self.scaleX<0?this.self.scaleX+=.01:this.self.scaleX>=this.startScale&&(this.self.scaleX-=.01)}}t.Fireworks=l,t.createLeftOrRightJet=function(e,t,n,i,o){for(let l=0;l<n;l++){let n=Laya.Pool.getItemByClass("Jet",Laya.Image);n.name="Jet";let l=12+Math.floor(11*Math.random());n.skin=a[l],n.alpha=1,e.addChild(n),n.pos(i,o);let r=n.getComponent(s);if(r)r.direction=t,r.initProperty();else{n.addComponent(s);let e=n.getComponent(s);e.direction=t,e.initProperty()}}};class s extends e.Effects.EffectsBase{lwgInit(){this.self.width=41,this.self.height=41,this.self.pivotX=this.self.width/2,this.self.pivotY=this.self.height/2}initProperty(){"left"===this.direction?this.startAngle=100*Math.random()-90+45-10-20:"right"===this.direction&&(this.startAngle=100*Math.random()+90+45+20),this.startSpeed=10*Math.random()+3,this.startScale=.4+.6*Math.random(),this.accelerated=.1,this.continueTime=300+50*Math.random(),this.randomRotate=1+20*Math.random()}moveRules(){this.timer++,this.timer>=3*this.continueTime/5&&(this.self.alpha-=.1),this.timer>=this.continueTime?this.self.removeSelf():this.commonSpeedXYByAngle(this.startAngle,this.startSpeed),this.self.rotation+=this.randomRotate,this.self.scaleX<0?this.self.scaleX+=.01:this.self.scaleX>=this.startScale&&(this.self.scaleX-=.01)}}t.leftOrRightJet=s}(u=e.Effects||(e.Effects={})),function(e){e.skLoding=function(){},e.onCompelet=function(e){console.log(e._skBufferUrl,"加载成功")},e.onError=function(e){console.log(e,"加载失败！")}}(f=e.Sk||(e.Sk={})),function(e){let t;e.createButton=function(){new Laya.Sprite,new Laya.Image,new Laya.Label},function(e){e.noEffect="noEffect",e.largen="largen",e.balloon="balloon",e.beetle="beetle"}(t=e.Type||(e.Type={})),e.on=function(e,a,n,i,o,l,s){let r;switch(e){case t.noEffect:r=new R;break;case t.largen:r=new U;break;case t.balloon:r=new M;break;case t.balloon:r=new G;break;default:r=new U}a.on(Laya.Event.MOUSE_DOWN,n,i),a.on(Laya.Event.MOUSE_MOVE,n,o),a.on(Laya.Event.MOUSE_UP,n,l),a.on(Laya.Event.MOUSE_OUT,n,s),a.on(Laya.Event.MOUSE_DOWN,n,r.down),a.on(Laya.Event.MOUSE_MOVE,n,r.move),a.on(Laya.Event.MOUSE_UP,n,r.up),a.on(Laya.Event.MOUSE_OUT,n,r.out)},e.off=function(e,a,n,i,o,l,s){let r;switch(e){case t.noEffect:r=new R;break;case t.largen:r=new U;break;case t.balloon:r=new M;break;case t.balloon:r=new G;break;default:r=new U}a.off(Laya.Event.MOUSE_DOWN,n,i),a.off(Laya.Event.MOUSE_MOVE,n,o),a.off(Laya.Event.MOUSE_UP,n,l),a.off(Laya.Event.MOUSE_OUT,n,s),a.off(Laya.Event.MOUSE_DOWN,n,r.down),a.off(Laya.Event.MOUSE_MOVE,n,r.move),a.off(Laya.Event.MOUSE_UP,n,r.up),a.off(Laya.Event.MOUSE_OUT,n,r.out)}}(p=e.Click||(e.Click={}));class R{constructor(){}down(e){}move(e){}up(e){}out(e){}}e.Btn_NoEffect=R;class U{constructor(){}down(e){e.currentTarget.scale(1.1,1.1),_.playSound(p.audioUrl)}move(e){}up(e){e.currentTarget.scale(1,1)}out(e){e.currentTarget.scale(1,1)}}e.Btn_LargenEffect=U;class M{constructor(){}down(e){e.currentTarget.scale(p.balloonScale+.06,p.balloonScale+.06),_.playSound(p.audioUrl)}up(e){e.currentTarget.scale(p.balloonScale,p.balloonScale)}move(e){e.currentTarget.scale(p.balloonScale,p.balloonScale)}out(e){e.currentTarget.scale(p.balloonScale,p.balloonScale)}}e.Btn_Balloon=M;class G{constructor(){}down(e){e.currentTarget.scale(p.beetleScale+.06,p.beetleScale+.06),_.playSound(p.audioUrl)}up(e){e.currentTarget.scale(p.beetleScale,p.beetleScale)}move(e){e.currentTarget.scale(p.beetleScale,p.beetleScale)}out(e){e.currentTarget.scale(p.beetleScale,p.beetleScale)}}e.Btn_Beetle=G,function(e){function moveTo(t,a,n,i,o,l,s=0,r=!0,h,c){let d=t.transform.position.clone();if(0==n||null==n)return t.transform.position=a.clone(),void(l&&l.apply(i));(c<=0||null==c)&&(c=e.frameRate);let u=function(){t.transform&&(t.transform.position=d),h&&h()};Laya.timer.once(s,t,function(){Laya.timer.frameLoop(c,t,u)});let f=Laya.Tween.to(d,{x:a.x,y:a.y,z:a.z},n,o,Laya.Handler.create(t,function(){t.transform&&(t.transform.position=a.clone(),Laya.timer.clear(t,u)),l&&l.apply(i)}),s,r);e.tweenMap[t.id]||(e.tweenMap[t.id]=[]),e.tweenMap[t.id].push(f)}function rotateTo(t,a,n,i,o,l,s,r,h,c){let d=t.transform.localRotationEuler.clone();if(0==n||null==n)return t.transform.localRotationEuler=a.clone(),void(l&&l.apply(i));(c<=0||null==c)&&(c=e.frameRate);let u=function(){t.transform&&(t.transform.localRotationEuler=d),h&&h()};Laya.timer.once(s,t,function(){Laya.timer.frameLoop(c,t,u)});let f=Laya.Tween.to(d,{x:a.x,y:a.y,z:a.z},n,o,Laya.Handler.create(t,function(){t.transform&&(t.transform.localRotationEuler=a.clone(),Laya.timer.clear(t,u)),l&&l.apply(i)}),s,r);e.tweenMap[t.id]||(e.tweenMap[t.id]=[]),e.tweenMap[t.id].push(f)}e.tweenMap={},e.frameRate=1,e.moveTo=moveTo,e.rotateTo=rotateTo,e.scaleTo=function(t,a,n,i,o,l,s,r,h,c){let d=t.transform.localScale.clone();if(0==n||null==n)return t.transform.localScale=a.clone(),void(l&&l.apply(i));(c<=0||null==c)&&(c=e.frameRate);let u=function(){t.transform.localScale=d.clone(),h&&h()};Laya.timer.once(s,this,function(){Laya.timer.frameLoop(c,t,u)});let f=Laya.Tween.to(d,{x:a.x,y:a.y,z:a.z},n,o,Laya.Handler.create(t,function(){t.transform.localScale=a.clone(),Laya.timer.clear(t,u),l&&l.apply(i)}),s,r);e.tweenMap[t.id]||(e.tweenMap[t.id]=[]),e.tweenMap[t.id].push(f)},e.ClearTween=function(t){let a=e.tweenMap[t.id];if(a&&a.length)for(;a.length>0;)a.pop().clear();Laya.timer.clearAll(t)},e.rock=function(e,t,a,n,i,o,l){o||(o=0);let s=new Laya.Vector3(e.transform.localRotationEulerX+t.x,e.transform.localRotationEulerY+t.y,e.transform.localRotationEulerZ+t.z);rotateTo(e,s,a/2,n,l,()=>{let o=new Laya.Vector3(e.transform.localRotationEulerX-2*t.x,e.transform.localRotationEulerY-2*t.y,e.transform.localRotationEulerZ-2*t.z);rotateTo(e,o,a,n,l,()=>{let o=new Laya.Vector3(e.transform.localRotationEulerX+t.x,e.transform.localRotationEulerY+t.y,e.transform.localRotationEulerZ+t.z);rotateTo(e,o,a/2,n,l,()=>{i&&i()})})},o)},e.moveRotateTo=function(e,t,a,n,i,o,l,s,r,h){moveTo(e,t.transform.position,a,n,i,null,l,s,r,h),rotateTo(e,t.transform.localRotationEuler,a,n,i,o,l,s,null,h)}}(y=e.Animation3D||(e.Animation3D={})),function(e){function bombs_Appear(e,t,a,n,i,o,l,s,r){e.scale(0,0),e.alpha=t,Laya.Tween.to(e,{scaleX:n,scaleY:n,alpha:1,rotation:i},o,Laya.Ease.cubicInOut,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:a,scaleY:a,rotation:0},l,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:a+.2*(n-a),scaleY:a+.2*(n-a),rotation:0},l,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:a,scaleY:a,rotation:0},l,null,Laya.Handler.create(this,function(){r&&r()}),0)}),0)}),0)}),s||0)}function bombs_Vanish(e,t,a,n,i,o,l){Laya.Tween.to(e,{scaleX:t,scaleY:t,alpha:a,rotation:n},i,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){l&&l()}),o||0)}e.simple_Rotate=function(e,t,a,n,i,o){e.rotation=t,i||(i=0),Laya.Tween.to(e,{rotation:a},n,null,Laya.Handler.create(this,function(){o&&o()}),i)},e.upDown_Overturn=function(e,t,a){Laya.Tween.to(e,{scaleY:0},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleY:1},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleY:0},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleY:1},t,null,Laya.Handler.create(this,function(){null===a&&void 0===a||a()}),0)}),0)}),0)}),0)},e.leftRight_Overturn=function(e,t,a){Laya.Tween.to(e,{scaleX:0},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:1},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:0},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:1},t,null,Laya.Handler.create(this,function(){}),0),null!==a&&a()}),0)}),0)}),0)},e.leftRight_Shake=function(e,t,a,n,i,o){n||(n=0),o||(h._clickLock.switch=!0),Laya.Tween.to(e,{x:e.x-t},a,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{x:e.x+2*t},a,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{x:e.x-t},a,null,Laya.Handler.create(this,function(){i&&i(),o||(h._clickLock.switch=!1)}))}))}),n)},e.upDwon_Shake=function(e,t,a,n,i){Laya.Tween.to(e,{y:e.y+t},a,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{y:e.y-2*t},a,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{y:e.y+t},a,null,Laya.Handler.create(this,function(){null!==i&&i()}))}))}),n)},e.fadeOut=function(e,t,a,n,i,o,l){e.alpha=t,i||(i=0),Laya.Tween.to(e,{alpha:a},n,null,Laya.Handler.create(this,function(){o&&o()}),i)},e.fadeOut_KickBack=function(e,t,a,n,i,o){e.alpha=t,Laya.Tween.to(e,{alpha:a},n,null,Laya.Handler.create(this,function(){null!==o&&o()}),i)},e.move_FadeOut=function(e,t,a,n,i,o,l,s){e.alpha=0,e.x=t,e.y=a,Laya.Tween.to(e,{alpha:1,x:n,y:i},o,null,Laya.Handler.create(this,function(){null!==s&&s()}),l)},e.move_Fade_Out=function(e,t,a,n,i,o,l,s){e.alpha=1,e.x=t,e.y=a,Laya.Tween.to(e,{alpha:0,x:n,y:i},o,null,Laya.Handler.create(this,function(){null!==s&&s()}),l)},e.move_FadeOut_Scale_01=function(e,t,a,n,i,o,l,s){e.alpha=0,e.targetX=0,e.targetY=0,e.x=t,e.y=a,Laya.Tween.to(e,{alpha:1,x:n,y:i,scaleX:1,scaleY:1},o,null,Laya.Handler.create(this,function(){null!==s&&s()}),l)},e.move_Scale=function(e,t,a,n,i,o,l,s,r,h,c){e.scaleX=t,e.scaleY=t,e.x=a,e.y=n,Laya.Tween.to(e,{x:i,y:o,scaleX:l,scaleY:l},s,h?null:h,Laya.Handler.create(this,function(){c&&c()}),r||0)},e.rotate_Scale=function(e,t,a,n,i,o,l,s,r,h){e.scaleX=a,e.scaleY=n,e.rotation=t,Laya.Tween.to(e,{rotation:i,scaleX:o,scaleY:l},s,null,Laya.Handler.create(this,()=>{h&&h(),e.rotation=0}),r||0)},e.drop_Simple=function(e,t,a,n,i,o,l){e.y=t,Laya.Tween.to(e,{y:a,rotation:n},i,Laya.Ease.circOut,Laya.Handler.create(this,function(){null!==l&&l()}),o)},e.drop_KickBack=function(e,t,a,n,i,o,l,s){e.alpha=t,e.y=a,l||(l=0),Laya.Tween.to(e,{alpha:1,y:n+i},o,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{y:n-i/2},o/2,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{y:n},o/4,null,Laya.Handler.create(this,function(){s&&s()}),0)}),0)}),l)},e.drop_Excursion=function(e,t,a,n,i,o,l){Laya.Tween.to(e,{x:e.x+a,y:e.y+1*t/6},i,Laya.Ease.expoIn,Laya.Handler.create(this,function(){Laya.Tween.to(e,{x:e.x+a+50,y:t,rotation:n},i,null,Laya.Handler.create(this,function(){null!==l&&l()}),0)}),o)},e.goUp_Simple=function(e,t,a,n,i,o,l){e.y=t,e.rotation=a,Laya.Tween.to(e,{y:n,rotation:0},i,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){null!==l&&l()}),o)},e.cardRotateX_TowFace=function(e,t,a,n,i){Laya.Tween.to(e,{scaleX:0},t,null,Laya.Handler.create(this,function(){S.node_2DChildrenVisible(e,!1),a&&a(),Laya.Tween.to(e,{scaleX:1},.9*t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:0},.8*t,null,Laya.Handler.create(this,function(){S.node_2DChildrenVisible(e,!0),Laya.Tween.to(e,{scaleX:1},.7*t,null,Laya.Handler.create(this,function(){i&&i()}),0)}),0)}),0)}),n)},e.cardRotateX_OneFace=function(e,t,a,n,i){Laya.Tween.to(e,{scaleX:0},a,null,Laya.Handler.create(this,function(){null!==t&&t(),Laya.Tween.to(e,{scaleX:1},a,null,Laya.Handler.create(this,function(){null!==i&&i()}),0)}),n)},e.cardRotateY_TowFace=function(e,t,a,n,i){Laya.Tween.to(e,{scaleY:0},t,null,Laya.Handler.create(this,function(){S.node_2DChildrenVisible(e,!1),a&&a(),Laya.Tween.to(e,{scaleY:1},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleY:0},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleY:1},1*t/2,null,Laya.Handler.create(this,function(){S.node_2DChildrenVisible(e,!0),i&&i()}),0)}),0)}),0)}),n)},e.cardRotateY_OneFace=function(e,t,a,n,i){Laya.Tween.to(e,{scaleY:0},a,null,Laya.Handler.create(this,function(){t&&t(),Laya.Tween.to(e,{scaleY:1},a,null,Laya.Handler.create(this,function(){i&&i()}),0)}),n||0)},e.move_changeRotate=function(e,t,a,n,i,o,l){let s=t*n+e.x*(1-n),r=a*n+e.y*(1-n);Laya.Tween.to(e,{x:s,y:r,rotation:45},o,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{x:t,y:a,rotation:0},o,null,Laya.Handler.create(this,function(){null!==l&&l()}),0)}),0)},e.bomb_LeftRight=function(e,t,a,n,i){Laya.Tween.to(e,{scaleX:t},a,Laya.Ease.cubicInOut,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:.85},.5*a,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:.9*t},.55*a,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:.95},.6*a,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:1},.65*a,null,Laya.Handler.create(this,function(){n&&n()}),0)}),0)}),0)}),0)}),i)},e.bombs_Appear=bombs_Appear,e.bombs_AppearAllChild=function(e,t,a,n,i,o,l,s,r,h){let c=0;s||(s=100);for(let h=0;h<e.numChildren;h++){let d=e.getChildAt(h);d.alpha=0,Laya.timer.once(c,this,()=>{d.alpha=1,e.numChildren,bombs_Appear(d,t,a,n,i,o,l,null,r)}),c+=s}},e.bombs_VanishAllChild=function(e,t,a,n,i,o,l){let s=0;o||(o=100);for(let r=0;r<e.numChildren;r++)e.getChildAt(r),Laya.timer.once(s,this,()=>{e.numChildren,bombs_Vanish(e,t,a,n,i,0,l)}),s+=o},e.bombs_Vanish=bombs_Vanish,e.swell_shrink=function(e,t,a,n,i,o){i||(i=0),Laya.Tween.to(e,{scaleX:a,scaleY:a,alpha:1},n,Laya.Ease.cubicInOut,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:t,scaleY:t,rotation:0},n,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:t+.5*(a-t),scaleY:t+.5*(a-t),rotation:0},.5*n,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:t,scaleY:t,rotation:0},n,null,Laya.Handler.create(this,function(){o&&o()}),0)}),0)}),0)}),i)},e.move_Simple=function(e,t,a,n,i,o,l,s,r){e.x=t,e.y=a,Laya.Tween.to(e,{x:n,y:i},o,r||null,Laya.Handler.create(this,function(){s&&s()}),l||0)},e.move_Deform_X=function(e,t,a,n,i,o,l,s,r){e.alpha=0,e.x=t,e.rotation=a,Laya.Tween.to(e,{x:n,scaleX:1+i,scaleY:1+o,rotation:a/3,alpha:1},l,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:1,scaleY:1,rotation:0},l,null,Laya.Handler.create(this,function(){null!==r&&r()}),0)}),s)},e.move_Deform_Y=function(e,t,a,n,i,o,l,s,r){e.alpha=0,t&&(e.y=t),e.rotation=a,Laya.Tween.to(e,{y:n,scaleX:1+i,scaleY:1+o,rotation:a/3,alpha:1},l,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:1,scaleY:1,rotation:0},l,null,Laya.Handler.create(this,function(){null!==r&&r()}),0)}),s)},e.blink_FadeOut_v=function(e,t,a,n,i,o){e.alpha=t,Laya.Tween.to(e,{alpha:a},n,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{alpha:t},n,null,Laya.Handler.create(this,function(){null!==o&&o()}),0)}),i)},e.blink_FadeOut=function(e,t,a,n,i,o){e.alpha=t,i||(i=0),Laya.Tween.to(e,{alpha:t},n,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{alpha:a},n,null,Laya.Handler.create(this,function(){o&&o()}),0)}),i)},e.shookHead_Simple=function(e,t,a,n,i){let o=e.rotation;Laya.Tween.to(e,{rotation:o+t},a,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{rotation:o-2*t},a,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{rotation:o+t},a,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{rotation:o},a,null,Laya.Handler.create(this,function(){i&&i()}),0)}),0)}),0)}),n||0)},e.HintAni_01=function(e,t,a,n,i,o,l){e.alpha=0,Laya.Tween.to(e,{alpha:1,y:e.y-t},a,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{y:e.y-15},n,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{alpha:0,y:e.y+t+i},o,null,Laya.Handler.create(this,function(){null!==l&&l()}),0)}),0)}),0)},e.scale_Alpha=function(e,t,a,n,i,o,l,s,r,h,c){r||(r=0),r||(c=null),e.alpha=t,e.scaleX=a,e.scaleY=n,Laya.Tween.to(e,{scaleX:i,scaleY:o,alpha:l},s,c,Laya.Handler.create(this,function(){h&&h()}),r)},e.rotate_Magnify_KickBack=function(e,t,a,n,i,o,l,s){e.alpha=0,e.scaleX=0,e.scaleY=0,Laya.Tween.to(e,{alpha:1,rotation:360+t,scaleX:1+a,scaleY:1+a},n,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{rotation:360-t/2,scaleX:1+a/2,scaleY:1+a/2},i,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{rotation:360+t/3,scaleX:1+a/5,scaleY:1+a/5},i,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{rotation:360,scaleX:1,scaleY:1},i,null,Laya.Handler.create(this,function(){e.rotation=0,null!==s&&s()}),0)}),l)}),0)}),o)}}(g=e.Animation2D||(e.Animation2D={})),function(e){e._sound={get switch(){return"0"!=Laya.LocalStorage.getItem("Setting_sound")},set switch(e){let t;t=e?1:0,Laya.LocalStorage.setItem("Setting_sound",t.toString())}},e._bgMusic={get switch(){return"0"!=Laya.LocalStorage.getItem("Setting_bgMusic")},set switch(e){let t;e?(t=1,Laya.LocalStorage.setItem("Setting_bgMusic",t.toString()),_.playMusic()):(t=0,Laya.LocalStorage.setItem("Setting_bgMusic",t.toString()),_.stopMusic())}},e._shake={get switch(){return"0"!=Laya.LocalStorage.getItem("Setting_shake")},set switch(e){let t;t=e?1:0,Laya.LocalStorage.setItem("Setting_shake",t.toString())}},e.createSetBtn=function(t,a,n,i,o,l){let s=new Laya.Image;s.width=n||100,s.height=i||100,s.skin=o||"Frame/UI/icon_set.png",l?l.addChild(s):Laya.stage.addChild(s),s.pivotX=s.width/2,s.pivotY=s.height/2,s.x=t,s.y=a,s.zOrder=100,p.on(p.Type.largen,s,null,null,null,function(e){e.stopPropagation(),h._openScene(h.SceneName.UISet)},null),e.BtnSetNode=s,e.BtnSetNode.name="BtnSetNode"},e.setBtnAppear=function(t,a,n){e.BtnSetNode&&(t?g.scale_Alpha(e.BtnSetNode,0,1,1,1,1,1,t,0,t=>{e.BtnSetNode.visible=!0}):e.BtnSetNode.visible=!0,a&&(e.BtnSetNode.x=a),n&&(e.BtnSetNode.y=n))},e.setBtnVinish=function(t){e.BtnSetNode&&(t?g.scale_Alpha(e.BtnSetNode,1,1,1,1,1,0,t,0,t=>{e.BtnSetNode.visible=!1}):e.BtnSetNode.visible=!1)}}(m=e.Setting||(e.Setting={})),function(e){let t;!function(e){e.btn="Frame/Voice/btn.wav",e.bgm="Frame/Voice/bgm.mp3",e.victory="Frame/Voice/guoguan.wav",e.defeated="Frame/Voice/wancheng.wav",e.huodejinbi="Frame/Voice/huodejinbi.wav"}(t=e.voiceUrl||(e.voiceUrl={})),e.playSound=function(e,a,n){e||(e=t.btn),a||(a=1),m._sound.switch&&Laya.SoundManager.playSound(e,a,Laya.Handler.create(this,function(){n&&n()}))},e.playDefeatedSound=function(e,a,n){e||(e=t.defeated),a||(a=1),m._sound.switch&&Laya.SoundManager.playSound(e,a,Laya.Handler.create(this,function(){n&&n()}))},e.playVictorySound=function(e,a,n){e||(e=t.victory),a||(a=1),m._sound.switch&&Laya.SoundManager.playSound(e,a,Laya.Handler.create(this,function(){n&&n()}))},e.playMusic=function(e,a,n){e||(e=t.bgm),a||(a=0),n||(n=0),m._bgMusic.switch&&Laya.SoundManager.playMusic(e,a,Laya.Handler.create(this,function(){}),n)},e.stopMusic=function(){Laya.SoundManager.stopMusic()}}(_=e.PalyAudio||(e.PalyAudio={})),function(e){function node_RemoveAllChildren(e){e.numChildren>0&&e.removeChildren(0,e.numChildren-1)}function d3_twoSubV3(e,t,a){let n=new Laya.Vector3;if(Laya.Vector3.subtract(e,t,n),a){let e=new Laya.Vector3;return Laya.Vector3.normalize(n,e),e}return n}let t;function obj_Copy(e){var t={};for(const a in e)if(e.hasOwnProperty(a)){const n=e[a];if("object"==typeof n)if(Array.isArray(n)){let e=array_Copy(n);t[a]=e}else obj_Copy(n);else t[a]=n}return t}function array_Copy(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a]);return t}e.color_RGBtoHexString=function(e,t,a){return"#"+("00000"+(e<<16|t<<8|a).toString(16)).slice(-6)},e.format_FormatNumber=function(e){if("number"!=typeof e)return console.warn("要转化的数字并不为number"),e;let t;return t=e<1e3?""+e:e<1e6?(e/1e3).toFixed(1)+"k":e<1e9?(e/1e6).toFixed(1)+"m":""+e},e.format_StrAddNum=function(e,t){return(Number(e)+t).toString()},e.format_NumAddStr=function(e,t){return Number(t)+e},e.node_GetChildArrByProperty=function(e,t,a){let n=[];for(let i=0;i<e.numChildren;i++){const o=e.getChildAt(i);o[t]==a&&n.push(o)}return n},e.node_RandomChildren=function(t,a){let n=[],i=[];for(let e=0;e<t.numChildren;e++)i.push(e);let o=e.arrayRandomGetOut(i,a);for(let e=0;e<o.length;e++)n.push(t.getChildAt(o[e]));return n},e.node_RemoveAllChildren=node_RemoveAllChildren,e.node_2DShowExcludedChild=function(e,t,a){for(let n=0;n<e.numChildren;n++){let i=e.getChildAt(n);for(let e=0;e<t.length;e++)i.name==t[e]?i.visible=!(!a&&null!=a):i.visible=!a&&null!=a}},e.node_3DShowExcludedChild=function(e,t,a){for(let n=0;n<e.numChildren;n++){let i=e.getChildAt(n);for(let e=0;e<t.length;e++)i.name==t[e]?i.active=!(!a&&null!=a):i.active=!a&&null!=a}},e.node_2DChildrenVisible=function(e,t){for(let a=0;a<e.numChildren;a++){const n=e.getChildAt(a);n.visible=!!t}},e.node_3DChildrenVisible=function(e,t){for(let a=0;a<e.numChildren;a++){const n=e.getChildAt(a);n.active=!!t}},e.node_3dFindChild=function node_3dFindChild(e,t){var a;if(null!=(a=e.getChildByName(t)))return a;for(var n=null,i=0;i<e.numChildren;i++)if(null!=(n=node_3dFindChild(e.getChildAt(i),t)))return n;return null},e.node_2dFindChild=function node_2dFindChild(e,t){var a;if(null!=(a=e.getChildByName(t)))return a;for(var n=null,i=0;i<e.numChildren;i++)if(null!=(n=node_2dFindChild(e.getChildAt(i),t)))return n;return null},e.randomOneHalf=function(){let e;return e=Math.floor(2*Math.random())},e.randomNumber=function(e,t){return t?Math.floor(Math.random()*(t-e))+e:Math.floor(Math.random()*e)},e.randomCountNumer=function(t,a,n,i){let o=[];if(n||(n=1),null==i&&(i=!0),a){for(;n>o.length;){let n;n=i?Math.floor(Math.random()*(a-t))+t:Math.random()*(a-t)+t,o.push(n),e.arrayUnique_01(o)}return o}for(;n>o.length;){let a;a=i?Math.floor(Math.random()*t):Math.random()*t,o.push(a),e.arrayUnique_01(o)}return o},e.d2_twoObjectsLen=function(e,t){return new Laya.Point(e.x,e.y).distance(t.x,t.y)},e.d2_Vector_Angle=function(e,t){let a=90-Math.atan2(e,t)*(180/Math.PI);return a<=0&&(a=270+(90+a)),a-90},e.d2_angle_Vector=function(e){let t=(90-(e-=90))/(180/Math.PI),a=new Laya.Point(Math.sin(t),Math.cos(t));return a.normalize(),a},e.d3_twoObjectsLen=function(e,t){let a=e.transform.position,n=t.transform.position,i=new Laya.Vector3;return Laya.Vector3.subtract(a,n,i),Laya.Vector3.scalarLength(i)},e.d3_twoPositionLen=function(e,t){let a=d3_twoSubV3(e,t);return Laya.Vector3.scalarLength(a)},e.d3_twoSubV3=d3_twoSubV3,e.d3_maximumDistanceLimi=function(e,t,a){let n=new Laya.Vector3,i=t.transform.position;if(Laya.Vector3.subtract(i,e,n),Laya.Vector3.scalarLength(n)>=a){let i=new Laya.Vector3;Laya.Vector3.normalize(n,i);let o=e.x+i.x*a,l=e.y+i.y*a,s=e.z+i.z*a,r=new Laya.Vector3(o,l,s);return t.transform.position=r,r}},e.d3_rayScanning=function(e,t,a,n){let i=new Laya.Ray(new Laya.Vector3(0,0,0),new Laya.Vector3(0,0,0)),o=new Array;if(e.viewportPointToRay(a,i),t.physicsSimulation.rayCastAll(i,o),0!=o.length&&n){let e=null;for(var l=0;l<o.length;l++)o[l].collider.owner.name===n&&(e=o[l]);return e}return o},e.d3_TransitionScreenPointfor=function(e,t){let a=new Laya.Vector3;t.viewport.project(e,t.projectionViewMatrix,a);let n=new Laya.Vector2;return n.x=a.x,n.y=a.y,n},e.d3_animatorPlay=function(e,t,a,n){let i=e.getComponent(Laya.Animator);if(i)return n||(n=0),i.play(t,n,a),i;console.log(e.name,"没有动画组件")},e.dAll_reverseVector=function(e,t,a,n){let i;if("2d"===e)return i=new Laya.Point(t.x-a.x,t.y-a.y),n&&i.normalize(),i;if("3d"===e){if(i=new Laya.Vector3(t.x-a.x,t.y-a.y,t.z-a.z),n){let e=new Laya.Vector3;return Laya.Vector3.normalize(i,e),e}return i}},e.sk_indexControl=function(e,t){e.play(t,!0),e.player.currentTime=15e3/e.player.cacheFrameRate},function(e){e.drawPieMask=function(e,t,a){e.cacheAs="bitmap";let n=new Laya.Sprite;return n.blendMode="destination-out",e.addChild(n),n.graphics.drawPie(e.width/2,e.height/2,e.width/2+10,t,a,"#000000")},e.reverseRoundMask=function(e,t,a,n,i){null!=i&&1!=i||node_RemoveAllChildren(e);let o=new Laya.Sprite;o.name="reverseRoundMask",o.blendMode="destination-out",e.cacheAs="bitmap",e.addChild(o),o.graphics.drawCircle(0,0,n,"#000000"),o.pos(t,a)},e.reverseRoundrectMask=function(e,t,a,n,i,o,l){null!=l&&1!=l||node_RemoveAllChildren(e);let s=new Laya.Sprite;s.name="reverseRoundrectMask",s.blendMode="destination-out",e.cacheAs="bitmap",e.addChild(s),s.graphics.drawPath(0,0,[["moveTo",5,0],["lineTo",n-o,0],["arcTo",n,0,n,o,o],["lineTo",n,i-o],["arcTo",n,i,n-o,i,o],["lineTo",i-o,i],["arcTo",0,i,0,i-o,o],["lineTo",0,o],["arcTo",0,0,o,0,o],["closePath"]],{fillStyle:"#000000"}),s.width=n,s.height=i,s.pivotX=n/2,s.pivotY=i/2,s.pos(t,a)}}(t=e.Draw||(e.Draw={})),e.objArrPropertySort=function(e,t){return e.sort(function(e,a){var n=e[t],i=a[t];return isNaN(Number(n))||isNaN(Number(i))||(n=Number(n),i=Number(i)),n<i?-1:n>i?1:0}),e},e.objArr2DifferentPropertyObjArr1=function(e,t,a){for(var n=[],i=0;i<e.length;i++){for(var o=e[i],l=o[a],s=!1,r=0;r<t.length;r++)if(t[r][a]==l){s=!0;break}s||n.push(o)}return n},e.objArr1IdenticalPropertyObjArr2=function(e,t,a){for(var n=[],i=0;i<e.length;i++){for(var o=e[i],l=(o[a],!1),s=0;s<t.length;s++)if(t[s][a]==name){l=!0;break}l&&n.push(o)}return n},e.objArrUnique=function(e,t){for(var a=0,n=e.length;a<n;a++){var i=a+1;for(n=e.length;i<n;i++)e[a][t]===e[i][t]&&(e.splice(i,1),i--,n--)}return e},e.objArrGetValue=function(e,t){let a=[];for(let n=0;n<e.length;n++)e[n][t]&&a.push(e[n][t]);return a},e.objArray_Copy=function(e){var t=e instanceof Array?[]:{};for(var a in e)t[a]="object"==typeof e[a]?obj_Copy(e[a]):e[a];return t},e.obj_Copy=obj_Copy,e.arrayAddToarray=function(e,t){for(let a=0;a<t.length;a++){const n=t[a];e.push(n)}return e},e.arrayRandomGetOut=function(t,a){a||(a=1);let n=e.array_Copy(t),i=[];if(a>n.length)return"数组长度小于取出的数！";for(let e=0;e<a;e++){let e=Math.round(Math.random()*(n.length-1)),t=n[e];n.splice(e,1),i.push(t)}return i},e.array_Copy=array_Copy,e.arrayUnique_01=function(e){for(var t=0,a=e.length;t<a;t++){var n=t+1;for(a=e.length;n<a;n++)e[t]===e[n]&&(e.splice(n,1),n--,a--)}return e},e.arrayUnique_02=function(e){for(var t=[(e=e.sort())[0]],a=1,n=e.length;a<n;a++)e[a]!==e[a-1]&&t.push(e[a]);return t},e.arrayUnique_03=function(e){return Array.from(new Set(e))},e.array1ExcludeArray2=function(e,t){let a=array_Copy(e),n=array_Copy(t);for(let e=0;e<a.length;e++)for(let t=0;t<n.length;t++)a[e]===n[t]&&(a.splice(e,1),e--);return a},e.array_ExcludeArrays=function(t,a){let n=[];for(let e=0;e<t.length;e++)for(let a=0;a<t[e].length;a++)n.push(t[e][a]);let i=e.array_Copy(n),o=e.arrayUnique_01(i),l=[];for(let e=0;e<o.length;e++)l.push({name:o[e],num:0});for(let e=0;e<n.length;e++)for(let t=0;t<l.length;t++)n[e]==l[t].name&&l[t].num++;let s=[],r=[];for(let e=0;e<l.length;e++)l[e].num==t.length?s.push(l[e].name):r.push(l[e].name);return a?r:s},e.point_DotRotatePoint=function(e,t,a,n,i){let o=e+(a-e)*Math.cos(i*Math.PI/180)-(n-t)*Math.sin(i*Math.PI/180),l=t+(a-e)*Math.sin(i*Math.PI/180)+(n-t)*Math.cos(i*Math.PI/180);return new Laya.Point(o,l)},e.point_SpeedXYByAngle=function(e,t){const a={x:0,y:0};return a.x=t*Math.cos(e*Math.PI/180),a.y=t*Math.sin(e*Math.PI/180),new Laya.Point(a.x,a.y)},e.point_GetRoundPos=function(e,t,a){var n=a,i=(t=t,2*Math.PI/360*e),o=n.x+Math.sin(i)*t,l=n.y-Math.cos(i)*t;return new Laya.Point(o,l)},e.point_RandomPointByCenter=function(t,a,n,i){i||(i=1);let o=[];for(let l=0;l<i;l++){let i=e.randomCountNumer(0,a,1,!1),l=e.randomCountNumer(0,n,1,!1),s=0==e.randomOneHalf()?i[0]:-i[0],r=0==e.randomOneHalf()?l[0]:-l[0],h=new Laya.Point(t.x+s,t.y+r);o.push(h)}return o},e.angle_GetRad=function(e){return e/180*Math.PI},e.jsonCompare=function(t,a,n){let i;if(Laya.LocalStorage.getJSON(a)){i=JSON.parse(Laya.LocalStorage.getJSON(a))[a],console.log(a+"从本地缓存中获取到数据,将和文件夹的json文件进行对比");try{let o=Laya.loader.getRes(t).RECORDS;if(o.length>=i.length){let t=e.objArr2DifferentPropertyObjArr1(o,i,n);console.log("两个数据的差值为：",t),e.arrayAddToarray(i,t)}else console.log(a+"数据表填写有误，长度不能小于之前的长度")}catch(e){console.log(a,"数据赋值失败！请检查数据表或者手动赋值！")}}else try{i=Laya.loader.getRes(t).RECORDS}catch(e){console.log(a+"数据赋值失败！请检查数据表或者手动赋值！")}let o={};return o[a]=i,Laya.LocalStorage.setJSON(a,JSON.stringify(o)),i}}(S=e.Tools||(e.Tools={})),function(e){function getClassArr(t){let n=[];switch(t){case a.everyday:n=e.everydayTask;break;case a.perpetual:n=e.perpetualTask}return n}let t,a,n,i,o;e.TaskClassArr=[],e.todayData={get date(){return Laya.LocalStorage.getItem("Task_todayData")?Number(Laya.LocalStorage.getItem("Task_todayData")):null},set date(e){Laya.LocalStorage.setItem("Task_todayData",e.toString())}},e.getProperty=function(e,t,a){let n=null,i=getClassArr(e);for(let e=0;e<i.length;e++){const o=i[e];if(o.name===t){n=o[a];break}}return null!==n?n:(console.log(t+"找不到属性:"+a,n),null)},e.setProperty=function(t,a,n,i){let o=getClassArr(t);for(let e=0;e<o.length;e++){const t=o[e];if(t.name===a){t[n]=i;break}}let l={};l[t]=o,Laya.LocalStorage.setJSON(t,JSON.stringify(l)),e._TaskList&&e._TaskList.refresh()},e.getClassArr=getClassArr,e.doDetection=function(t,a,n){n||(n=1);let i=e.getProperty(t,a,e.TaskProperty.resCondition),o=e.getProperty(t,a,e.TaskProperty.condition);return-1!==e.getProperty(t,a,e.TaskProperty.get)?o<=i+n?(e.setProperty(t,a,e.TaskProperty.resCondition,o),e.setProperty(t,a,e.TaskProperty.get,1),e._TaskList&&e._TaskList.refresh(),!0):(e.setProperty(t,a,e.TaskProperty.resCondition,i+n),e._TaskList&&e._TaskList.refresh(),!1):-1},function(e){e.name="name",e.explain="explain",e.taskType="taskType",e.condition="condition",e.resCondition="resCondition",e.rewardType="rewardType",e.rewardNum="rewardNum",e.arrange="arrange",e.time="time",e.get="get"}(t=e.TaskProperty||(e.TaskProperty={})),function(e){e.everyday="Task_Everyday",e.perpetual="Task_Perpetual"}(a=e.TaskClass||(e.TaskClass={})),function(e){e.getAward="getAward",e.adsGetAward_Every="adsGetAward_Every",e.useSkins="useSkins",e.victory="victory",e.adsTime="adsTime",e.victoryBox="victoryBox"}(n=e.EventType||(e.EventType={})),function(e){e.ads="ads",e.victory="victory",e.useSkins="useSkins",e.treasureBox="treasureBox"}(i=e.TaskType||(e.TaskType={})),function(e){e["观看广告获得金币"]="观看广告获得金币",e["每日服务10位客人"]="每日服务10位客人",e["每日观看两个广告"]="每日观看两个广告",e["每日使用5种皮肤"]="每日使用5种皮肤",e["每日开启10个宝箱"]="每日开启10个宝箱"}(o=e.TaskName||(e.TaskName={})),e.initTask=function(){e.todayData.date!==(new Date).getDate()?(e.everydayTask=Laya.loader.getRes("GameData/Task/everydayTask.json").RECORDS,console.log("不是同一天，每日任务重制！"),e.todayData.date=(new Date).getDate()):(e.everydayTask=S.jsonCompare("GameData/Task/everydayTask.json",a.everyday,t.name),console.log("是同一天！，继续每日任务"))};e.TaskScene=class extends h.Scene{moduleOnAwake(){e._TaskTap=this.self.TaskTap,e._TaskList=this.self.TaskList,e.TaskClassArr=[e.everydayTask]}moduleOnEnable(){this.taskTap_Create(),this.taskList_Create()}taskTap_Create(){e._TaskList.selectHandler=new Laya.Handler(this,this.taskTap_Select)}taskTap_Select(e){}taskList_Create(){e._TaskList.selectEnable=!0,e._TaskList.vScrollBarSkin="",e._TaskList.selectHandler=new Laya.Handler(this,this.taskList_Scelet),e._TaskList.renderHandler=new Laya.Handler(this,this.taskList_Update),this.taskList_refresh()}taskList_Scelet(e){}taskList_Update(e,t){}taskList_refresh(){e._TaskList&&e.TaskClassArr.length>0&&(e._TaskList.array=e.TaskClassArr[0],e._TaskList.refresh())}}}(L=e.Task||(e.Task={})),function(e){function getProperty(e,t,a){let n=null,i=getClassArr(e);for(let e=0;e<i.length;e++){const o=i[e];if(o.name===t){n=o[a];break}}return null!==n?n:(console.log(t+"找不到属性:"+a,n),null)}function setProperty(t,a,n,i){let o=getClassArr(t);for(let e=0;e<o.length;e++){const t=o[e];if(t.name===a){t[n]=i;break}}let l={};l[t]=o,Laya.LocalStorage.setJSON(t,JSON.stringify(l)),e._ShopList&&e._ShopList.refresh()}function get_Current(t){let a=null;switch(t){case n.Skin:a=e._currentSkin.name;break;case n.Props:a=e._currentProp.name;break;case n.Other:a=e._currentOther.name}return a}function getClassArr(t){let a=[];switch(t){case n.Skin:a=e.allSkin;break;case n.Props:a=e.allProps;break;case n.Other:a=e.allOther}return a}let t,a,n,i;e.goodsClassArr=[],e.classWarehouse=[],e._tryName=[],e.allSkin=[],e._currentSkin={get name(){return Laya.LocalStorage.getItem("Shop_currentSkin")?Laya.LocalStorage.getItem("Shop_currentSkin"):null},set name(e){Laya.LocalStorage.setItem("Shop_currentSkin",e)}},e.allProps=[],e._currentProp={get name(){return Laya.LocalStorage.getItem("Shop_currentProp")?Laya.LocalStorage.getItem("Shop_currentProp"):null},set name(e){Laya.LocalStorage.setItem("Shop_currentProp",e)}},e.allOther=[],e._currentOther={get name(){return Laya.LocalStorage.getItem("Shop_crrentOther")?Laya.LocalStorage.getItem("Shop_crrentOther"):null},set name(e){Laya.LocalStorage.setItem("Shop_crrentOther",e)}},e.useSkinType=[],e.setUseSkinType=function(){let t;if(!Laya.LocalStorage.getJSON("Shop_useSkinType"))return;t=JSON.parse(Laya.LocalStorage.getJSON("Shop_useSkinType")),e.useSkinType=null!==t?t.Shop_useSkinType:[],e.useSkinType.push(e._currentOther.name,e._currentProp.name,e._currentSkin.name),e.useSkinType=S.arrayUnique_03(e.useSkinType);let a={Shop_useSkinType:e.useSkinType};return Laya.LocalStorage.setJSON("Shop_useSkinType",JSON.stringify(a)),e.useSkinType.length},e.getProperty=getProperty,e.setProperty=setProperty,e.getHaveArr=function(e){let a=getClassArr(e),n=[];for(let e=0;e<a.length;e++){const i=a[e];i[t.have]&&n.push(i)}return n},e.getwayGoldArr=function(e,n,i){let o=getClassArr(e),l=[];for(let e=0;e<o.length;e++){const i=o[e];n&&void 0!==n?i[t.have]&&i[t.getway]===a.gold&&l.push(i):n||void 0===n?null==n&&i[t.getway]===a.gold&&l.push(i):i[t.have]||i[t.getway]!==a.gold||l.push(i)}if(i&&void 0!==i)for(let a=0;a<l.length;a++)if(l[a][t.name]===get_Current(e)){l.splice(a,1);break}return l},e.getwayIneedwinArr=function(e,n){let i=getClassArr(e),o=[];for(let e=0;e<i.length;e++){const l=i[e];n&&void 0!==n?l[t.have]&&l[t.getway]===a.ineedwin&&o.push(l):n||void 0===n?null==n&&l[t.getway]===a.ineedwin&&o.push(l):l[t.have]||l[t.getway]!==a.ineedwin||o.push(l)}return o},e.get_Current=get_Current,e.getClassArr=getClassArr,e.buyGoods=function(a,n,i){i||(i=1);let o=getProperty(a,n,t.resCondition),l=getProperty(a,n,t.condition),s=getProperty(a,n,t.have);return!0!==s&&null!==s?l<=o+i?(setProperty(a,n,t.resCondition,l),setProperty(a,n,t.have,!0),e._ShopList&&e._ShopList.refresh(),!0):(setProperty(a,n,t.resCondition,o+i),e._ShopList&&e._ShopList.refresh(),!1):-1},e.initShop=function(){e.allSkin=S.jsonCompare("GameData/Shop/Skin.json",n.Skin,t.name),e.allProps=S.jsonCompare("GameData/Shop/Props.json",n.Props,t.name),e.allOther=S.jsonCompare("GameData/Shop/Other.json",n.Other,t.name)},function(e){e.name="name",e.getway="getway",e.condition="condition",e.resCondition="resCondition",e.arrange="arrange",e.getOder="getOder",e.have="have"}(t=e.GoodsProperty||(e.GoodsProperty={})),function(e){e.free="free",e.ads="ads",e.adsXD="adsXD",e.ineedwin="ineedwin",e.gold="gold",e.diamond="diamond",e.easterEgg="easterEgg",e.other="other"}(a=e.Getway||(e.Getway={})),function(e){e.Skin="Shop_Skin",e.Props="Shop_Props",e.Other="Shop_Other"}(n=e.GoodsClass||(e.GoodsClass={})),function(e){e.select="select"}(i=e.EventType||(e.EventType={}));e.ShopScene=class extends h.Scene{moduleOnAwake(){e._ShopTap=this.self.MyTap,e._ShopList=this.self.MyList,e.allSkin||(e.allSkin=S.jsonCompare("GameData/Shop/Skin.json",n.Skin,t.name)),e.allProps||(e.allProps=S.jsonCompare("GameData/Shop/Props.json",n.Props,t.name)),e.allOther||(e.allOther=S.jsonCompare("GameData/Shop/Other.json",n.Other,t.name)),e.goodsClassArr=[e.allSkin,e.allProps,e.allOther],e.classWarehouse=[n.Skin,n.Props,n.Skin]}moduleOnEnable(){this.myList_Create(),this.myTap_Create()}myTap_Create(){e._ShopTap.selectHandler=new Laya.Handler(this,this.myTap_Select)}myTap_Select(e){}myList_Create(){e._ShopList.selectEnable=!0,e._ShopList.selectHandler=new Laya.Handler(this,this.myList_Scelet),e._ShopList.renderHandler=new Laya.Handler(this,this.myList_Update),this.myList_refresh()}myList_Scelet(e){}myList_Update(e,t){}myList_refresh(){e._ShopList&&e.goodsClassArr.length>0&&(e._ShopList.array=e.goodsClassArr[0],e._ShopList.refresh())}}}(C=e.Shop||(e.Shop={})),function(e){let t,a;e._BoxArray=[],e._canOpenNum=3,e._alreadyOpenNum=0,e._adsMaxOpenNum=6,e._openVictoryBoxNum=0,e.getProperty=function(t,a){let n=null;for(let i=0;i<e._BoxArray.length;i++){const o=e._BoxArray[i];if(o.name===t){n=o[a];break}}return null!==n?n:(console.log(t+"找不到属性:"+a,n),null)},e.setProperty=function(t,a,n){for(let i=0;i<e._BoxArray.length;i++){const o=e._BoxArray[i];if(o.name===t){o[a]=n;break}}e._BoxList&&e._BoxList.refresh()},function(e){e.name="name",e.rewardType="rewardType",e.rewardNum="rewardNum",e.openState="openState",e.ads="ads",e.select="select"}(t=e.BoxProperty||(e.BoxProperty={})),function(e){e.openBox="openBox"}(a=e.EventType||(e.EventType={}));e.VictoryBoxScene=class extends h.Scene{moduleOnAwake(){e._BoxList=this.self.MyList,e._BoxArray=S.objArray_Copy(Laya.loader.getRes("GameData/VictoryBox/VictoryBox.json").RECORDS),e._selectBox=null,e._canOpenNum=3,e._openVictoryBoxNum++,e._adsMaxOpenNum=6,e._alreadyOpenNum=0}moduleOnEnable(){this.boxList_Create()}boxList_Create(){e._BoxList.selectEnable=!0,e._BoxList.selectHandler=new Laya.Handler(this,this.boxList_Scelet),e._BoxList.renderHandler=new Laya.Handler(this,this.boxList_Update),this.boxList_refresh()}boxList_Scelet(e){}boxList_Update(e,t){}boxList_refresh(){e._BoxList&&(e._BoxList.array=e._BoxArray,e._BoxList.refresh())}}}(w=e.VictoryBox||(e.VictoryBox={})),function(e){function getProperty(t,a){let n=null;for(let i=0;i<e._checkArray.length;i++){const o=e._checkArray[i];if(o.name===t){n=o[a];break}}return null!==n?n:(console.log(t+"找不到属性:"+a,n),null)}function setProperty(t,a,n,i){for(let t=0;t<e._checkArray.length;t++){const o=e._checkArray[t];if(o.name===a){o[n]=i;break}}let o={};o[t]=e._checkArray,Laya.LocalStorage.setJSON(t,JSON.stringify(o)),e._checkList&&e._checkList.refresh()}let t,a,n;e._fromWhich=h.SceneName.UILoding,e._lastCheckDate={get date(){return Laya.LocalStorage.getItem("Check_lastCheckDate")?Number(Laya.LocalStorage.getItem("Check_lastCheckDate")):-1},set date(e){Laya.LocalStorage.setItem("Check_lastCheckDate",e.toString())}},e._checkInNum={get number(){return Laya.LocalStorage.getItem("Check_checkInNum")?Number(Laya.LocalStorage.getItem("Check_checkInNum")):0},set number(e){Laya.LocalStorage.setItem("Check_checkInNum",e.toString())}},e._todayCheckIn={get bool(){return e._lastCheckDate.date==s._date.date}},e.getProperty=getProperty,e.setProperty=setProperty,e.openCheckIn=function(){e._todayCheckIn.bool?(k._adsNum.value<7&&h._openScene(h.SceneName.UISkinQualified),console.log("签到过了，今日不可以再签到")):(console.log("没有签到过，弹出签到页面！"),h._openScene(h.SceneName.UICheckIn))},e.todayCheckIn_7Days=function(){return e._lastCheckDate.date=s._date.date,e._checkInNum.number++,setProperty(t.chek_7Days,"day"+e._checkInNum.number,a.checkInState,!0),getProperty("day"+e._checkInNum.number,a.rewardNum)},e.init=function(){7!==e._checkInNum.number||e._todayCheckIn.bool||(e._checkInNum.number=0,Laya.LocalStorage.removeItem(t.chek_7Days))},function(e){e.chek_7Days="Chek_7Days",e.chek_15Days="Chek_15Days",e.chek_30Days="Chek_30Days"}(t=e.CheckClass||(e.CheckClass={})),function(e){e.name="name",e.rewardType="rewardType",e.rewardNum="rewardNum",e.checkInState="checkInState",e.arrange="arrange"}(a=e.CheckProPerty||(e.CheckProPerty={})),function(e){e.removeCheckBtn="removeCheckBtn"}(n=e.EventType||(e.EventType={}));e.CheckInScene=class extends h.Scene{moduleOnAwake(){e._checkList=this.self.CheckList,e._checkArray=S.jsonCompare("GameData/CheckIn/CheckIn.json",t.chek_7Days,a.name)}moduleOnEnable(){this.checkList_Create()}moduleEventReg(){}checkList_Create(){e._checkList.selectEnable=!0,e._checkList.selectHandler=new Laya.Handler(this,this.checkList_Scelet),e._checkList.renderHandler=new Laya.Handler(this,this.checkList_Update),this.checkList_refresh()}checkList_Scelet(e){}checkList_Update(e,t){}checkList_refresh(){e._checkList&&(e._checkList.array=e._checkArray,e._checkList.refresh())}}}(v=e.CheckIn||(e.CheckIn={})),function(e){let t;e._adsNum={get value(){return Laya.LocalStorage.getItem("SkinQualified_adsNum")?Number(Laya.LocalStorage.getItem("SkinQualified_adsNum")):0},set value(e){Laya.LocalStorage.setItem("SkinQualified_adsNum",e.toString())}},e.openUISkinQualified=function(t){e._adsNum.value>=e._needAdsNum||(h._openScene(h.SceneName.UISkinQualified),e._fromScene=t)},function(e){e.acquisition="acquisition"}(t=e.EventType||(e.EventType={}));e.SkinQualifiedScene=class extends h.Scene{moduleOnEnable(){e._needAdsNum=3}}}(k=e.SkinQualified||(e.SkinQualified={})),function(e){let t,a,n;e._skinClassArr=[],e._headSkinArr=[],e._currentHead={get name(){return Laya.LocalStorage.getItem("Skin_currentHead")?Laya.LocalStorage.getItem("Skin_currentHead"):null},set name(e){Laya.LocalStorage.setItem("Skin_currentHead",e)}},e._eyeSkinArr=[],e._currentEye={get name(){return Laya.LocalStorage.getItem("Skin_currentEye")?Laya.LocalStorage.getItem("Skin_currentEye"):null},set name(e){Laya.LocalStorage.setItem("Skin_currentEye",e)}},function(e){e.head="head",e.eye="eye",e.body="body",e.upperBody="upperBody",e.lowerBody="lowerBody"}(t=e.SkinClass||(e.SkinClass={})),function(e){e.name="name",e.getway="getway",e.condition="condition",e.resCondition="resCondition",e.arrange="arrange",e.getOder="getOder",e.classify="classify",e.have="have"}(a=e.SkinProperty||(e.SkinProperty={})),function(e){e.purchase="purchase",e.select="select"}(n=e.EventType||(e.EventType={}));e.SkinScene=class extends h.Scene{moduleOnAwake(){e._SkinTap=this.self.SkinTap,e._SkinList=this.self.SkinList,e._skinClassArr=[e._eyeSkinArr,e._headSkinArr]}moduleOnEnable(){this.skinList_Create(),this.skinTap_Create()}skinTap_Create(){e._SkinTap.selectHandler=new Laya.Handler(this,this.skinTap_Select)}skinTap_Select(e){}skinList_Create(){e._SkinList.selectEnable=!0,e._SkinList.selectHandler=new Laya.Handler(this,this.skinList_Scelet),e._SkinList.renderHandler=new Laya.Handler(this,this.skinList_Update),this.skinList_refresh()}skinList_Scelet(e){}skinList_Update(e,t){}skinList_refresh(){e._SkinList&&e._skinClassArr.length>1&&(e._SkinList.array=e._skinClassArr[0],e._SkinList.refresh())}}}(A=e.Skin||(e.Skin={})),function(e){function getProperty(e,t,a){let n=null,i=getClassArr(e);for(let e=0;e<i.length;e++){const o=i[e];if(o.name===t){n=o[a];break}}return null!==n?n:(console.log(t+"找不到属性:"+a,n),null)}function setProperty(e,t,a,n){let i=getClassArr(e);for(let e=0;e<i.length;e++){const o=i[e];if(o.name===t){o[a]=n;break}}let o={};o[e]=i,Laya.LocalStorage.setJSON(e,JSON.stringify(o))}function getClassArr(t){let a=[];switch(t){case n.EasterEgg_01:a=e._easterEgg_1Arr}return a}let t,a,n,i,o;e._easterEgg_1Arr=[],e._easterEgg_1={get value(){return!!Laya.LocalStorage.getItem("_easterEgg_01")},set value(e){Laya.LocalStorage.setItem("_easterEgg_01",e.toString())}},e.initEasterEgg=function(){e._easterEgg_1Arr=S.jsonCompare("GameData/EasterEgg/EasterEgg.json",n.EasterEgg_01,a.name),Laya.loader.getRes("GameData/EasterEgg/EasterEgg.json").RECORDS},e.getProperty=getProperty,e.setProperty=setProperty,e.getClassArr=getClassArr,e.doDetection=function(e,t,n){n||(n=0);let i=getProperty(e,t,a.resCondition),o=getProperty(e,t,a.condition);return!!getProperty(e,t,a.complete)||(o<=i+n?(setProperty(e,t,a.resCondition,o),setProperty(e,t,a.complete,!0),console.log(getProperty(e,t,a.complete)),!0):(setProperty(e,t,a.resCondition,i+n),!1))},e.detectAllTasks=function(e){let t=1,n=getClassArr(e);for(const i in n)if(n.hasOwnProperty(i)){const o=n[i];let l=getProperty(e,o.name,a.resCondition);getProperty(e,o.name,a.condition)>l&&(t=0)}return 1==t?console.log(e,"完成了！"):console.log(e,"没有完成！"),t},function(e){e.gold="gold",e.diamond="diamond",e.assembly="assembly"}(t=e.rewardType||(e.rewardType={})),function(e){e.name="name",e.explain="explain",e.condition="condition",e.resCondition="resCondition",e.complete="complete"}(a=e.Property||(e.Property={})),function(e){e.EasterEgg_01="EasterEgg_01"}(n=e.Classify||(e.Classify={})),function(e){e.assembly_1="assembly_1",e.assembly_2="assembly_2",e.assembly_3="assembly_3",e.assembly_4="assembly_4",e.assembly_5="assembly_5"}(i=e.Name||(e.Name={})),function(e){e.trigger="trigger",e.easterEggAds="easterEggAds"}(o=e.EventType||(e.EventType={}));e.EasterEggScene=class extends h.Scene{moduleOnAwake(){}moduleOnEnable(){}moduleEventReg(){}}}(P=e.EasterEgg||(e.EasterEgg={})),function(e){e.VictoryScene=class extends h.Scene{moduleOnAwake(){}moduleEventReg(){}moduleOnEnable(){}}}(T=e.Victory||(e.Victory={})),function(e){e.DefeatedScene=class extends h.Scene{moduleOnAwake(){}moduleEventReg(){}moduleOnEnable(){}}}(b=e.Defeated||(e.Defeated={})),function(e){e._freeAds={get num(){return Laya.LocalStorage.getItem("DrawCard_freeAdsNum")?Number(Laya.LocalStorage.getItem("DrawCard_freeAdsNum")):0},set num(e){Laya.LocalStorage.setItem("DrawCard_freeAdsNum",e.toString())}},e._residueDraw={get num(){return Laya.LocalStorage.getItem("DrawCard_residueDraw")?Number(Laya.LocalStorage.getItem("DrawCard_residueDraw")):2},set num(e){Laya.LocalStorage.setItem("DrawCard_residueDraw",e.toString())}},e._drawCount={get num(){return Laya.LocalStorage.getItem("DrawCard_drawCount")?Number(Laya.LocalStorage.getItem("DrawCard_drawCount")):0},set num(e){Laya.LocalStorage.setItem("DrawCard_drawCount",e.toString())}};e.DrawCardScene=class extends h.Scene{moduleOnAwake(){}moduleEventReg(){}moduleOnEnable(){}}}(B=e.DrawCard||(e.DrawCard={})),function(e){e._fromWhich=h.SceneName.UIVictory;e.ShareScene=class extends h.Scene{moduleOnAwake(){}moduleEventReg(){}moduleOnEnable(){}}}(O=e.Share||(e.Share={})),function(e){e.PropTryScene=class extends h.Scene{moduleOnAwake(){}moduleEventReg(){}moduleOnEnable(){}}}(I=e.PropTry||(e.PropTry={})),function(e){e._prop1={get num(){return Laya.LocalStorage.getItem("Backpack_prop1")?Number(Laya.LocalStorage.getItem("Backpack_prop1")):1},set num(e){Laya.LocalStorage.setItem("Backpack_prop1",e.toString())}},e._prop2={get num(){return Laya.LocalStorage.getItem("Backpack_prop2")?Number(Laya.LocalStorage.getItem("Backpack_prop2")):1},set num(e){Laya.LocalStorage.setItem("Backpack_prop2",e.toString())}},e._trophy={get num(){return Laya.LocalStorage.getItem("Backpack_trophy")?Number(Laya.LocalStorage.getItem("Backpack_trophy")):0},set num(e){Laya.LocalStorage.setItem("Backpack_trophy",e.toString())}},e._haveCardArray={get arr(){return Laya.LocalStorage.getJSON("Backpack_haveCardArray")?JSON.parse(Laya.LocalStorage.getJSON("Backpack_haveCardArray")):[]},set arr(e){Laya.LocalStorage.setJSON("Backpack_haveCardArray",JSON.stringify(e))},add(t){let a=e._haveCardArray.arr;for(let e=0;e<t.length;e++)a.push(t[e]);let n=S.arrayUnique_01(a);return Laya.LocalStorage.setJSON("Backpack_haveCardArray",JSON.stringify(n)),n},sub(t){let a=e._haveCardArray.arr;for(let e=0;e<a.length;e++)for(let n=0;n<t.length;n++)a[e]==t[n]&&(a.splice(e,1),e--);return Laya.LocalStorage.setJSON("Backpack_haveCardArray",JSON.stringify(a)),a}},e._noHaveCard={get arr(){let t=e._haveCardArray.arr;return S.array1ExcludeArray2(c.getAllCardName(),t)}},e._backpackArray=[];e.BackpackScene=class extends h.Scene{moduleOnAwake(){}moduleEventReg(){}moduleOnEnable(){}}}(D=e.Backpack||(e.Backpack={})),function(e){let t;e.list_3DScene=[],e.list_3DPrefab=[],e.list_3DMesh=[],e.lolist_3DBaseMaterial=[],e.list_3DTexture2D=[],e.list_2DPic=[],e.list_2DScene=[],e.list_2DPrefab=[],e.list_JsonData=[],e.sumProgress=0,e.currentProgress={p:0,get value(){return this.p},set value(t){if(this.p=t,this.p>=e.sumProgress)console.log("当前进度条进度为:",e.currentProgress.value/e.sumProgress),console.log("进度条停止！"),console.log('所有资源加载完成！此时所有资源可通过例如 Laya.loader.getRes("Data/levelsData.json")获取'),l.notify(e.LodingType.complete);else{let t=0;for(let a=0;a<=e.loadOrderIndex;a++)t+=e.loadOrder[a].length;this.p===t&&e.loadOrderIndex++,l.notify(e.LodingType.loding)}}},function(e){e.complete="complete",e.loding="loding",e.progress="progress"}(t=e.LodingType||(e.LodingType={}));e.LodingScene=class extends h.Scene{moduleOnAwake(){s._loginNumber.value++,console.log("玩家登陆的天数为：",s._loginDate.value.length,"天")}moduleEventReg(){l.reg(t.loding,this,()=>{this.lodingRule()}),l.reg(t.complete,this,()=>{let e=this.lodingComplete();_.playMusic(),Laya.timer.once(e,this,()=>{h._openScene(h.SceneName.UIInit,this.self)})}),l.reg(t.progress,this,t=>{e.currentProgress.value++,e.currentProgress.value<e.sumProgress&&(console.log("当前进度条进度为:",e.currentProgress.value/e.sumProgress),this.lodingPhaseComplete())})}moduleOnEnable(){e.loadOrder=[e.list_2DPic,e.list_2DScene,e.list_2DPrefab,e.list_3DScene,e.list_3DPrefab,e.list_JsonData];for(let t=0;t<e.loadOrder.length;t++)e.sumProgress+=e.loadOrder[t].length,e.loadOrder[t].length<=0&&(e.loadOrder.splice(t,1),t--);e.loadOrderIndex=0;let t=this.lwgOpenAni();null==t&&(t=0),Laya.timer.once(t,this,()=>{l.notify(e.LodingType.loding)})}lodingRule(){if(e.loadOrder.length<=0)return void console.log("没有加载项");let a=0;for(let t=0;t<e.loadOrderIndex;t++)a+=e.loadOrder[t].length;let n=e.currentProgress.value-a;switch(e.loadOrder[e.loadOrderIndex]){case e.list_2DPic:Laya.loader.load(e.list_2DPic[n],Laya.Handler.create(this,a=>{null==a?console.log("XXXXXXXXXXX2D资源"+e.list_2DPic[n]+"加载失败！不会停止加载进程！","数组下标为：",n,"XXXXXXXXXXX"):console.log("2D图片"+e.list_2DPic[n]+"加载完成！","数组下标为：",n),l.notify(t.progress)}));break;case e.list_2DScene:Laya.loader.load(e.list_2DScene[n],Laya.Handler.create(this,a=>{null==a?console.log("XXXXXXXXXXX数据表"+e.list_2DScene[n]+"加载失败！不会停止加载进程！","数组下标为：",n,"XXXXXXXXXXX"):console.log("2D场景"+e.list_2DScene[n]+"加载完成！","数组下标为：",n),l.notify(t.progress)}),null,Laya.Loader.JSON);break;case e.list_2DPrefab:Laya.loader.load(e.list_2DPrefab[n],Laya.Handler.create(this,a=>{null==a?console.log("XXXXXXXXXXX数据表"+e.list_2DPrefab[n]+"加载失败！不会停止加载进程！","数组下标为：",n,"XXXXXXXXXXX"):console.log("2D预制体"+e.list_2DPrefab[n]+"加载完成！","数组下标为：",n),l.notify(t.progress)}),null,Laya.Loader.JSON);break;case e.list_3DScene:Laya.Scene3D.load(e.list_3DScene[n],Laya.Handler.create(this,a=>{null==a?console.log("XXXXXXXXXXX3D场景"+e.list_3DScene[n]+"加载失败！不会停止加载进程！","数组下标为：",n,"XXXXXXXXXXX"):console.log("3D场景"+e.list_3DScene[n]+"加载完成！","数组下标为：",n),l.notify(t.progress)}));break;case e.list_3DPrefab:Laya.Sprite3D.load(e.list_3DPrefab[n],Laya.Handler.create(this,a=>{null==a?console.log("XXXXXXXXXXX3D预设体"+e.list_3DPrefab[n]+"加载失败！不会停止加载进程！","数组下标为：",n,"XXXXXXXXXXX"):console.log("3D预制体"+e.list_3DPrefab[n]+"加载完成！","数组下标为：",n),l.notify(t.progress)}));break;case e.list_JsonData:Laya.loader.load(e.list_JsonData[n],Laya.Handler.create(this,a=>{null==a?console.log("XXXXXXXXXXX数据表"+e.list_JsonData[n]+"加载失败！不会停止加载进程！","数组下标为：",n,"XXXXXXXXXXX"):console.log("数据表"+e.list_JsonData[n]+"加载完成！","数组下标为：",n),l.notify(t.progress)}),null,Laya.Loader.JSON)}}lodingPhaseComplete(){}lodingComplete(){return 0}}}(N=e.Loding||(e.Loding={})),function(e){e.StartScene=class extends h.Scene{moduleOnAwake(){}moduleOnEnable(){}moduleEventReg(){}}}(x=e.Start||(e.Start={})),function(e){let t;!function(e){e.open="open",e.close="close"}(t=e.scenePointType||(e.scenePointType={}))}(E=e.Tomato||(e.Tomato={}))}(d||(d={}));let f=d.Admin,p=d.EventAdmin,y=(d.DateAdmin,d.TimerAdmin),g=(d.Pause,d.Execution,d.Gold),m=d.Setting,_=d.PalyAudio,S=d.Click,L=d.Color,C=d.Effects,w=d.Dialog,v=d.Animation2D,k=d.Animation3D,A=d.Tools,P=(d.Elect,d.Loding),T=(d.Loding.LodingScene,d.Shop,d.Shop.ShopScene,d.Task),b=(d.Task.TaskScene,d.VictoryBox),B=(d.VictoryBox.VictoryBoxScene,d.CheckIn),O=(d.CheckIn.CheckInScene,d.SkinQualified),I=(d.SkinQualified.SkinQualifiedScene,d.Skin,d.Skin.SkinScene,d.EasterEgg),D=d.Start,N=(d.Start.StartScene,d.Victory,d.Victory.VictoryScene),x=d.Defeated,E=(d.Defeated.DefeatedScene,d.DrawCard),R=(d.DrawCard.DrawCardScene,d.Share),U=(d.Share.ShareScene,d.PropTry),M=(d.PropTry.PropTryScene,d.Backpack);d.Backpack.BackpackScene,d.Tomato;class G extends f.Scene{setCallBack(e){this.adAction=e}lwgOnEnable(){this.self.BtnClose.visible=!1,Laya.timer.frameOnce(120,this,()=>{this.self.BtnClose.visible=!0})}lwgBtnClick(){S.on(S.Type.largen,this.self.BtnClose,this,null,null,()=>{f._closeScene(this.self)}),S.on(S.Type.largen,this.self.BtnConfirm,this,null,null,()=>{X.ShowReward(this.adAction,null),f._closeScene(this.self)})}onDisable(){}}class X{static ShowBanner(){let e=new TJ.ADS.Param;e.place=TJ.ADS.Place.BOTTOM|TJ.ADS.Place.CENTER,TJ.ADS.Api.ShowBanner(e)}static CloseBanner(){let e=new TJ.ADS.Param;e.place=TJ.ADS.Place.BOTTOM|TJ.ADS.Place.CENTER,TJ.ADS.Api.RemoveBanner(e)}static ShowNormal(){TJ.API.AdService.ShowNormal(new TJ.API.AdService.Param)}static showNormal2(){TJ.API.AdService.ShowNormal(new TJ.API.AdService.Param)}static ShowReward(e,t=500){if(f._evaluating)e();else if(X.CanShowCD){_.stopMusic(),console.log("?????");let a=new TJ.ADS.Param;a.extraAd=!0;let n=!1;a.cbi.Add(TJ.Define.Event.Reward,()=>{n=!0,_.playMusic(_.voiceUrl.bgm,0,1e3),null!=e&&(e(),p.notify(T.EventType.adsTime),p.notify(I.EventType.easterEggAds))}),a.cbi.Add(TJ.Define.Event.Close,()=>{n||(_.playMusic(_.voiceUrl.bgm,0,1e3),console.log("观看完整广告才能获取奖励哦！"),f._openScene(f.SceneName.UIAds,null,()=>{console.log(f._sceneControl.UIAds),f._sceneControl.UIAds.getComponent(G).setCallBack(e)}))}),a.cbi.Add(TJ.Define.Event.NoAds,()=>{_.playMusic(_.voiceUrl.bgm,0,1e3),w.createHint_Middle(w.HintContent["暂时没有广告，过会儿再试试吧！"])}),TJ.ADS.Api.ShowReward(a),X.CanShowCD=!1,setTimeout(()=>{X.CanShowCD=!0},t)}}static Event(e,t){console.log("Param:>"+e+"Value:>"+t);let a=new TJ.GSA.Param;a.id=null==t?e:e+t,console.log(a.id),TJ.GSA.Api.Event(a)}static initShare(){TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.WX_AppRt&&(this.wx.onShareAppMessage(()=>({title:this.shareContent,imageUrl:this.shareImgUrl,query:""})),this.wx.showShareMenu({withShareTicket:!0,success:null,fail:null,complete:null}))}static lureShare(){TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.WX_AppRt&&this.wx.shareAppMessage({title:this.shareContent,imageUrl:this.shareImgUrl,query:""})}static VibrateShort(){m._shake.switch&&TJ.API.Vibrate.Short()}static Vibratelong(){m._shake.switch&&TJ.API.Vibrate.Long()}static TAPoint(e,t){let a=new TJ.API.TA.Param;switch(a.id=t,e){case H.BtnShow:TJ.API.TA.Event_Button_Show(a);break;case H.BtnClick:TJ.API.TA.Event_Button_Click(a);break;case H.PageShow:TJ.API.TA.Event_Page_Show(a);break;case H.PageEnter:TJ.API.TA.Event_Page_Enter(a);break;case H.PageLeave:TJ.API.TA.Event_Page_Leave(a);break;case H.LevelStart:TJ.API.TA.Event_Level_Start(a),console.log("本关开始打点");break;case H.LevelFail:TJ.API.TA.Event_Level_Fail(a),console.log("本关失败打点");break;case H.LevelFinish:TJ.API.TA.Event_Level_Finish(a),console.log("本关胜利打点")}}}var H,F,V,J;X.CanShowCD=!0,X.wx=Laya.Browser.window.wx,X.shareImgUrl="http://image.tomatojoy.cn/6847506204006681a5d5fa0cd91ce408",X.shareContent="比谁猜的快",function(e){e[e.BtnShow=0]="BtnShow",e[e.BtnClick=1]="BtnClick",e[e.PageShow=2]="PageShow",e[e.PageEnter=3]="PageEnter",e[e.PageLeave=4]="PageLeave",e[e.LevelStart=5]="LevelStart",e[e.LevelFinish=6]="LevelFinish",e[e.LevelFail=7]="LevelFail"}(H||(H={}));class j extends f.Scene{lwgOnAwake(){X.TAPoint(H.BtnShow,"GameScene_BtnSC"),X.TAPoint(H.BtnShow,"GameScene_BtnSC"),g.goldAppear()}lwgAdaptive(){this.self.SceneContent.y=.792*Laya.stage.height}lwgOpenAniAfter(){}lwgOnEnable(){p.notify(c.EventType.opening),this.self.BtnSCNum.text=M._prop1.num,this.self.BtnSXNum.text=M._prop2.num,this.self.SceneContent.alpha=0,this.self.BtnBack.visible=!1,Laya.timer.once(4500,this,()=>{f._gameSwitch=!0,this.self.BtnBack.visible=!0})}lwgBtnClick(){S.on(S.Type.largen,this.self.BtnBack,this,null,null,()=>{f._openScene(f.SceneName.UIStart,this.self),p.notify(p.EventType.nextCustoms)});var e=()=>{v.fadeOut(this.self.OptionParent,1,0,300,0,()=>{this.createQuestion(c.setRefrashAnswerForMe()),v.fadeOut(this.self.OptionParent,0,1,300,0)})};S.on(S.Type.largen,this.self.BtnSC,this,null,null,()=>{if(X.TAPoint(H.BtnClick,"GameScene_BtnSC"),M._prop1.num<=0)return void w.createHint_Middle(w.HintContent["没有库存了！"]);if(c.getNotFallCard(c.MyCardParent).length<=2)return void w.createHint_Middle(w.HintContent["牌数太少，无法使用道具！"]);M._prop1.num--,this.self.BtnSCNum.text=A.format_StrAddNum(this.self.BtnSCNum.text,-1);let t=A.node_RandomChildren(this.self.OptionParent);if(!t[0])return;let a=t[0].getChildByName("Content").text;p.notify(c.EventType.BtnSC,[a]),Laya.timer.once(3e3,this,()=>{e()})}),S.on(S.Type.largen,this.self.BtnSX,this,null,null,()=>{if(X.TAPoint(H.BtnClick,"GameScene_BtnSX"),M._prop2.num<=0)return void w.createHint_Middle(w.HintContent["没有库存了！"]);c.getNotFallCard(c.MyCardParent).length<=2?w.createHint_Middle(w.HintContent["牌数太少，无法使用道具！"]):(M._prop2.num--,this.self.BtnSXNum.text=A.format_StrAddNum(this.self.BtnSXNum.text,-1),e())})}lwgEventReg(){p.reg(c.EventType.oppositeAnswer,this,(e,t)=>{v.fadeOut(this.self.SceneContent,this.self.SceneContent.alpha,0,300,0,()=>{this.self.SceneContent.visible=!1,this.createOppositeQuestion(e,t)})}),p.reg(c.EventType.meAnswer,this,e=>{this.self.SceneContent.visible=!0,this.createQuestion(e),v.fadeOut(this.self.SceneContent,0,1,300,0)}),p.reg(p.EventType.victory,this,()=>{u.stopAutoRecord(),f._openScene(f.SceneName.UIShare,this.self,()=>{R._fromWhich=f.SceneName.UIVictory})}),p.reg(p.EventType.defeated,this,()=>{f._openScene(f.SceneName.UIResurgence)}),p.reg(c.EventType.closeGameScene,this,()=>{f._closeScene(this.self)}),p.reg(p.EventType.resurgence,this,()=>{v.fadeOut(this.self.SceneContent,this.self.SceneContent.alpha,0,500,100,()=>{p.notify(c.EventType.opening)})}),p.reg(c.EventType.hideOption,this,()=>{v.fadeOut(this.self.SceneContent,1,.5,500,100)}),p.reg(c.EventType.doWell,this,()=>{let e=Laya.Pool.getItemByCreateFun("DoWell",this.DoWell.create,this.DoWell);Laya.stage.addChild(e),e.pos(Laya.stage.width/2,Laya.stage.height/2-150),v.bombs_AppearAllChild(e,0,1,1.1,0==A.randomOneHalf()?15:-15,200,100,200);for(let e=0;e<5;e++){let t=A.point_RandomPointByCenter(new Laya.Point(Laya.stage.width/2,Laya.stage.height/2-150),200,100);Laya.timer.once(300*e,this,()=>{C.createExplosion_Rotate(this.self,25,t[0].x,t[0].y,"star",10,10)})}Laya.timer.once(1500,this,()=>{v.bombs_Vanish(e,0,1,1.1,0==A.randomOneHalf()?15:-15,200)})})}createQuestion(e){if(A.node_RemoveAllChildren(this.self.OptionParent),e.length<3)this.createOption(this.self.OptionParent,this.self.OptionParent.width/2,this.self.OptionParent.height/2,e[0],!1);else for(let t=0;t<e.length;t++){let a,n;switch(t){case 0:a=.25*this.self.OptionParent.width,n=.25*this.self.OptionParent.height;break;case 1:a=.75*this.self.OptionParent.width,n=.25*this.self.OptionParent.height;break;case 2:a=.25*this.self.OptionParent.width,n=.75*this.self.OptionParent.height;break;case 3:a=.75*this.self.OptionParent.width,n=.75*this.self.OptionParent.height}this.createOption(this.self.OptionParent,a,n,e[t],!0)}}createOption(e,t,a,n,i){f._clickLock.switch=!1;let o=Laya.Pool.getItemByCreateFun("Option",this.Option.create,this.Option),l=o.getChildByName("Content");return l.text=n,e.addChild(o),o.pos(t,a),l.text.length>=10?l.fontSize=22:l.text.length>=8&&l.text.length<10?l.fontSize=25:l.text.length>=6&&l.text.length<8?l.fontSize=28:l.text.length<6&&(l.fontSize=30),i&&S.on(S.Type.largen,o,this,null,null,()=>{f._clickLock.switch=!0,p.notify(c.EventType.judgeMeAnswer,n)}),o}createOppositeQuestion(e,t){let a=Laya.Pool.getItemByCreateFun("GuessCard",this.GuessCard.create,this.GuessCard);this.self.addChild(a),a.pos(0,0);let n=a.getChildByName("Bg");n.alpha=0,n.height=Laya.stage.height,n.width=Laya.stage.width,v.fadeOut(n,0,.3,200,300);let i=a.getChildByName("QuestionBaord");i.getChildByName("Question").text=e[0],v.bombs_Appear(i,0,1,1.1,0,150,50,600);let o=a.getChildByName("Card");o.getChildByName("Pic").skin="Game/UI/UIDrawCard/Card/"+t+".jpg",o.y=.483*Laya.stage.height,v.cardRotateX_TowFace(o,180),v.move_Simple(o,-800,o.y,Laya.stage.width/2,o.y,500,null,()=>{f._clickLock.switch=!1});let l=a.getChildByName("Card1");if(l.visible=!1,e[2]){l.visible=!0,l.getChildByName("Pic").skin="Game/UI/UIDrawCard/Card/"+e[2]+".jpg",v.cardRotateX_TowFace(l,180),v.move_Simple(l,800,l.y,Laya.stage.width/2,l.y,500)}let s=a.getChildByName("BtnYes");S.on(S.Type.largen,s,this,null,null,()=>{console.log("点击！！！"),e[1]?(f._clickLock.switch=!0,p.notify(c.EventType.judgeOppositeAnswer,[e[0],!0])):(L.colour(o,[255,0,0,1],100),v.swell_shrink(o,1,1.05,80),v.leftRight_Shake(o,30,50,0,()=>{console.log("回答错误！")},!1))});let r=a.getChildByName("BtnNo");S.on(S.Type.largen,r,this,null,null,()=>{console.log("点击！！！"),e[1]?(L.colour(o,[255,0,0,1],100),v.swell_shrink(o,1,1.05,80),v.leftRight_Shake(o,30,50,0,()=>{console.log("回答错误！")},!1)):(f._clickLock.switch=!0,p.notify(c.EventType.judgeOppositeAnswer,[e[0],!1]))}),s.y=.874*Laya.stage.height,r.y=.874*Laya.stage.height,v.scale_Alpha(r,0,0,0,1,1,1,150,600),v.scale_Alpha(s,0,0,0,1,1,1,150,600),p.reg(c.EventType.hideGuessCard,this,e=>{v.fadeOut(n,.3,0,200),v.bombs_Vanish(i,0,0,0,150,500),v.move_Simple(o,o.x,o.y,1200,o.y,500,150),v.cardRotateX_TowFace(o,180,null,200),v.move_Simple(l,l.x,l.y,-1200,l.y,500,150),v.cardRotateX_TowFace(l,180,null,200),v.scale_Alpha(r,1,1,1,0,0,0,150,400),v.scale_Alpha(s,1,1,1,0,0,0,150,400,()=>{a.removeSelf(),e&&e()})})}onStageMouseDown(e){let t,a=c.MainCamera.getChildAt(0),n=A.d3_rayScanning(a,c.Scene3D,new Laya.Vector2(e.stageX,e.stageY))[0];n&&f._gameSwitch&&!f._clickLock.switch&&(t=n.collider.owner,p.notify(c.EventType.judgeMeClickCard,t))}}!function(e){let t;e._complete={get bool(){return!!Laya.LocalStorage.getItem("Guide_complete")&&0!=Number(Laya.LocalStorage.getItem("Guide_complete"))},set bool(e){1==e&&(e=1),Laya.LocalStorage.setItem("Guide_complete",e.toString())}},e._whichStepNum=1,function(e){e.onStep="Guide_onStep",e.stepComplete="Guide_stepComplete",e.appear="Guide_appear",e.start="Guide_start",e.complete="Guide_complete"}(t=e.EventType||(e.EventType={}));e.GuideScene=class extends f.Scene{}}(F||(F={}));class Y extends F.GuideScene{lwgOnEnable(){this.self.Background.alpha=0,this.self.Hand.alpha=0,p.notify(F.EventType.onStep),this.self.Draw.on(Laya.Event.LABEL,this,e=>{if("start"===e){if(!this.self.Hand.getChildByName("DrawCanvas")){let e=new Laya.Sprite;e.name="DrawCanvas",this.self.Hand.addChild(e),this.self.Handpic.pos(0,0),this.self.Handpic.pivotX=0,this.self.Handpic.pivotY=0,this.drawLinePos=new Laya.Point(this.self.Handpic.x,this.self.Handpic.y)}}else if("end"===e){let e=this.self.Hand.getChildByName("DrawCanvas");this.self.Hand.getChildByName("DrawCanvas")&&(this.drawLinePos,e.removeSelf())}}),y.frameLoop(1,this,()=>{let e=this.self.Hand.getChildByName("DrawCanvas");e&&this.drawLinePos&&(e.graphics.drawLine(this.drawLinePos.x,this.drawLinePos.y,this.self.Handpic.x,this.self.Handpic.y,"#000000",8),e.graphics.drawCircle(this.self.Handpic.x,this.self.Handpic.y,4,"#000000"),this.drawLinePos=new Laya.Point(this.self.Handpic.x,this.self.Handpic.y))})}lwgEventReg(){var e=()=>{this.self.Draw.play(0,!0),p.notify(F.EventType.appear),this.self.Hand.pos(198,523),A.Draw.reverseRoundMask(this.self.Background,360,598,350,!0)},t=()=>{p.notify(F.EventType.appear),this.self.Hand.pos(360,1161),this.self.Click.play(0,!0),A.Draw.reverseRoundrectMask(this.self.Background,360,1161,320,150,40,!0)},a=()=>{p.notify(F.EventType.appear),this.self.Hand.pos(75,102),this.self.Click.play(0,!0),A.Draw.reverseRoundMask(this.self.Background,72,105,60)},n=()=>{p.notify(F.EventType.appear),this.self.Hand.pos(630,790),this.self.Click.play(0,!0),A.Draw.reverseRoundrectMask(this.self.Background,653,758,130,150,20,!0)},i=()=>{p.notify(F.EventType.appear),this.self.Hand.pos(360,.779*Laya.stage.height),this.self.Click.play(0,!0),A.Draw.reverseRoundrectMask(this.self.Background,360,.779*Laya.stage.height,450,180,20,!0)};p.reg(F.EventType.onStep,this,()=>{Laya.timer.once(500,this,()=>{switch(console.log("新手引导到了第：",F._whichStepNum+"步了"),F._whichStepNum){case 1:e();break;case 2:t();break;case 3:e();break;case 4:t();break;case 5:a();break;case 6:n();break;case 7:a();break;case 8:i()}})}),p.reg(F.EventType.appear,this,e=>{v.fadeOut(this.self.Hand,0,1,150),v.fadeOut(this.self.Background,0,.5,300)}),p.reg(F.EventType.stepComplete,this,()=>{F._whichStepNum++;let e=this.self.Hand.getChildByName("DrawCanvas");this.self.Hand.getChildByName("DrawCanvas")&&(this.drawLinePos,e.removeSelf()),v.fadeOut(this.self.Hand,1,0,150),v.fadeOut(this.self.Background,.5,0,300,0,()=>{this.self.Draw.stop(),this.self.Click.stop()})}),p.reg(F.EventType.complete,this,()=>{v.fadeOut(this.self.Hand,1,0,150),v.fadeOut(this.self.Background,.5,0,300,0,()=>{F._complete.bool=!0,f._closeScene(this.self)})})}}class W extends f.Scene{lwgOnAwake(){g.goldAppear()}lwgOnEnable(){X.TAPoint(H.BtnShow,"UICard_BtnGold"),X.TAPoint(H.BtnClick,"UICard_BtnGold"),this.self.BtnBack.alhpa=0,this.self.BtnBack.visible=!1,Laya.timer.once(4500,this,()=>{v.fadeOut(this.self.BtnBack,0,1,200,0,()=>{this.self.BtnBack.visible=!0,p.notify(F.EventType.onStep)})})}lwgAdaptive(){this.self.BtnGold.y=this.self.BtnAds.y=Laya.stage.height-156}lwgBtnClick(){S.on(S.Type.largen,this.self.BtnBack,this,null,null,()=>{p.notify(c.EventType.closeUICard),7==F._whichStepNum?(p.notify(F.EventType.stepComplete),f._openScene(f.SceneName.UIStart,this.self,null,Laya.stage.numChildren-4)):f._openScene(f.SceneName.UIStart,this.self)});var e=e=>{if(!F._complete.bool)return;let t=c.getQualityObjArrByNameArr(M._noHaveCard.arr,c.Quality.R);t.length>0?"ads"==e?X.ShowReward(()=>{p.notify(c.EventType.UICardBuy,[t])}):"gold"==e&&(X.TAPoint(H.BtnClick,"UICard_BtnGold"),g._num.value>=300?(p.notify(c.EventType.UICardBuy,[t]),g.addGold(-300)):w.createHint_Middle(w.HintContent["金币不够了！"])):w.createHint_Middle(w.HintContent["没有可以购买的卡牌了！"])};S.on(S.Type.largen,this.self.BtnAds,this,null,null,()=>{e("ads")}),S.on(S.Type.largen,this.self.BtnGold,this,null,null,()=>{e("gold")})}onStageMouseDown(e){this.firstPos||(this.firstPos=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseX))}onStageMouseMove(e){if(this.firstPos){this.firstPos.x-Laya.stage.mouseX>0?p.notify(c.EventType.UICardMove,["add"]):p.notify(c.EventType.UICardMove,["sub"])}}onStageMouseUp(e){this.firstPos&&(this.firstPos=null)}}class Q extends B.CheckInScene{lwgOnAwake(){B._todayCheckIn.bool?A.node_RemoveAllChildren(this.self.Platform):A.node_2DShowExcludedChild(this.self.Platform,[f._platform]),m.setBtnVinish(),g.goldVinish()}lwgEventReg(){p.reg("seven",this,()=>{let e=this.self.Seven.getChildByName("ChinkTip"),t=this.self.Seven.getChildByName("Num"),a=this.self.Seven.getChildByName("Pic_Gold");7===B._checkInNum.number?(e.visible=!0,t.visible=!1,a.visible=!1):e.visible=!1})}lwgOnEnable(){X.TAPoint(H.BtnShow,"UICheckIn_BtnThreeGet_WeChat"),p.notify("seven"),g.GoldNode=this.self.GoldNode,this.self.GoldNode.getChildByName("Num").text=g._num.value.toString()}checkList_Update(e,t){let a=e.dataSource,n=(e.getChildByName("Pic_Board"),e.getChildByName("Pic_Gold")),i=e.getChildByName("Num"),o=e.getChildByName("ChinkTip"),l=e.getChildByName("DayNum");switch(a[B.CheckProPerty.checkInState]?(n.visible=!1,i.visible=!1,o.visible=!0):(n.visible=!0,i.visible=!0,i.text=a[B.CheckProPerty.rewardNum],o.visible=!1),a[B.CheckProPerty.name]){case"day1":l.text="第一天";break;case"day2":l.text="第二天";break;case"day3":l.text="第三天";break;case"day4":l.text="第四天";break;case"day5":l.text="第五天";break;case"day6":l.text="第六天";break;case"day7":l.text="第七天"}}lwgBtnClick(){let e;(f._platform=f._platformTpye.Bytedance)?e=this.self.Bytedance_Dot:(f._platform=f._platformTpye.WeChat)&&(e=this.self.WeChat_Dot);var t=()=>{e.visible?e.visible=!1:e.visible=!0},a=()=>{e.visible?X.ShowReward(()=>{n(3)}):n(1)},n=e=>{f._clickLock.switch=!0;let t,a=B._checkInNum.number;t=a<6?B._checkList.getCell(a):this.self.Seven,v.swell_shrink(t,1,1.1,100,0,()=>{let t=[[111,191],[296,191],[486,191],[111,394],[296,394],[486,394],[306,597]];C.createExplosion_Rotate(this.self.SceneContent,25,t[a][0],t[a][1],"star",10,15);let n=B.todayCheckIn_7Days();p.notify("seven"),g.getGoldAni_Heap(Laya.stage,15,88,69,"Game/UI/Common/jinbi.png",new Laya.Point(Laya.stage.width/2,Laya.stage.height/2),new Laya.Point(g.GoldNode.x-80,g.GoldNode.y),null,()=>{g.addGold(n*e),Laya.timer.once(500,this,()=>{i()})})})},i=()=>{f._closeScene(this.self,()=>{B._fromWhich==f.SceneName.UILoding&&O._adsNum.value<7&&f._openScene(f.SceneName.UISkinQualified)})};S.on(S.Type.largen,this.self.WeChat_BtnGet,this,null,null,a),S.on(S.Type.largen,this.self.WeChat_BtnThreeGet,this,null,null,a),S.on(S.Type.noEffect,this.self.WeChat_BtnSelect,this,null,null,t),S.on(S.Type.largen,this.self.Bytedance_BtnGet,this,null,null,a),S.on(S.Type.noEffect,this.self.Bytedance_BtnSelect,this,null,null,t),S.on(S.Type.largen,this.self.OPPO_BtnGet,this,null,null,()=>{n(1)}),S.on(S.Type.largen,this.self.OPPO_BtnThreeGet,this,null,null,()=>{X.ShowReward(()=>{n(3)})}),S.on(S.Type.largen,this.self.BtnBack,this,null,null,()=>{i()})}lwgOnDisable(){m.setBtnAppear(),g.createGoldNode(629,174)}}class z extends x.DefeatedScene{lwgOnAwake(){X.TAPoint(H.LevelFail,"level"+f._gameLevel.value),X.TAPoint(H.BtnShow,"UIDefeated_BtnNext"),p.notify(c.EventType.closeGameScene),f._gameLevel.value=0,f._gameSwitch=!1,A.node_2DShowExcludedChild(this.self.Platform,[f._platform])}lwgOnEnable(){g.GoldNode=this.self.GoldNode,this.self.GoldNode.getChildByName("Num").text=g._num.value.toString(),f._clickLock.switch=!0}lwgBtnClick(){let e;(f._platform=f._platformTpye.Bytedance)?e=this.var("Bytedance_Dot"):(f._platform=f._platformTpye.WeChat)&&(e=this.var("WeChat_Dot"));var t=()=>{X.ShowReward(()=>{X.TAPoint(H.BtnClick,"UIDefeated_BtnNext"),f._gameLevel.value+=1,a()})},a=()=>{X.TAPoint(H.BtnClick,"returnword_fail"),f._openScene(f.SceneName.UIStart,this.self),p.notify(p.EventType.nextCustoms)};S.on(S.Type.largen,this.var("WeChat_BtnAgain"),this,null,null,a),S.on(S.Type.largen,this.self.WeChat_BtnSkip,this,null,null,t),S.on(S.Type.largen,this.self.WeChat_BtnSelect,this,null,null,()=>{e.visible?(this.var("WeChat_BtnAgain").visible=!1,this.var("WeChat_BtnSkip").visible=!0,e.visible=!1):(this.var("WeChat_BtnAgain").visible=!0,this.var("WeChat_BtnSkip").visible=!1,e.visible=!0)}),S.on(S.Type.largen,this.self.OPPO_BtnAgain,this,null,null,a),S.on(S.Type.largen,this.self.OPPO_BtnSkip,this,null,null,t),S.on(S.Type.largen,this.self.Bytedance_BtnAgain,this,null,null,a),S.on(S.Type.largen,this.self.Bytedance_BtnSkip,this,null,null,()=>{e.visible?t():a()}),S.on(S.Type.largen,this.self.Bytedance_BtnSelect,this,null,null,()=>{e.visible?e.visible=!1:e.visible=!0})}}class q extends E.DrawCardScene{lwgOnAwake(){g.goldAppear(),m.setBtnVinish(),F._complete.bool||g.createGoldNode(629,174)}lwgOnEnable(){this.self.ResidueNum.text=E._residueDraw.num.toString(),this.self.FreeAds.value=(E._freeAds.num%3).toString(),y.frameLoop(320,this,()=>{v.move_Simple(this.self.ReflectMask,-263,-271,399,71,800,0,()=>{v.fadeOut(this.self.Reflect2,0,1,200,0,()=>{v.fadeOut(this.self.Reflect2,1,0,300,0,()=>{})})},Laya.Ease.cubicInOut)},!0),y.frameRandomLoop(100,160,this,()=>{C.light_SimpleInfinite(this.self,360,640,720,1280,0,"Game/UI/UIDrawCard/guang2.png",.01)},!0),y.frameLoop(8,this,()=>{this.middleOff||C.particle_AnnularInhalation(this.self.SceneContent,new Laya.Point(this.self.Mirror.x,this.self.Mirror.y),[400,500])}),y.loop(2e3,this,()=>{v.bomb_LeftRight(this.self.BtnFree,1.1,250)},!0),y.loop(3e3,this,()=>{v.fadeOut(this.self.Logo2,1,.5,200,0,()=>{v.fadeOut(this.self.Logo2,.5,1,100,0,()=>{})})}),y.frameRandomLoop(30,100,this,()=>{for(let e=0;e<1;e++)Laya.timer.once(180*e,this,()=>{C.aureole_Continuous(this.self.Guang3,new Laya.Point(this.self.Guang3.width/2,this.self.Guang3.height/2),150,150,null,["Game/UI/UIDrawCard/guang3.png"],0,.02)})},!0),y.frameLoop(1,this,()=>{this.self.Guang5.rotation+=.7,this.self.Guang6.rotation-=.3})}lwgOpenAniAfter(){c.Scene3D.active=!1}lwgEventReg(){p.reg(F.EventType.start,this,()=>{});let e=this.self.Surface,t=e.localToGlobal(new Laya.Point(e.width/2,e.height/2));p.reg("drawCardEvent",this,()=>{if(E._residueDraw.num<=0)return void w.createHint_Middle(w.HintContent["没有抽奖次数了，请通过观看广告获取！"]);E._residueDraw.num--,this.self.ResidueNum.text=E._residueDraw.num.toString(),E._drawCount.num++;let e,a=[];if(1==E._drawCount.num)a=A.arrayRandomGetOut(c.getCardObjByQuality(c.Quality.R),9),e=A.randomNumber(10)>=8?A.arrayRandomGetOut(c.getCardObjByQuality(c.Quality.SSR))[0]:A.arrayRandomGetOut(c.getCardObjByQuality(c.Quality.SR))[0],a.push(e);else if(2==E._drawCount.num)a=A.arrayRandomGetOut(c.getQualityObjArrByNameArr(M._noHaveCard.arr,c.Quality.R),9),e=A.randomNumber(10)>=8?A.arrayRandomGetOut(c.getQualityObjArrByNameArr(M._noHaveCard.arr,c.Quality.SR))[0]:A.arrayRandomGetOut(c.getQualityObjArrByNameArr(M._noHaveCard.arr,c.Quality.SSR))[0],a.push(e);else{a=A.arrayRandomGetOut(c.getCardObjByQuality(c.Quality.R),9),e=A.randomNumber(10)>=8?A.arrayRandomGetOut(c.getCardObjByQuality(c.Quality.SSR))[0]:A.arrayRandomGetOut(c.getCardObjByQuality(c.Quality.SR))[0],a.push(e);let t=A.array_ExcludeArrays([c.getNameArrByObjArr(a),M._haveCardArray.arr]);this.repetitionCardNum=t.length;for(let e=0;e<a.length;e++)for(let n=0;n<t.length;n++)a[e][c.CardProperty.name]==t[n]&&(a[e].repetitionCard=!0)}M._haveCardArray.add(c.getNameArrByObjArr(a)),a=A.arrayRandomGetOut(a,a.length),f._clickLock.switch=!0,this.self.DrawDisPlay.x=0,this.self.BtnTake.visible=!1,this.self.DrawDisPlayBg.alpha=0,this.self.Guang5.alpha=0,this.self.Guang6.alpha=0;for(let e=0;e<10;e++)Laya.timer.once(100*e,this,()=>{let n=Laya.Pool.getItemByCreateFun("Card",this.Card.create,this.Card);n.objData=a[e],n.getChildByName("Back").skin="Game/UI/UIDrawCard/"+n.objData[c.CardProperty.quality]+".png",this.self.CardParent.addChild(n);let i=(this.self.CardParent.width-5*n.width)/6;n.pos(t.x,t.y),n.scale(0,0),n.name="Card"+e,n.zOrder=0;let o,l,s=n.getChildByName("Pic");s.skin="Game/UI/UIDrawCard/Card/"+n.objData[c.CardProperty.name]+".jpg",s.visible=!1,e<=4?(o=i+n.width/2+(n.width+i)*e,l=t.y-100):(o=i+n.width/2+(n.width+i)*(e-5),l=t.y+100),v.move_Scale(n,0,t.x,t.y,o,l,1,200,0,Laya.Ease.expoIn),3==e?v.fadeOut(this.self.DrawDisPlayBg,0,.7,500,0,()=>{v.fadeOut(this.self.Guang5,0,1,500),v.fadeOut(this.self.Guang6,0,1,500)}):9==e&&(p.notify("flop"),f._clickLock.switch=!1)})}),p.reg("flop",this,()=>{this.self.cardIndex||(this.self.cardIndex=0);let e=this.self.CardParent.getChildByName("Card"+this.self.cardIndex);if(!e)return this.self.cardIndex=null,void Laya.timer.once(500,this,()=>{u.stopAutoRecord(),f._openScene(f.SceneName.UIShare,null,()=>{R._fromWhich=f.SceneName.UIDrawCard})});var a=()=>{this.self.cardIndex++,p.notify("flop")};_.playSound("Game/Voice/fanpai.wav"),v.cardRotateX_OneFace(e,()=>{if(e.getChildByName("Pic").visible=!0,!e.objData.repetitionCard){let t=e.getChildByName("New");t.visible=!0,v.bombs_Appear(t,0,1,1.1,5,100,200,250)}},100,50,()=>{if(e.objData[c.CardProperty.quality]==c.Quality.SR||e.objData[c.CardProperty.quality]==c.Quality.SSR){e.zOrder=10*(this.self.cardIndex+1);let n=e.x,i=e.y,o=e.getChildByName("Reflect");y.frameRandomLoop(15,35,this,()=>{for(let t=0;t<1;t++)Laya.timer.once(200*t,this,()=>{C.aureole_Continuous(e,new Laya.Point(e.width/2,e.height/2),41.5,55,null,["Frame/Effects/ui_square_guang2.png"],.1,.002)})},!0),v.leftRight_Shake(e,20,100,300,()=>{_.playSound("Game/Voice/xiyoukazhanshi.wav"),v.rotate_Scale(e,0,1,1,720,3,3,400,200,()=>{v.move_Simple(o.getChildByName("LiuGuang"),-21,-9,131,180,500,400,()=>{v.fadeOut(o.getChildByName("Guang"),0,1,250,0,()=>{v.fadeOut(o.getChildByName("Guang"),1,0,200,0)})},Laya.Ease.expoIn);for(let e=0;e<5;e++){let a=A.point_RandomPointByCenter(new Laya.Point(t.x,t.y),200,100);Laya.timer.once(300*e,this,()=>{C.createExplosion_Rotate(this.self.CardParent,25,a[0].x,a[0].y,"star",10,10)})}v.move_Scale(e,3,e.x,e.y,n,i,1,200,2e3,null,()=>{a()})}),v.move_Simple(e,n,i,t.x,t.y,250,100)})}else a()})}),p.reg(f.SceneName.UIShare+f.SceneName.UIDrawCard,this,()=>{this.self.BtnTake.visible=!0,p.notify(F.EventType.onStep)})}lwgBtnClick(){S.on(S.Type.largen,this.self.BtnFree,this,null,null,()=>{F._complete.bool&&X.ShowReward(()=>{E._freeAds.num++,E._freeAds.num%3==0&&0!==E._freeAds.num&&(E._freeAds.num=0,E._residueDraw.num++,this.self.ResidueNum.text=E._residueDraw.num.toString()),this.self.FreeAds.value=(E._freeAds.num%3).toString()})}),S.on(S.Type.largen,this.self.BtnBack,this,null,null,()=>{F._complete.bool?f._openScene(f.SceneName.UIStart,this.self):5==F._whichStepNum&&(f._openScene(f.SceneName.UIStart,this.self,null,Laya.stage.numChildren-4),p.notify(F.EventType.stepComplete))}),S.on(S.Type.noEffect,this.self.DrawDisPlay,this,e=>{e.stopPropagation()}),S.on(S.Type.largen,this.self.BtnTake,this,null,null,e=>{p.notify(F.EventType.stepComplete),f._clickLock.switch=!0;let t=[],a=[];for(let e=0;e<this.self.CardParent.numChildren;e++){let n=this.self.CardParent.getChildAt(e);n.objData.repetitionCard?t.push(n):a.push(n)}var n=()=>{v.fadeOut(this.self.DrawDisPlay,1,0,200,0,()=>{p.notify(F.EventType.onStep),this.self.DrawDisPlay.x=-800,this.self.DrawDisPlay.alpha=1,f._clickLock.switch=!1}),A.node_RemoveAllChildren(this.self.CardParent)},i=()=>{for(let e=0;e<a.length;e++){const t=a[e];let i=t.localToGlobal(new Laya.Point(t.width/2,t.height/2));Laya.timer.once(150*e,this,()=>{v.move_Simple(t,t.x,i.y,t.x,-300,800,0,()=>{e==a.length-1&&n()},Laya.Ease.cubicOut)})}};0==t.length?i():(()=>{for(let e=0;e<t.length;e++){const a=t[e];let o=a.localToGlobal(new Laya.Point(a.width/2,a.height/2));Laya.timer.once(150*(e+1),this,()=>{C.createExplosion_Rotate(this.self.CardParent,25,o.x,o.y,C.SkinStyle.dot,10,10),a.visible=!1,g.getGoldAni_Heap(Laya.stage,8,88,69,"Game/UI/Common/jinbi.png",new Laya.Point(o.x,o.y),new Laya.Point(g.GoldNode.x-80,g.GoldNode.y),null,()=>{g.addGold(a.objData[c.CardProperty.repetition]),e==t.length-1&&(9==e?n():i())})})}})()}),S.on(S.Type.noEffect,this.self.Surface,this,e=>{if(F._complete.bool||1==F._whichStepNum||3==F._whichStepNum){if(u.startAutoRecord(),p.notify(F.EventType.stepComplete),!this.self.getChildByName("DrawSp")){this.self.Drawlength=0;let e=new Laya.Sprite;this.self.addChild(e),e.name="DrawSp",e.pos(0,0),this.self.DrawSp=e}this.self.DrawPosArr=new Laya.Point(e.stageX,e.stageY),this.middleOff=!0}},e=>{let t=this.self.Surface,a=t.localToGlobal(new Laya.Point(t.width/2,t.height/2));new Laya.Point(e.stageX,e.stageY).distance(a.x,a.y)>t.width/2?this.self.DrawPosArr=null:this.self.DrawPosArr&&(this.self.DrawSp.graphics.drawLine(this.self.DrawPosArr.x,this.self.DrawPosArr.y,e.stageX,e.stageY,"#000000",8),this.self.DrawSp.graphics.drawCircle(e.stageX,e.stageY,4,"#000000"),this.self.Drawlength+=this.self.DrawPosArr.distance(e.stageX,e.stageY),this.self.DrawPosArr=new Laya.Point(e.stageX,e.stageY))},()=>{this.self.getChildByName("DrawSp")&&(this.self.getChildByName("DrawSp").removeSelf(),p.notify("drawCardEvent"),this.self.DrawPosArr=null,this.middleOff=!1)},()=>{this.self.getChildByName("DrawSp")&&(this.self.getChildByName("DrawSp").removeSelf(),p.notify("drawCardEvent"),this.self.DrawPosArr=null,this.middleOff=!1)})}lwgBeforeVanishAni(){c.Scene3D.active=!0}lwgOnDisable(){m.setBtnAppear()}}!function(e){e.low="Low",e.mid="Mid",e.high="High"}(V||(V={}));class Z{constructor(){this.tt=Laya.Browser.window.tt,this.shieldLevel=V.high,this.prk_init="platform_init",this.prk_shareTimes="platform_shareTimes",this.prk_shareTs="platform_shareTs",this.shareItv=36e5,this.shareMaxTimes=5,this.shareImgUrl="http://image.tomatojoy.cn/fkbxs01.jpg",this.shareContent="消灭方块，人人有责！",this.shieldArea=!1,this.shieldUser=!1,this.shieldVersion=!1,this.shieldtime=!1,this.shareTimes=0,this.lastShareTs=0,this.configInited=!1,this.ipInfoInited=!1,this.inited=!1,this.playVideoIndex=0,Z.ins=this,this.requestInfo()}GameCfg(){return __awaiter(this,void 0,void 0,function*(){let e=new TJ.Common.WWW("https://h5.tomatojoy.cn/res/"+TJ.API.AppInfo.AppGuid()+"/config/game.json");if(yield e.Send(),null!=e.error||null==e.text){{let e=new TJ.Common.WWW("https://h5.tomatojoy.cn/res/"+TJ.API.AppInfo.AppGuid()+"/config/game.json");if(yield e.Send(),null==e.error&&null!=e.text)return void this.onGameCfgSuccess(e.text);{let e=new TJ.Common.WWW("https://h5.tomatojoy.cn/res/"+TJ.API.AppInfo.AppGuid()+"/config/game.json");if(yield e.Send(),null==e.error&&null!=e.text)return void this.onGameCfgSuccess(e.text)}}return null}this.onGameCfgSuccess(e.text)})}GetIP(){return __awaiter(this,void 0,void 0,function*(){let e=new TJ.Common.WWW("https://api1.tomatojoy.cn/getIp");if(yield e.Send(),null!=e.error||null==e.text){{let e=new TJ.Common.WWW("https://api1.tomatojoy.cn/getIp");if(yield e.Send(),null==e.error&&null!=e.text)return void this.onGetIpSuccess(e.text);{let e=new TJ.Common.WWW("https://api1.tomatojoy.cn/getIp");if(yield e.Send(),null==e.error&&null!=e.text)return void this.onGetIpSuccess(e.text);console.log(e.error)}}return null}this.onGetIpSuccess(e.text)})}onGameCfgSuccess(e){let t=JSON.parse(e);this.configinfo=t,this.configInited=!0,this.ipInfoInited&&this.init()}onGetIpSuccess(e){let t=JSON.parse(e);this.iPInfo=t,this.ipInfoInited=!0,this.configInited&&this.init()}requestInfo(){TJ.API.AppInfo.Channel()==TJ.Define.Channel.AppRt.ZJTD_AppRt&&(this.GameCfg(),this.GetIP())}init(){if(this.configinfo.shieldStatus&&TJ.API.AppInfo.VersionName()==this.configinfo.codeVer&&(this.shieldVersion=!0),null!=this.iPInfo)if(200==this.iPInfo.code){let t=this.iPInfo.data.city;if(""!=this.configinfo.shieldCity)if("all"==this.configinfo.shieldCity)this.shieldArea=!0;else{this.shieldArea=!1;let a=this.configinfo.shieldCity.split(",");for(var e=0;e<a.length;e++)if(t.indexOf(a[e])>=0){this.shieldArea=!0;break}}else this.shieldArea=!1}else this.shieldArea=!0;if(this.configinfo.shieldTime.status){let e=this.configinfo.shieldTime.time.split("-"),t=new Date;t.getHours()>=Number(e[0])&&t.getHours()<=Number(e[1])?this.shieldtime=!0:this.shieldtime=!1}else this.shieldtime=!1;let t=this.tt.getLaunchOptionsSync();if(console.log(t),this.configinfo.ShieldScene.status){let e=this.configinfo.ShieldScene.Scene.split("|");this.shieldUser=e.indexOf(t.scene)>=0,console.log(this.shieldUser)}this.inited=!0,null!=this.onConFigInited&&this.onConFigInited(),this.tt.getNetworkType({success:e=>{"wifi"==e.networkType?Z.ins.shieldArea?Z.ins.shieldLevel=V.high:Z.ins.shieldLevel=V.low:Z.ins.shieldLevel=V.high,Z.ins.shieldUser&&(Z.ins.shieldLevel=V.high),Z.ins.shieldVersion&&(Z.ins.shieldLevel=V.high),Z.ins.shieldtime&&(Z.ins.shieldLevel=V.high),console.log("--------ZJADMgr.ins.shieldLevel-------"),console.log(Z.ins.shieldLevel)},fail:null,complete:null}),this.showVideo=this.configinfo.ADPoint}CheckPlayVideo(){return!!this.inited&&(this.shieldLevel==V.low&&("0"==this.showVideo[this.playVideoIndex%this.showVideo.length]?(this.playVideoIndex++,!1):(this.playVideoIndex++,!0)))}}!function(e){e.InitScene=class extends f.Scene{moduleOnAwake(){this.admin(),this.game3D(),this.checkIn(),this.shop(),this.skin(),this.task(),this.easterEgg(),m.createSetBtn(64,96,82,82,"Game/UI/Common/shezhi.png")}moduleOnEnable(){}moduleEventReg(){}admin(){f._commonVanishAni=!0,f._platform=f._platformTpye.Bytedance,f._evaluating=!1}game3D(){c.dataInit(),c.Scene3D=Laya.loader.getRes(P.list_3DScene[0]),Laya.stage.addChild(c.Scene3D),c.Scene3D.addComponent(c.MainScene)}checkIn(){B.init()}skin(){}shop(){}task(){}easterEgg(){}}}(J||(J={}));class K extends J.InitScene{lwgOnEnable(){new Z,console.log("完成初始化"),console.log("是否进行过新手引导：",F._complete.bool),F._complete.bool?f._openScene(f.SceneName.UIStart,this.self):(M._haveCardArray.arr=[],E._drawCount.num=0,E._residueDraw.num=2,f._openScene(f.SceneName.UIDrawCard,this.self,()=>{let e={};y.frameLoop(1,e,()=>{Laya.stage.getChildByName("UIDrawCard")&&(Laya.timer.clearAll(e),f._openScene(f.SceneName.UIGuide))})}))}}class $ extends P.LodingScene{lwgOnAwake(){P.list_2DPic=["res/atlas/Frame/Effects.png","res/atlas/Frame/UI.png","res/atlas/Game/UI/UISkinQualified.png","res/atlas/Game/UI/UIDrawCard/Card.png"],P.list_2DScene=["Scene/LwgInit.json","Scene/UICheckIn.json","Scene/UIGuide.json","Scene/UISet.json","Scene/UISkinQualified.json","Scene/UIDrawCard.json"],P.list_2DPrefab=[],P.list_3DScene=["3DScene/LayaScene_GameMain/Conventional/GameMain.ls"],P.list_3DPrefab=["3DPrefab/LayaScene_GameMain/Conventional/CardContainer.lh"],P.list_JsonData=["GameData/VictoryBox/VictoryBox.json","GameData/CheckIn/CheckIn.json","GameData/Game/Feature.json","GameData/Game/Card.json"]}lwgAdaptive(){this.self.Tag.y=Laya.stage.height-100,this.self.ProgressBoard.y=.824*Laya.stage.height,this.self.Pic.y=.505*Laya.stage.height,this.self.Logo.y=.191*Laya.stage.height}lwgOnEnable(){}lwgOpenAni(){return 0}lodingPhaseComplete(){this.self.Progress.mask.x=425*P.currentProgress.value/P.sumProgress-425}lodingComplete(){return this.self.Progress.mask.x=0,200}}class ee extends U.PropTryScene{lwgOnAwake(){X.TAPoint(H.BtnShow,"UIPropTry_BtnGet"),A.node_2DShowExcludedChild(this.self.Platform,[f._platform],!0),f._platform==f._platformTpye.Bytedance&&A.node_2DShowExcludedChild(this.self[f._platformTpye.Bytedance],[Z.ins.shieldLevel],!0)}lwgOnEnable(){this.self.BtnClose.visible=!1,Laya.timer.once(2e3,this,()=>{this.self.BtnClose.visible=!0})}lwgBtnClick(){S.on(S.Type.noEffect,this.self.Bytedance_Low_Select,this,null,null,this.bytedanceSelectUp),S.on(S.Type.largen,this.self.Bytedance_Low_BtnGet,this,null,null,this.bytedanceGetUp),S.on(S.Type.noEffect,this.self.Bytedance_Mid_Select,this,null,null,this.bytedanceSelectUp),S.on(S.Type.largen,this.self.Bytedance_Mid_BtnGet,this,null,null,this.bytedanceGetUp),S.on(S.Type.noEffect,this.self.ClickBg,this,null,null,this.clickBgtUp),S.on(S.Type.largen,this.self.Bytedance_High_BtnGet,this,null,null,this.bytedanceGetUp),S.on(S.Type.largen,this.self.Bytedance_High_BtnNo,this,null,null,()=>{f._openScene(f.SceneName.GameScene,this.self)}),S.on(S.Type.largen,this.self.OPPO_BtnNo,this,null,null,()=>{f._openScene(f.SceneName.GameScene,this.self)}),S.on(S.Type.largen,this.self.OPPO_BtnGet,this,null,null,()=>{this.advFunc()}),S.on(S.Type.largen,this.self.BtnClose,this,null,null,()=>{f._openScene(f.SceneName.GameScene,this.self)})}clickBgtUp(){let e;this.self.Low.visible?e=this.self.Bytedance_Low_Dot:this.self.Mid.visible&&(e=this.self.Bytedance_Mid_Dot),e&&(e.visible?this.advFunc():f._openScene(f.SceneName.GameScene,this.self))}bytedanceGetUp(e){e.stopPropagation(),this.advFunc()}bytedanceSelectUp(e){e.stopPropagation(),this.self.Low.visible?(this.self.Low.count||(this.self.Low.count=0),this.self.Low.count++,this.self.Low.count>=4&&(this.self.Bytedance_Low_Dot.visible?this.self.Bytedance_Low_Dot.visible=!1:this.self.Bytedance_Low_Dot.visible=!0),Z.ins.CheckPlayVideo()&&X.ShowReward(null)):this.self.Mid.visible&&(this.self.Mid.count||(this.self.Mid.count=0),this.self.Mid.count++,this.self.Mid.count>=4&&(this.self.Bytedance_Mid_Dot.visible?this.self.Bytedance_Mid_Dot.visible=!1:this.self.Bytedance_Mid_Dot.visible=!0))}advFunc(){X.ShowReward(()=>{X.TAPoint(H.BtnClick,"UIPropTry_BtnGet"),M._prop1.num++,M._prop2.num++,f._openScene(f.SceneName.GameScene,this.self)})}}class te extends f.Scene{lwgOnAwake(){f._gameSwitch=!1,f._clickLock.switch=!1,this.CounDownSwitch=!0}lwgOnEnable(){console.log("打开复活界面！"),X.TAPoint(H.BtnShow,"UIResurgence_BtnResurgence"),y.frameLoop(60,this,()=>{if(this.CounDownSwitch){let e=this.self.Countdown;e.value=(Number(e.value)-1).toString(),"-1"==e.value&&(e.value="0",Laya.timer.clearAll(this),f._openScene(f.SceneName.UIDefeated,this.self))}})}lwgAdaptive(){this.self.Bg.x=Laya.stage.width,this.self.Bg.y=Laya.stage.height}lwgBtnClick(){S.on(S.Type.largen,this.self.BtnResurgence,this,null,null,()=>{X.ShowReward(()=>{X.TAPoint(H.BtnClick,"UIResurgence_BtnResurgence"),this.CounDownSwitch=!1,f._gameSwitch=!0,f._closeScene(this.self,()=>{p.notify(p.EventType.resurgence)})})}),S.on(S.Type.largen,this.self.BtnNo,this,null,null,()=>{X.TAPoint(H.BtnClick,"closeword_revive"),this.CounDownSwitch=!1,u.stopAutoRecord(),f._openScene(f.SceneName.UIShare,this.self,()=>{R._fromWhich=f.SceneName.UIDefeated})})}}class ae extends f.Scene{lwgOnAwake(){m.setBtnVinish(),X.TAPoint(H.BtnClick,"setbt_main")}lwgOnEnable(){p.notify("soundOnOff"),p.notify("bgMusicOnOff"),p.notify("shakeOnOff")}lwgEventReg(){let e="Game/UI/UISet/di2.png",t="Game/UI/UISet/di1.png";p.reg("soundOnOff",this,()=>{m._sound.switch?(this.self.SoundOff.x=102,this.self.BtnSound.skin=e):(this.self.SoundOff.x=0,this.self.BtnSound.skin=t)}),p.reg("bgMusicOnOff",this,()=>{m._bgMusic.switch?(this.self.BgMusicOff.x=102,this.self.BtnBgMusic.skin=e):(this.self.BgMusicOff.x=0,this.self.BtnBgMusic.skin=t)}),p.reg("shakeOnOff",this,()=>{m._shake.switch?(this.self.ShakeOff.x=102,this.self.BtnShake.skin=e):(this.self.ShakeOff.x=0,this.self.BtnShake.skin=t)})}lwgBtnClick(){S.on(S.Type.largen,this.self.BtnSound,this,null,null,()=>{m._sound.switch?m._sound.switch=!1:m._sound.switch=!0,p.notify("soundOnOff")}),S.on(S.Type.largen,this.self.BtnBgMusic,this,null,null,()=>{m._bgMusic.switch?m._bgMusic.switch=!1:m._bgMusic.switch=!0,p.notify("bgMusicOnOff")}),S.on(S.Type.largen,this.self.BtnShake,this,null,null,()=>{m._shake.switch?m._shake.switch=!1:m._shake.switch=!0,p.notify("shakeOnOff")}),S.on(S.Type.largen,this.self.BtnClose,this,null,null,()=>{f._closeScene(this.self)})}lwgOnDisable(){m.setBtnAppear()}}class ne extends R.ShareScene{lwgOnAwake(){g.goldAppear()}lwgOnEnable(){X.TAPoint(H.BtnShow,"UIShare_BtnShare")}lwgBtnClick(){S.on(S.Type.noEffect,this.self.BtnShare,this,null,null,this.btnShareUp),S.on(S.Type.largen,this.self.BtnClose,this,null,null,this.btnNoShareUp)}btnShareUp(){console.log("分享！"),R._fromWhich==f.SceneName.UIDrawCard?X.TAPoint(H.BtnClick,"UIDrawCard_BtnShare"):R._fromWhich==f.SceneName.UIVictory?X.TAPoint(H.BtnClick,"UIShare_BtnShare"):(R._fromWhich,f.SceneName.UIDefeated),u._share("award",()=>{g.getGoldAni_Heap(Laya.stage,15,88,69,"Game/UI/Common/jinbi.png",new Laya.Point(Laya.stage.width/2,Laya.stage.height/2),new Laya.Point(g.GoldNode.x-80,g.GoldNode.y),null,()=>{g.addGold(300),this.shareFunc()})})}shareFunc(){R._fromWhich==f.SceneName.UIDrawCard?(X.TAPoint(H.BtnShow,"UIDrawCard_BtnShare"),f._closeScene(this.self),p.notify(f.SceneName.UIShare+f.SceneName.UIDrawCard)):R._fromWhich==f.SceneName.UIVictory?(X.TAPoint(H.BtnShow,"UIShare_BtnShare"),f._openScene(f.SceneName.UIVictoryBox,this.self)):R._fromWhich==f.SceneName.UIDefeated&&f._openScene(f.SceneName.UIDefeated,this.self)}btnNoShareUp(e){e.stopPropagation(),this.shareFunc()}lwgOnUpdate(){}}class ie extends O.SkinQualifiedScene{lwgOnAwake(){X.TAPoint(H.BtnShow,"UISkinQualified_BtnGet"),g.goldVinish(),m.setBtnVinish(),O._adsNum.value>=7?(this.self.BtnGet.visible=!1,this.self.AlreadyGet.visible=!0):(this.self.AlreadyGet.visible=!1,this.self.BtnGet.visible=!0,this.self.AdsNum.value=O._adsNum.value.toString())}lwgAdaptive(){this.self.SceneContent.y=Laya.stage.height/2,this.self.Logo1Set.y=.096*Laya.stage.height}lwgOnEnable(){y.frameLoop(1,this,()=>{this.self.Guang2.rotation+=.7,this.self.Guang1.rotation-=.3}),this.self.Guang1.alpha=0,this.self.Guang2.alpha=0,v.fadeOut(this.self.Guang1,0,1,1e3,300),v.fadeOut(this.self.Guang2,0,1,1e3,300),y.loop(2e3,this,()=>{v.bomb_LeftRight(this.self.BtnGet,1.1,250)},!0),y.frameRandomLoop(40,60,this,()=>{C.blink_Star(this.self.StarParent1,new Laya.Point(0,0),80,100,"Game/UI/UISkinQualified/xingxing.png",80,80)},!0),y.frameRandomLoop(40,60,this,()=>{C.blink_Star(this.self.StarParent2,new Laya.Point(0,0),80,100,"Game/UI/UISkinQualified/xingxing.png",80,80)},!0),y.frameRandomLoop(50,80,this,()=>{C.blink_Star(this.self.StarParent3,new Laya.Point(0,0),300,50,"Game/UI/UISkinQualified/xingxing.png",80,80)},!0),y.frameLoop(60,this,()=>{v.move_Simple(this.self.Logo1Liuguang,-53,0,450,65,500,200)},!0),this.self.Logo1Set.alpha=0,Laya.timer.frameOnce(80,this,()=>{v.fadeOut(this.self.Logo1Set,0,1,150,null,()=>{y.frameLoop(130,this,()=>{L.changeConstant(this.self.Logo1Set,[0,0,0],[255,255,255],120)},!0)})}),y.frameRandomLoop(10,30,this,()=>{C.particle_FallingVertical(this.self.FallParent)},!0),this.self.Logo2.scale(0,0),v.bombs_Appear(this.self.Logo2,0,1,1.1,0,200,100,500,()=>{y.frameLoop(200,this,()=>{v.swell_shrink(this.self.Logo2,1,1.05,200)},!0)});for(let e=1;e<8;e++){const t=this.self.CardParent.getChildByName("Card"+e);let a=t.getChildByName("Color");p.notify("cardZOder",[t,e]),t.y=-1e3,1==e?a.alpha=0:2==e||7==e?(t.scale(.95,.95),a.alpha=.3):3==e||6==e?(t.scale(.9,.9),a.alpha=.3):4!=e&&5!=e||(t.scale(.85,.85),a.alpha=.3)}for(let e=1;e<8;e++){const t=this.self.CardParent.getChildByName("Card"+e);let a=[];1==e?a=[331,262]:2==e||7==e?a=[282,309]:3==e||6==e?a=[241,346]:4!=e&&5!=e||(a=[214,385]),v.move_Simple(t,t.x,t.y,t.x,a[1],500,200*(e-1),()=>{7==e&&(p.notify("cardLight"),p.notify("zhuanpan"))},Laya.Ease.cubicInOut)}}lwgEventReg(){p.reg("zhuanpan",this,()=>{y.frameLoop(150,this,()=>{for(let e=1;e<8;e++){const t=this.self.CardParent.getChildByName("Card"+e);let a=e+1>7?1:e+1;const n=this.self.CardParent.getChildByName("Card"+a);let i=500,o=1;1==a||(2==a||7==a?o=.95:3==a||6==a?o=.9:4!=a&&5!=a||(o=.85)),v.move_Scale(t,t.scaleX,t.x,t.y,n.x,n.y,o,i,0);let l=.6,s=1,r=.5;switch(e){case 1:l=.1,s=0,r=.3;break;case 7:l=1,s=.3,r=0}v.fadeOut(t.getChildByName("Color"),s,r,i),v.fadeOut(t,1,l,i,0,()=>{if(t.name="Card"+a,7==e)for(let e=1;e<8;e++){const t=this.self.CardParent.getChildByName("Card"+e);if(!t)return;p.notify("cardLight"),p.notify("cardZOder",[t,e])}v.fadeOut(t,l,1,i,0)})}})}),p.reg("cardLight",this,()=>{L.changeOnce(this.self.CardParent.getChildByName("Card1"),[90,60,0],20)}),p.reg("cardZOder",this,(e,t)=>{switch(t){case 1:e.zOrder=7;break;case 2:e.zOrder=5;break;case 3:e.zOrder=3;break;case 4:e.zOrder=1;break;case 5:e.zOrder=2;break;case 6:e.zOrder=4;break;case 7:e.zOrder=6}})}lwgBtnClick(){S.on(S.Type.largen,this.self.BtnGet,this,null,null,()=>{X.ShowReward(()=>{X.TAPoint(H.BtnClick,"UISkinQualified_BtnGet"),O._adsNum.value++,O._adsNum.value>=7&&(M._haveCardArray.add(c.getNameArrByObjArr(c.getCardObjByQuality(c.Quality.UR))),w.createHint_Middle(w.HintContent["限定皮肤已经获得，请前往皮肤界面查看。"]),v.fadeOut(this.self,1,0,500,500,()=>{f._closeScene(this.self)})),this.self.AdsNum.value=O._adsNum.value.toString()})}),S.on(S.Type.largen,this.self.BtnBack,this,null,null,()=>{f._closeScene(this.self)})}lwgOnDisable(){m.setBtnAppear(),g.goldAppear()}}class oe extends D.StartScene{lwgOnAwake(){m.setBtnAppear(),g.createGoldNode(629,174),p.notify(F.EventType.onStep),X.TAPoint(H.BtnShow,"UIStart_BtnStart"),X.TAPoint(H.BtnShow,"UIStart_BtnCard"),X.TAPoint(H.BtnShow,"UIStart_BtnRanking"),X.TAPoint(H.BtnShow,"UIStart_BtnDrawCard"),X.TAPoint(H.BtnShow,"UIStart_BtnChickIn"),X.TAPoint(H.BtnShow,"UIStart_BtnQualifyCard")}lwgOpenAniAfter(){F._complete.bool&&(B._fromWhich=f.SceneName.UILoding,B._todayCheckIn.bool?(O._adsNum.value<7&&f._openScene(f.SceneName.UISkinQualified),console.log("签到过了，今日不可以再签到")):(console.log("没有签到过，弹出签到页面！"),f._openScene(f.SceneName.UICheckIn)))}lwgAdaptive(){this.self.BtnStart.y=.779*Laya.stage.height}lwgOnEnable(){for(let e=0;e<this.self.LevelStyle.numChildren;e++){let t=this.self.LevelStyle.getChildAt(e),a=Number(t.name.substring(9,t.name.length));if(f._gameLevel.value%4==0){y.frameLoop(100,this,()=>{this.self.LvIcon4.zOrder=1e3,v.shookHead_Simple(this.self.LvIcon4,15,200),C.createExplosion_Rotate(this.self.LvIcon4.parent,10,this.self.LvIcon4.x,this.self.LvIcon4.y,"star",1,15)});break}a<=f._gameLevel.value%4?(t.gray=!1,a==f._gameLevel.value%4&&y.frameLoop(100,this,()=>{v.swell_shrink(t.getChildAt(1),1,1.1,200)})):t.gray=!0}f._gameLevel.value%4==0?(this.self.ProgressBar.mask.x=0,this.self.Percent.text="100 %"):(this.self.ProgressBar.mask.x=f._gameLevel.value%4*115-460,this.self.Percent.text=f._gameLevel.value%4*25+"%"),y.loop(2e3,this,()=>{v.bomb_LeftRight(this.self.BtnStart,1.22,250)},!0)}lwgBtnClick(){S.on(S.Type.largen,this.self.BtnStart,this,null,null,()=>{X.TAPoint(H.BtnClick,"UIStart_BtnStart"),F._complete.bool?f._openScene(f.SceneName.UIPropTry,this.self):8==F._whichStepNum&&(p.notify(F.EventType.complete),f._openScene(f.SceneName.UIPropTry,this.self))}),S.on(S.Type.largen,this.self.BtnDrawCard,this,null,null,()=>{X.TAPoint(H.BtnClick,"UIStart_BtnDrawCard"),F._complete.bool&&f._openScene(f.SceneName.UIDrawCard,this.self)}),S.on(S.Type.largen,this.self.BtnChickIn,this,null,null,()=>{B._fromWhich=f.SceneName.UIStart,X.TAPoint(H.BtnClick,"UIStart_BtnChickIn"),F._complete.bool&&f._openScene(f.SceneName.UICheckIn)}),S.on(S.Type.largen,this.self.BtnQualifyCard,this,null,null,()=>{X.TAPoint(H.BtnClick,"UIStart_BtnQualifyCard"),F._complete.bool&&f._openScene(f.SceneName.UISkinQualified)}),S.on(S.Type.largen,this.self.BtnCard,this,null,null,()=>{X.TAPoint(H.BtnClick,"UIStart_BtnCard"),F._complete.bool?(p.notify(c.EventType.openUICard),f._openScene(f.SceneName.UICard,this.self)):6==F._whichStepNum&&(p.notify(F.EventType.stepComplete),p.notify(c.EventType.openUICard),f._openScene(f.SceneName.UICard,this.self,null,Laya.stage.numChildren-4))}),S.on(S.Type.largen,this.self.BtnRanking,this,null,null,()=>{X.TAPoint(H.BtnShow,"UIStart_BtnRanking"),w.createHint_Middle(w.HintContent["敬请期待!"])})}lwgOnDisable(){m.setBtnVinish(),g.goldVinish()}}class le extends N{lwgOnAwake(){X.TAPoint(H.BtnShow,"UIVictory_Three"),A.node_2DShowExcludedChild(this.self.Platform,[f._platform]),f._gameLevel.value%4==0?M._trophy.num+=50:M._trophy.num+=5,f._gameLevel.value++}lwgOnEnable(){_.playVictorySound(),C.createFireworks(Laya.stage,40,430,200),C.createFireworks(Laya.stage,40,109,200),C.createLeftOrRightJet(Laya.stage,"right",40,720,300),C.createLeftOrRightJet(Laya.stage,"left",40,0,300),this.self.GlodNum.getChildByName("Num").text="+100",g.GoldNode=this.self.GoldNode,this.self.GoldNode.getChildByName("Num").text=g._num.value.toString();let e=0;Laya.timer.frameLoop(8,this,()=>{e++,this.self.Tag.skin=e%2==0?"Game/UI/UIVictory/dajia.png":"Game/UI/UIVictory/qipao.png"})}lwgBtnClick(){let e;(f._platform=f._platformTpye.Bytedance)?e=this.var("Bytedance_Dot"):(f._platform=f._platformTpye.WeChat)&&(e=this.var("WeChat_Dot"));var t=e=>{f._clickLock.switch=!0,g.getGoldAni_Heap(Laya.stage,15,88,69,"Game/UI/Common/jinbi.png",new Laya.Point(Laya.stage.width/2,Laya.stage.height/2),new Laya.Point(g.GoldNode.x-80,g.GoldNode.y),null,()=>{g.addGold(e),f._openScene(f.SceneName.UIStart,this.self),f._clickLock.switch=!1})},a=()=>{X.ShowReward(()=>{X.TAPoint(H.BtnClick,"UIVictory_Three"),t(300)})};S.on(S.Type.largen,this.self.Bytedance_BtnNext,this,null,null,()=>{e.visible?a():t(100)}),S.on(S.Type.largen,this.self.Bytedance_BtnShare,this,null,null,()=>{u._share("noAward",()=>{w.createHint_Middle(w.HintContent["分享成功!"])})}),S.on(S.Type.noEffect,this.self.Bytedance_BtnSelect,this,null,null,()=>{e.visible?e.visible=!1:e.visible=!0}),S.on(S.Type.largen,this.self.OPPO_BtnMore,this,null,null,()=>{a()}),S.on(S.Type.largen,this.self.OPPO_BtnNext,this,null,null,()=>{t(100)}),S.on(S.Type.largen,this.self.WeChat_BtnGeneral,this,null,null,()=>{a()}),S.on(S.Type.largen,this.self.WeChat_BtnMore,this,null,null,()=>{t(100)}),S.on(S.Type.largen,this.self.Wechat_BtnSelect,this,null,null,()=>{e.visible?(this.var("WeChat_BtnMulti").visible=!1,this.var("WeChat_BtnNormal").visible=!0,e.visible=!1):(this.var("WeChat_BtnMulti").visible=!0,this.var("WeChat_BtnNormal").visible=!1,e.visible=!0)})}lwgOnDisable(){p.notify(p.EventType.nextCustoms)}}class se extends f.Object{constructor(){super()}lwgBtnClick(){S.on(S.Type.noEffect,this.self,this,null,null,this.up,null)}btnoff(){S.off(S.Type.noEffect,this.self,this,null,null,this.up,null)}up(e){if(!this.self._dataSource[b.BoxProperty.openState])if(b._canOpenNum>0){let e=this.self.getChildByName("Pic_Box");this.self._dataSource[b.BoxProperty.ads]||(e.skin="Game/UI/UIVictoryBox/baoxiang3.png"),this.btnoff(),v.shookHead_Simple(e,10,100,0,e=>{p.notify(b.EventType.openBox,[this.self._dataSource]),this.lwgBtnClick()})}else w.createHint_Middle(w.HintContent["观看广告可以获得三次开宝箱次数！"])}lwgDisable(){}}class re extends b.VictoryBoxScene{constructor(){super()}lwgOnAwake(){if(X.TAPoint(H.BtnShow,"UIVictoryBox_BtnAgain_Bytedance"),X.TAPoint(H.BtnShow,"UIVictoryBox_Ads"),g.createGoldNode(629,174),b._openVictoryBoxNum>1){let e=A.arrayRandomGetOut([0,1,2,3,4,5,6,7,8],3);for(let t=0;t<e.length;t++){e[t];b.setProperty("box"+e[t],b.BoxProperty.ads,!0)}}A.node_2DShowExcludedChild(this.var("Platform"),[f._platform])}lwgOnEnable(){for(let e=0;e<b._BoxArray.length;e++){let t=b._BoxArray[e][b.BoxProperty.name],a=b.getProperty(t,b.BoxProperty.rewardNum),n=A.randomCountNumer(a[0],a[1],1);b.setProperty(t,b.BoxProperty.rewardNum,n)}this.self.BtnClose.visible=!1,Laya.timer.once(2e3,this,()=>{this.self.BtnClose.visible=!0}),y.frameRandomLoop(30,50,this,()=>{let e=this.self.SceneContent.width/2-160;C.blink_Star(this.self.SceneContent,new Laya.Point(e,this.self.TopPic.height/2+80),90,70,"Game/UI/UIVictoryBox/xingxing.png",53,52)},!0),y.frameRandomLoop(30,50,this,()=>{let e=this.self.SceneContent.width/2+160;C.blink_Star(this.self.SceneContent,new Laya.Point(e,this.self.TopPic.height/2+80),90,70,"Game/UI/UIVictoryBox/xingxing.png",53,52)},!0)}lwgEventReg(){p.reg(b.EventType.openBox,this,e=>{console.log(e,b._canOpenNum),b._canOpenNum>0?e[b.BoxProperty.ads]?X.ShowReward(()=>{X.TAPoint(H.BtnClick,"Adboxvideo"),this.getRewardFunc(e)}):this.getRewardFunc(e):w.createHint_Middle(w.HintContent["观看广告可以获得三次开宝箱次数！"])})}getRewardFunc(e){b._alreadyOpenNum++,b._canOpenNum--,b._selectBox=e[b.BoxProperty.name];let t=e.arrange%3;0==t&&(t=3);let a=Math.floor(e.arrange/3+.5),n=b._BoxList.x+b._BoxList.width/3*t-45,i=b._BoxList.y+b._BoxList.height/3*a+92;C.createExplosion_Rotate(this.self,25,n,i,"star",10,15),b.setProperty(e[b.BoxProperty.name],b.BoxProperty.openState,!0),Laya.timer.frameOnce(20,this,t=>{g.getGoldAni_Heap(Laya.stage,15,88,69,"Game/UI/Common/jinbi.png",new Laya.Point(Laya.stage.width/2,Laya.stage.height/2),new Laya.Point(g.GoldNode.x-80,g.GoldNode.y),null,()=>{let t=b.getProperty(e.name,b.BoxProperty.rewardNum);g.addGold(t)})}),p.notify(T.EventType.victoryBox)}boxList_Update(e,t){let a=e.dataSource,n=e.getChildByName("Num"),i=e.getChildByName("Pic_Gold"),o=e.getChildByName("Pic_Box");e.getChildByName("BordPic");a[b.BoxProperty.openState]?(o.visible=!1,i.visible=!0,n.visible=!0,n.text=a[b.BoxProperty.rewardNum]):(a[b.BoxProperty.ads]?o.skin="Game/UI/UIVictoryBox/baoxiang_adv.png":o.skin="Game/UI/UIVictoryBox/baoxiang2.png",o.visible=!0,i.visible=!1,n.visible=!1)}lwgBtnClick(){let e;(f._platform=f._platformTpye.Bytedance)?e=this.var("Bytedance_Dot"):(f._platform=f._platformTpye.WeChat)&&(e=this.var("WeChat_Dot"));var t=()=>{f._openScene(f.SceneName.UIVictory,this.self)},a=e=>{e.stopPropagation(),X.TAPoint(H.BtnClick,"UIVictoryBox_BtnAgain_Bytedance"),b._alreadyOpenNum<9&&b._adsMaxOpenNum>0?X.ShowReward(()=>{w.createHint_Middle(w.HintContent["增加三次开启宝箱次数！"]),b._canOpenNum+=3,b._adsMaxOpenNum-=3}):w.createHint_Middle(w.HintContent["没有宝箱领可以领了！"])};S.on(S.Type.largen,this.self.OPPO_BtnNo,this,null,null,t),S.on(S.Type.largen,this.self.OPPO_BtnAgain,this,null,null,a),S.on(S.Type.largen,this.self.Bytedance_BtnNo,this,null,null,t),S.on(S.Type.largen,this.self.Bytedance_BtnAgain,this,null,null,a),S.on(S.Type.noEffect,this.self.Bytedance_BtnSelect,this,null,null,()=>{e.visible?(e.visible=!1,this.self.Bytedance_BtnAgain.visible=!1):(e.visible=!0,this.self.Bytedance_BtnAgain.visible=!0)}),S.on(S.Type.largen,this.self.BtnClose,this,null,null,t)}lwgOnUpdate(){b._canOpenNum>0?this.var("Platform").visible=!1:this.var("Platform").visible=!0}lwgOnDisable(){g.GoldNode.removeSelf()}}var he,ce=Laya.ClassUtils.regClass;!function(e){!function(e){class t extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("test/TestScene")}}e.TestSceneUI=t,ce("ui.test.TestSceneUI",t)}(e.test||(e.test={}))}(he||(he={}));class de extends he.test.TestSceneUI{constructor(){super(),this.newScene=Laya.stage.addChild(new Laya.Scene3D);var e=this.newScene.addChild(new Laya.Camera(0,.1,100));e.transform.translate(new Laya.Vector3(0,6,9.5)),e.transform.rotate(new Laya.Vector3(-15,0,0),!0,!1);var t=new Laya.DirectionLight;this.newScene.addChild(t),t.color=new Laya.Vector3(.6,.6,.6);var a=t.transform.worldMatrix;a.setForward(new Laya.Vector3(-1,-1,-1)),t.transform.worldMatrix=a;var n=this.newScene.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createPlane(10,10,10,10))),i=new Laya.BlinnPhongMaterial;Laya.Texture2D.load("res/grass.png",Laya.Handler.create(this,function(e){i.albedoTexture=e}));var o=i.tilingOffset;o.setValue(5,5,0,0),i.tilingOffset=o,n.meshRenderer.material=i;var l=n.addComponent(Laya.PhysicsCollider),s=new Laya.BoxColliderShape(10,0,10);l.colliderShape=s,l.friction=2,l.restitution=.3,this.mat1=new Laya.BlinnPhongMaterial,Laya.Texture2D.load("res/wood.jpg",Laya.Handler.create(this,function(e){this.mat1.albedoTexture=e,Laya.timer.once(100,this,function(){this.addBox()})}))}addBox(){var e=this.newScene.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createBox(.75,.5,.5)));e.meshRenderer.material=this.mat1;var t=e.transform,a=t.position;a.setValue(0,10,0),t.position=a;var n=e.addComponent(Laya.Rigidbody3D),i=new Laya.BoxColliderShape(.75,.5,.5);n.colliderShape=i,n.mass=10}}class ue{constructor(){}static init(){var n=Laya.ClassUtils.regClass;n("TJ/Promo/script/PromoOpen.ts",e),n("TJ/Promo/script/ButtonScale.ts",t),n("TJ/Promo/script/PromoItem.ts",a),n("TJ/Promo/script/P201.ts",i),n("TJ/Promo/script/P202.ts",o),n("TJ/Promo/script/P204.ts",l),n("TJ/Promo/script/P205.ts",s),n("TJ/Promo/script/P106.ts",r),n("script/Game/GameScene.ts",j),n("script/Game/UIAds.ts",G),n("script/Game/UICard.ts",W),n("script/Game/UICheckIn.ts",Q),n("script/Game/UIDefeated.ts",z),n("script/Game/UIDrawCard.ts",q),n("script/Frame/Guide.ts",Y),n("script/Frame/Init.ts",K),n("script/Game/UILoding.ts",$),n("script/Game/UIPropTry.ts",ee),n("script/Game/UIResurgence.ts",te),n("script/Game/UISet.ts",ae),n("script/Game/UIShare.ts",ne),n("script/Game/UISkinQualified.ts",ie),n("script/Game/UIStart.ts",oe),n("script/Game/UIVictory.ts",le),n("script/Game/UIVictoryBox_Cell.ts",se),n("script/Game/UIVictoryBox.ts",re),n("script/GameUI.ts",de)}}ue.width=720,ue.height=1280,ue.scaleMode="fixedwidth",ue.screenMode="vertical",ue.alignV="top",ue.alignH="left",ue.startScene="Scene/UILoding.scene",ue.sceneRoot="",ue.debug=!1,ue.stat=!1,ue.physicsDebug=!1,ue.exportSceneToJson=!0,ue.init();new class{constructor(){window.Laya3D?Laya3D.init(ue.width,ue.height):Laya.init(ue.width,ue.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=ue.scaleMode,Laya.stage.screenMode=ue.screenMode,Laya.stage.alignV=ue.alignV,Laya.stage.alignH=ue.alignH,Laya.URL.exportSceneToJson=ue.exportSceneToJson,(ue.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),ue.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),ue.stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){ue.startScene&&Laya.Scene.open(ue.startScene)}}}();